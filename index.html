<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>SugarCube</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<!--

SugarCube (build: 3010): A free (gratis and libre) header for Twine/Twee, based on TiddlyWiki.
Copyright (c) 2013-2014 Thomas Michael Edwards.

-->
<script type="text/javascript">
document.documentElement.className = "loading";
</script>
<script type="text/javascript">
/*! jQuery v2.1.0 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k="".trim,l={},m=a.document,n="2.1.0",o=function(a,b){return new o.fn.init(a,b)},p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};o.fn=o.prototype={jquery:n,constructor:o,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=o.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return o.each(this,a,b)},map:function(a){return this.pushStack(o.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},o.extend=o.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||o.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(o.isPlainObject(d)||(e=o.isArray(d)))?(e?(e=!1,f=c&&o.isArray(c)?c:[]):f=c&&o.isPlainObject(c)?c:{},g[b]=o.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},o.extend({expando:"jQuery"+(n+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===o.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return a-parseFloat(a)>=0},isPlainObject:function(a){if("object"!==o.type(a)||a.nodeType||o.isWindow(a))return!1;try{if(a.constructor&&!j.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}return!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=o.trim(a),a&&(1===a.indexOf("use strict")?(b=m.createElement("script"),b.text=a,m.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=s(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":k.call(a)},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?o.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:g.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=s(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(c=a[b],b=a,a=c),o.isFunction(a)?(e=d.call(arguments,2),f=function(){return a.apply(b||this,e.concat(d.call(arguments)))},f.guid=a.guid=a.guid||o.guid++,f):void 0},now:Date.now,support:l}),o.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function s(a){var b=a.length,c=o.type(a);return"function"===c||o.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s="sizzle"+-new Date,t=a.document,u=0,v=0,w=eb(),x=eb(),y=eb(),z=function(a,b){return a===b&&(j=!0),0},A="undefined",B=1<<31,C={}.hasOwnProperty,D=[],E=D.pop,F=D.push,G=D.push,H=D.slice,I=D.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",K="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",M=L.replace("w","w#"),N="\\["+K+"*("+L+")"+K+"*(?:([*^$|!~]?=)"+K+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+M+")|)|)"+K+"*\\]",O=":("+L+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+N.replace(3,8)+")*)|.*)\\)|)",P=new RegExp("^"+K+"+|((?:^|[^\\\\])(?:\\\\.)*)"+K+"+$","g"),Q=new RegExp("^"+K+"*,"+K+"*"),R=new RegExp("^"+K+"*([>+~]|"+K+")"+K+"*"),S=new RegExp("="+K+"*([^\\]'\"]*?)"+K+"*\\]","g"),T=new RegExp(O),U=new RegExp("^"+M+"$"),V={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L.replace("w","w*")+")"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+K+"*(even|odd|(([+-]|)(\\d*)n|)"+K+"*(?:([+-]|)"+K+"*(\\d+)|))"+K+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+K+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+K+"*((?:-\\d)?\\d*)"+K+"*\\)|)(?=[^-]|$)","i")},W=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$=/[+~]/,_=/'|\\/g,ab=new RegExp("\\\\([\\da-f]{1,6}"+K+"?|("+K+")|.)","ig"),bb=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{G.apply(D=H.call(t.childNodes),t.childNodes),D[t.childNodes.length].nodeType}catch(cb){G={apply:D.length?function(a,b){F.apply(a,H.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function db(a,b,d,e){var f,g,h,i,j,m,p,q,u,v;if((b?b.ownerDocument||b:t)!==l&&k(b),b=b||l,d=d||[],!a||"string"!=typeof a)return d;if(1!==(i=b.nodeType)&&9!==i)return[];if(n&&!e){if(f=Z.exec(a))if(h=f[1]){if(9===i){if(g=b.getElementById(h),!g||!g.parentNode)return d;if(g.id===h)return d.push(g),d}else if(b.ownerDocument&&(g=b.ownerDocument.getElementById(h))&&r(b,g)&&g.id===h)return d.push(g),d}else{if(f[2])return G.apply(d,b.getElementsByTagName(a)),d;if((h=f[3])&&c.getElementsByClassName&&b.getElementsByClassName)return G.apply(d,b.getElementsByClassName(h)),d}if(c.qsa&&(!o||!o.test(a))){if(q=p=s,u=b,v=9===i&&a,1===i&&"object"!==b.nodeName.toLowerCase()){m=ob(a),(p=b.getAttribute("id"))?q=p.replace(_,"\\$&"):b.setAttribute("id",q),q="[id='"+q+"'] ",j=m.length;while(j--)m[j]=q+pb(m[j]);u=$.test(a)&&mb(b.parentNode)||b,v=m.join(",")}if(v)try{return G.apply(d,u.querySelectorAll(v)),d}catch(w){}finally{p||b.removeAttribute("id")}}}return xb(a.replace(P,"$1"),b,d,e)}function eb(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function fb(a){return a[s]=!0,a}function gb(a){var b=l.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function hb(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function ib(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||B)-(~a.sourceIndex||B);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function jb(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function kb(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function lb(a){return fb(function(b){return b=+b,fb(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function mb(a){return a&&typeof a.getElementsByTagName!==A&&a}c=db.support={},f=db.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},k=db.setDocument=function(a){var b,e=a?a.ownerDocument||a:t,g=e.defaultView;return e!==l&&9===e.nodeType&&e.documentElement?(l=e,m=e.documentElement,n=!f(e),g&&g!==g.top&&(g.addEventListener?g.addEventListener("unload",function(){k()},!1):g.attachEvent&&g.attachEvent("onunload",function(){k()})),c.attributes=gb(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=gb(function(a){return a.appendChild(e.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Y.test(e.getElementsByClassName)&&gb(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),c.getById=gb(function(a){return m.appendChild(a).id=s,!e.getElementsByName||!e.getElementsByName(s).length}),c.getById?(d.find.ID=function(a,b){if(typeof b.getElementById!==A&&n){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ab,bb);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ab,bb);return function(a){var c=typeof a.getAttributeNode!==A&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==A?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==A&&n?b.getElementsByClassName(a):void 0},p=[],o=[],(c.qsa=Y.test(e.querySelectorAll))&&(gb(function(a){a.innerHTML="<select t=''><option selected=''></option></select>",a.querySelectorAll("[t^='']").length&&o.push("[*^$]="+K+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||o.push("\\["+K+"*(?:value|"+J+")"),a.querySelectorAll(":checked").length||o.push(":checked")}),gb(function(a){var b=e.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&o.push("name"+K+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||o.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),o.push(",.*:")})),(c.matchesSelector=Y.test(q=m.webkitMatchesSelector||m.mozMatchesSelector||m.oMatchesSelector||m.msMatchesSelector))&&gb(function(a){c.disconnectedMatch=q.call(a,"div"),q.call(a,"[s!='']:x"),p.push("!=",O)}),o=o.length&&new RegExp(o.join("|")),p=p.length&&new RegExp(p.join("|")),b=Y.test(m.compareDocumentPosition),r=b||Y.test(m.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},z=b?function(a,b){if(a===b)return j=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===e||a.ownerDocument===t&&r(t,a)?-1:b===e||b.ownerDocument===t&&r(t,b)?1:i?I.call(i,a)-I.call(i,b):0:4&d?-1:1)}:function(a,b){if(a===b)return j=!0,0;var c,d=0,f=a.parentNode,g=b.parentNode,h=[a],k=[b];if(!f||!g)return a===e?-1:b===e?1:f?-1:g?1:i?I.call(i,a)-I.call(i,b):0;if(f===g)return ib(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)k.unshift(c);while(h[d]===k[d])d++;return d?ib(h[d],k[d]):h[d]===t?-1:k[d]===t?1:0},e):l},db.matches=function(a,b){return db(a,null,null,b)},db.matchesSelector=function(a,b){if((a.ownerDocument||a)!==l&&k(a),b=b.replace(S,"='$1']"),!(!c.matchesSelector||!n||p&&p.test(b)||o&&o.test(b)))try{var d=q.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return db(b,l,null,[a]).length>0},db.contains=function(a,b){return(a.ownerDocument||a)!==l&&k(a),r(a,b)},db.attr=function(a,b){(a.ownerDocument||a)!==l&&k(a);var e=d.attrHandle[b.toLowerCase()],f=e&&C.call(d.attrHandle,b.toLowerCase())?e(a,b,!n):void 0;return void 0!==f?f:c.attributes||!n?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},db.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},db.uniqueSort=function(a){var b,d=[],e=0,f=0;if(j=!c.detectDuplicates,i=!c.sortStable&&a.slice(0),a.sort(z),j){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return i=null,a},e=db.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=db.selectors={cacheLength:50,createPseudo:fb,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ab,bb),a[3]=(a[4]||a[5]||"").replace(ab,bb),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||db.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&db.error(a[0]),a},PSEUDO:function(a){var b,c=!a[5]&&a[2];return V.CHILD.test(a[0])?null:(a[3]&&void 0!==a[4]?a[2]=a[4]:c&&T.test(c)&&(b=ob(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ab,bb).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=w[a+" "];return b||(b=new RegExp("(^|"+K+")"+a+"("+K+"|$)"))&&w(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==A&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=db.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),t=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&t){k=q[s]||(q[s]={}),j=k[a]||[],n=j[0]===u&&j[1],m=j[0]===u&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[u,n,m];break}}else if(t&&(j=(b[s]||(b[s]={}))[a])&&j[0]===u)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(t&&((l[s]||(l[s]={}))[a]=[u,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||db.error("unsupported pseudo: "+a);return e[s]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?fb(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=I.call(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:fb(function(a){var b=[],c=[],d=g(a.replace(P,"$1"));return d[s]?fb(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:fb(function(a){return function(b){return db(a,b).length>0}}),contains:fb(function(a){return function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:fb(function(a){return U.test(a||"")||db.error("unsupported lang: "+a),a=a.replace(ab,bb).toLowerCase(),function(b){var c;do if(c=n?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===m},focus:function(a){return a===l.activeElement&&(!l.hasFocus||l.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return X.test(a.nodeName)},input:function(a){return W.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:lb(function(){return[0]}),last:lb(function(a,b){return[b-1]}),eq:lb(function(a,b,c){return[0>c?c+b:c]}),even:lb(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:lb(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:lb(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:lb(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=jb(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=kb(b);function nb(){}nb.prototype=d.filters=d.pseudos,d.setFilters=new nb;function ob(a,b){var c,e,f,g,h,i,j,k=x[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=Q.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=R.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(P," ")}),h=h.slice(c.length));for(g in d.filter)!(e=V[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?db.error(a):x(a,i).slice(0)}function pb(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function qb(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=v++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[u,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[s]||(b[s]={}),(h=i[d])&&h[0]===u&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function rb(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function sb(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function tb(a,b,c,d,e,f){return d&&!d[s]&&(d=tb(d)),e&&!e[s]&&(e=tb(e,f)),fb(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||wb(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:sb(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=sb(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?I.call(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=sb(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):G.apply(g,r)})}function ub(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],i=g||d.relative[" "],j=g?1:0,k=qb(function(a){return a===b},i,!0),l=qb(function(a){return I.call(b,a)>-1},i,!0),m=[function(a,c,d){return!g&&(d||c!==h)||((b=c).nodeType?k(a,c,d):l(a,c,d))}];f>j;j++)if(c=d.relative[a[j].type])m=[qb(rb(m),c)];else{if(c=d.filter[a[j].type].apply(null,a[j].matches),c[s]){for(e=++j;f>e;e++)if(d.relative[a[e].type])break;return tb(j>1&&rb(m),j>1&&pb(a.slice(0,j-1).concat({value:" "===a[j-2].type?"*":""})).replace(P,"$1"),c,e>j&&ub(a.slice(j,e)),f>e&&ub(a=a.slice(e)),f>e&&pb(a))}m.push(c)}return rb(m)}function vb(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,i,j,k){var m,n,o,p=0,q="0",r=f&&[],s=[],t=h,v=f||e&&d.find.TAG("*",k),w=u+=null==t?1:Math.random()||.1,x=v.length;for(k&&(h=g!==l&&g);q!==x&&null!=(m=v[q]);q++){if(e&&m){n=0;while(o=a[n++])if(o(m,g,i)){j.push(m);break}k&&(u=w)}c&&((m=!o&&m)&&p--,f&&r.push(m))}if(p+=q,c&&q!==p){n=0;while(o=b[n++])o(r,s,g,i);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=E.call(j));s=sb(s)}G.apply(j,s),k&&!f&&s.length>0&&p+b.length>1&&db.uniqueSort(j)}return k&&(u=w,h=t),r};return c?fb(f):f}g=db.compile=function(a,b){var c,d=[],e=[],f=y[a+" "];if(!f){b||(b=ob(a)),c=b.length;while(c--)f=ub(b[c]),f[s]?d.push(f):e.push(f);f=y(a,vb(e,d))}return f};function wb(a,b,c){for(var d=0,e=b.length;e>d;d++)db(a,b[d],c);return c}function xb(a,b,e,f){var h,i,j,k,l,m=ob(a);if(!f&&1===m.length){if(i=m[0]=m[0].slice(0),i.length>2&&"ID"===(j=i[0]).type&&c.getById&&9===b.nodeType&&n&&d.relative[i[1].type]){if(b=(d.find.ID(j.matches[0].replace(ab,bb),b)||[])[0],!b)return e;a=a.slice(i.shift().value.length)}h=V.needsContext.test(a)?0:i.length;while(h--){if(j=i[h],d.relative[k=j.type])break;if((l=d.find[k])&&(f=l(j.matches[0].replace(ab,bb),$.test(i[0].type)&&mb(b.parentNode)||b))){if(i.splice(h,1),a=f.length&&pb(i),!a)return G.apply(e,f),e;break}}}return g(a,m)(f,b,!n,e,$.test(a)&&mb(b.parentNode)||b),e}return c.sortStable=s.split("").sort(z).join("")===s,c.detectDuplicates=!!j,k(),c.sortDetached=gb(function(a){return 1&a.compareDocumentPosition(l.createElement("div"))}),gb(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||hb("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&gb(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||hb("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),gb(function(a){return null==a.getAttribute("disabled")})||hb(J,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),db}(a);o.find=t,o.expr=t.selectors,o.expr[":"]=o.expr.pseudos,o.unique=t.uniqueSort,o.text=t.getText,o.isXMLDoc=t.isXML,o.contains=t.contains;var u=o.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function x(a,b,c){if(o.isFunction(b))return o.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return o.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(w.test(b))return o.filter(b,a,c);b=o.filter(b,a)}return o.grep(a,function(a){return g.call(b,a)>=0!==c})}o.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?o.find.matchesSelector(d,a)?[d]:[]:o.find.matches(a,o.grep(b,function(a){return 1===a.nodeType}))},o.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(o(a).filter(function(){for(b=0;c>b;b++)if(o.contains(e[b],this))return!0}));for(b=0;c>b;b++)o.find(a,e[b],d);return d=this.pushStack(c>1?o.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(x(this,a||[],!1))},not:function(a){return this.pushStack(x(this,a||[],!0))},is:function(a){return!!x(this,"string"==typeof a&&u.test(a)?o(a):a||[],!1).length}});var y,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=o.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||y).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof o?b[0]:b,o.merge(this,o.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:m,!0)),v.test(c[1])&&o.isPlainObject(b))for(c in b)o.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=m.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=m,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):o.isFunction(a)?"undefined"!=typeof y.ready?y.ready(a):a(o):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),o.makeArray(a,this))};A.prototype=o.fn,y=o(m);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};o.extend({dir:function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&o(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),o.fn.extend({has:function(a){var b=o(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(o.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=u.test(a)||"string"!=typeof a?o(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&o.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?o.unique(f):f)},index:function(a){return a?"string"==typeof a?g.call(o(a),this[0]):g.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(o.unique(o.merge(this.get(),o(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){while((a=a[b])&&1!==a.nodeType);return a}o.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return o.dir(a,"parentNode")},parentsUntil:function(a,b,c){return o.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return o.dir(a,"nextSibling")},prevAll:function(a){return o.dir(a,"previousSibling")},nextUntil:function(a,b,c){return o.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return o.dir(a,"previousSibling",c)},siblings:function(a){return o.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return o.sibling(a.firstChild)},contents:function(a){return a.contentDocument||o.merge([],a.childNodes)}},function(a,b){o.fn[a]=function(c,d){var e=o.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=o.filter(d,e)),this.length>1&&(C[a]||o.unique(e),B.test(a)&&e.reverse()),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return o.each(a.match(E)||[],function(a,c){b[c]=!0}),b}o.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):o.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(b=a.memory&&l,c=!0,g=e||0,e=0,f=h.length,d=!0;h&&f>g;g++)if(h[g].apply(l[0],l[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,h&&(i?i.length&&j(i.shift()):b?h=[]:k.disable())},k={add:function(){if(h){var c=h.length;!function g(b){o.each(b,function(b,c){var d=o.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&g(c)})}(arguments),d?f=h.length:b&&(e=c,j(b))}return this},remove:function(){return h&&o.each(arguments,function(a,b){var c;while((c=o.inArray(b,h,c))>-1)h.splice(c,1),d&&(f>=c&&f--,g>=c&&g--)}),this},has:function(a){return a?o.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],f=0,this},disable:function(){return h=i=b=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,b||k.disable(),this},locked:function(){return!i},fireWith:function(a,b){return!h||c&&!i||(b=b||[],b=[a,b.slice?b.slice():b],d?i.push(b):j(b)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!c}};return k},o.extend({Deferred:function(a){var b=[["resolve","done",o.Callbacks("once memory"),"resolved"],["reject","fail",o.Callbacks("once memory"),"rejected"],["notify","progress",o.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return o.Deferred(function(c){o.each(b,function(b,f){var g=o.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&o.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?o.extend(a,d):d}},e={};return d.pipe=d.then,o.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&o.isFunction(a.promise)?e:0,g=1===f?a:o.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&o.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;o.fn.ready=function(a){return o.ready.promise().done(a),this},o.extend({isReady:!1,readyWait:1,holdReady:function(a){a?o.readyWait++:o.ready(!0)},ready:function(a){(a===!0?--o.readyWait:o.isReady)||(o.isReady=!0,a!==!0&&--o.readyWait>0||(H.resolveWith(m,[o]),o.fn.trigger&&o(m).trigger("ready").off("ready")))}});function I(){m.removeEventListener("DOMContentLoaded",I,!1),a.removeEventListener("load",I,!1),o.ready()}o.ready.promise=function(b){return H||(H=o.Deferred(),"complete"===m.readyState?setTimeout(o.ready):(m.addEventListener("DOMContentLoaded",I,!1),a.addEventListener("load",I,!1))),H.promise(b)},o.ready.promise();var J=o.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===o.type(c)){e=!0;for(h in c)o.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,o.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(o(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};o.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function K(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=o.expando+Math.random()}K.uid=1,K.accepts=o.acceptData,K.prototype={key:function(a){if(!K.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=K.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,o.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(o.isEmptyObject(f))o.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,o.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{o.isArray(b)?d=b.concat(b.map(o.camelCase)):(e=o.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(E)||[])),c=d.length;while(c--)delete g[d[c]]}},hasData:function(a){return!o.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var L=new K,M=new K,N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;function P(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(O,"-$1").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?o.parseJSON(c):c}catch(e){}M.set(a,b,c)}else c=void 0;return c}o.extend({hasData:function(a){return M.hasData(a)||L.hasData(a)},data:function(a,b,c){return M.access(a,b,c)},removeData:function(a,b){M.remove(a,b)},_data:function(a,b,c){return L.access(a,b,c)},_removeData:function(a,b){L.remove(a,b)}}),o.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=M.get(f),1===f.nodeType&&!L.get(f,"hasDataAttrs"))){c=g.length;
while(c--)d=g[c].name,0===d.indexOf("data-")&&(d=o.camelCase(d.slice(5)),P(f,d,e[d]));L.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){M.set(this,a)}):J(this,function(b){var c,d=o.camelCase(a);if(f&&void 0===b){if(c=M.get(f,a),void 0!==c)return c;if(c=M.get(f,d),void 0!==c)return c;if(c=P(f,d,void 0),void 0!==c)return c}else this.each(function(){var c=M.get(this,d);M.set(this,d,b),-1!==a.indexOf("-")&&void 0!==c&&M.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){M.remove(this,a)})}}),o.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=L.get(a,b),c&&(!d||o.isArray(c)?d=L.access(a,b,o.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=o.queue(a,b),d=c.length,e=c.shift(),f=o._queueHooks(a,b),g=function(){o.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return L.get(a,c)||L.access(a,c,{empty:o.Callbacks("once memory").add(function(){L.remove(a,[b+"queue",c])})})}}),o.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?o.queue(this[0],a):void 0===b?this:this.each(function(){var c=o.queue(this,a,b);o._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&o.dequeue(this,a)})},dequeue:function(a){return this.each(function(){o.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=o.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=L.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,R=["Top","Right","Bottom","Left"],S=function(a,b){return a=b||a,"none"===o.css(a,"display")||!o.contains(a.ownerDocument,a)},T=/^(?:checkbox|radio)$/i;!function(){var a=m.createDocumentFragment(),b=a.appendChild(m.createElement("div"));b.innerHTML="<input type='radio' checked='checked' name='t'/>",l.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",l.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var U="undefined";l.focusinBubbles="onfocusin"in a;var V=/^key/,W=/^(?:mouse|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;function Z(){return!0}function $(){return!1}function _(){try{return m.activeElement}catch(a){}}o.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,p,q,r=L.get(a);if(r){c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=o.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=function(b){return typeof o!==U&&o.event.triggered!==b.type?o.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(E)||[""],j=b.length;while(j--)h=Y.exec(b[j])||[],n=q=h[1],p=(h[2]||"").split(".").sort(),n&&(l=o.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=o.event.special[n]||{},k=o.extend({type:n,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&o.expr.match.needsContext.test(e),namespace:p.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,p,g)!==!1||a.addEventListener&&a.addEventListener(n,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),o.event.global[n]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,p,q,r=L.hasData(a)&&L.get(a);if(r&&(i=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=Y.exec(b[j])||[],n=q=h[1],p=(h[2]||"").split(".").sort(),n){l=o.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||o.removeEvent(a,n,r.handle),delete i[n])}else for(n in i)o.event.remove(a,n+b[j],c,d,!0);o.isEmptyObject(i)&&(delete r.handle,L.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,l,n,p=[d||m],q=j.call(b,"type")?b.type:b,r=j.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||m,3!==d.nodeType&&8!==d.nodeType&&!X.test(q+o.event.triggered)&&(q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort()),k=q.indexOf(":")<0&&"on"+q,b=b[o.expando]?b:new o.Event(q,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=r.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:o.makeArray(c,[b]),n=o.event.special[q]||{},e||!n.trigger||n.trigger.apply(d,c)!==!1)){if(!e&&!n.noBubble&&!o.isWindow(d)){for(i=n.delegateType||q,X.test(i+q)||(g=g.parentNode);g;g=g.parentNode)p.push(g),h=g;h===(d.ownerDocument||m)&&p.push(h.defaultView||h.parentWindow||a)}f=0;while((g=p[f++])&&!b.isPropagationStopped())b.type=f>1?i:n.bindType||q,l=(L.get(g,"events")||{})[b.type]&&L.get(g,"handle"),l&&l.apply(g,c),l=k&&g[k],l&&l.apply&&o.acceptData(g)&&(b.result=l.apply(g,c),b.result===!1&&b.preventDefault());return b.type=q,e||b.isDefaultPrevented()||n._default&&n._default.apply(p.pop(),c)!==!1||!o.acceptData(d)||k&&o.isFunction(d[q])&&!o.isWindow(d)&&(h=d[k],h&&(d[k]=null),o.event.triggered=q,d[q](),o.event.triggered=void 0,h&&(d[k]=h)),b.result}},dispatch:function(a){a=o.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(L.get(this,"events")||{})[a.type]||[],k=o.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=o.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(g.namespace))&&(a.handleObj=g,a.data=g.data,e=((o.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(a.result=e)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==a.type){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?o(e,this).index(i)>=0:o.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||m,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[o.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=W.test(e)?this.mouseHooks:V.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new o.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=m),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&o.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return o.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=o.extend(new o.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?o.event.trigger(e,null,b):o.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},o.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},o.Event=function(a,b){return this instanceof o.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.getPreventDefault&&a.getPreventDefault()?Z:$):this.type=a,b&&o.extend(this,b),this.timeStamp=a&&a.timeStamp||o.now(),void(this[o.expando]=!0)):new o.Event(a,b)},o.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=Z,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=Z,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Z,this.stopPropagation()}},o.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){o.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!o.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),l.focusinBubbles||o.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){o.event.simulate(b,a.target,o.event.fix(a),!0)};o.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=L.access(d,b);e||d.addEventListener(a,c,!0),L.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=L.access(d,b)-1;e?L.access(d,b,e):(d.removeEventListener(a,c,!0),L.remove(d,b))}}}),o.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=$;else if(!d)return this;return 1===e&&(f=d,d=function(a){return o().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=o.guid++)),this.each(function(){o.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,o(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=$),this.each(function(){o.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){o.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?o.event.trigger(a,b,c,!0):void 0}});var ab=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bb=/<([\w:]+)/,cb=/<|&#?\w+;/,db=/<(?:script|style|link)/i,eb=/checked\s*(?:[^=]|=\s*.checked.)/i,fb=/^$|\/(?:java|ecma)script/i,gb=/^true\/(.*)/,hb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ib={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ib.optgroup=ib.option,ib.tbody=ib.tfoot=ib.colgroup=ib.caption=ib.thead,ib.th=ib.td;function jb(a,b){return o.nodeName(a,"table")&&o.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function kb(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function lb(a){var b=gb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function mb(a,b){for(var c=0,d=a.length;d>c;c++)L.set(a[c],"globalEval",!b||L.get(b[c],"globalEval"))}function nb(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(L.hasData(a)&&(f=L.access(a),g=L.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)o.event.add(b,e,j[e][c])}M.hasData(a)&&(h=M.access(a),i=o.extend({},h),M.set(b,i))}}function ob(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&o.nodeName(a,b)?o.merge([a],c):c}function pb(a,b){var c=b.nodeName.toLowerCase();"input"===c&&T.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}o.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=o.contains(a.ownerDocument,a);if(!(l.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||o.isXMLDoc(a)))for(g=ob(h),f=ob(a),d=0,e=f.length;e>d;d++)pb(f[d],g[d]);if(b)if(c)for(f=f||ob(a),g=g||ob(h),d=0,e=f.length;e>d;d++)nb(f[d],g[d]);else nb(a,h);return g=ob(h,"script"),g.length>0&&mb(g,!i&&ob(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,n=a.length;n>m;m++)if(e=a[m],e||0===e)if("object"===o.type(e))o.merge(l,e.nodeType?[e]:e);else if(cb.test(e)){f=f||k.appendChild(b.createElement("div")),g=(bb.exec(e)||["",""])[1].toLowerCase(),h=ib[g]||ib._default,f.innerHTML=h[1]+e.replace(ab,"<$1></$2>")+h[2],j=h[0];while(j--)f=f.lastChild;o.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}else l.push(b.createTextNode(e));k.textContent="",m=0;while(e=l[m++])if((!d||-1===o.inArray(e,d))&&(i=o.contains(e.ownerDocument,e),f=ob(k.appendChild(e),"script"),i&&mb(f),c)){j=0;while(e=f[j++])fb.test(e.type||"")&&c.push(e)}return k},cleanData:function(a){for(var b,c,d,e,f,g,h=o.event.special,i=0;void 0!==(c=a[i]);i++){if(o.acceptData(c)&&(f=c[L.expando],f&&(b=L.cache[f]))){if(d=Object.keys(b.events||{}),d.length)for(g=0;void 0!==(e=d[g]);g++)h[e]?o.event.remove(c,e):o.removeEvent(c,e,b.handle);L.cache[f]&&delete L.cache[f]}delete M.cache[c[M.expando]]}}}),o.fn.extend({text:function(a){return J(this,function(a){return void 0===a?o.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=jb(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=jb(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?o.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||o.cleanData(ob(c)),c.parentNode&&(b&&o.contains(c.ownerDocument,c)&&mb(ob(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(o.cleanData(ob(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return o.clone(this,a,b)})},html:function(a){return J(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!db.test(a)&&!ib[(bb.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(ab,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(o.cleanData(ob(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,o.cleanData(ob(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,k=this.length,m=this,n=k-1,p=a[0],q=o.isFunction(p);if(q||k>1&&"string"==typeof p&&!l.checkClone&&eb.test(p))return this.each(function(c){var d=m.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(k&&(c=o.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(f=o.map(ob(c,"script"),kb),g=f.length;k>j;j++)h=c,j!==n&&(h=o.clone(h,!0,!0),g&&o.merge(f,ob(h,"script"))),b.call(this[j],h,j);if(g)for(i=f[f.length-1].ownerDocument,o.map(f,lb),j=0;g>j;j++)h=f[j],fb.test(h.type||"")&&!L.access(h,"globalEval")&&o.contains(i,h)&&(h.src?o._evalUrl&&o._evalUrl(h.src):o.globalEval(h.textContent.replace(hb,"")))}return this}}),o.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){o.fn[a]=function(a){for(var c,d=[],e=o(a),g=e.length-1,h=0;g>=h;h++)c=h===g?this:this.clone(!0),o(e[h])[b](c),f.apply(d,c.get());return this.pushStack(d)}});var qb,rb={};function sb(b,c){var d=o(c.createElement(b)).appendTo(c.body),e=a.getDefaultComputedStyle?a.getDefaultComputedStyle(d[0]).display:o.css(d[0],"display");return d.detach(),e}function tb(a){var b=m,c=rb[a];return c||(c=sb(a,b),"none"!==c&&c||(qb=(qb||o("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=qb[0].contentDocument,b.write(),b.close(),c=sb(a,b),qb.detach()),rb[a]=c),c}var ub=/^margin/,vb=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),wb=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)};function xb(a,b,c){var d,e,f,g,h=a.style;return c=c||wb(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(""!==g||o.contains(a.ownerDocument,a)||(g=o.style(a,b)),vb.test(g)&&ub.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function yb(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",e=m.documentElement,f=m.createElement("div"),g=m.createElement("div");g.style.backgroundClip="content-box",g.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===g.style.backgroundClip,f.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",f.appendChild(g);function h(){g.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",e.appendChild(f);var d=a.getComputedStyle(g,null);b="1%"!==d.top,c="4px"===d.width,e.removeChild(f)}a.getComputedStyle&&o.extend(l,{pixelPosition:function(){return h(),b},boxSizingReliable:function(){return null==c&&h(),c},reliableMarginRight:function(){var b,c=g.appendChild(m.createElement("div"));return c.style.cssText=g.style.cssText=d,c.style.marginRight=c.style.width="0",g.style.width="1px",e.appendChild(f),b=!parseFloat(a.getComputedStyle(c,null).marginRight),e.removeChild(f),g.innerHTML="",b}})}(),o.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var zb=/^(none|table(?!-c[ea]).+)/,Ab=new RegExp("^("+Q+")(.*)$","i"),Bb=new RegExp("^([+-])=("+Q+")","i"),Cb={position:"absolute",visibility:"hidden",display:"block"},Db={letterSpacing:0,fontWeight:400},Eb=["Webkit","O","Moz","ms"];function Fb(a,b){if(b in a)return b;var c=b[0].toUpperCase()+b.slice(1),d=b,e=Eb.length;while(e--)if(b=Eb[e]+c,b in a)return b;return d}function Gb(a,b,c){var d=Ab.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Hb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=o.css(a,c+R[f],!0,e)),d?("content"===c&&(g-=o.css(a,"padding"+R[f],!0,e)),"margin"!==c&&(g-=o.css(a,"border"+R[f]+"Width",!0,e))):(g+=o.css(a,"padding"+R[f],!0,e),"padding"!==c&&(g+=o.css(a,"border"+R[f]+"Width",!0,e)));return g}function Ib(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=wb(a),g="border-box"===o.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=xb(a,b,f),(0>e||null==e)&&(e=a.style[b]),vb.test(e))return e;d=g&&(l.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Hb(a,b,c||(g?"border":"content"),d,f)+"px"}function Jb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=L.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&S(d)&&(f[g]=L.access(d,"olddisplay",tb(d.nodeName)))):f[g]||(e=S(d),(c&&"none"!==c||!e)&&L.set(d,"olddisplay",e?c:o.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}o.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=xb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=o.camelCase(b),i=a.style;return b=o.cssProps[h]||(o.cssProps[h]=Fb(i,h)),g=o.cssHooks[b]||o.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Bb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(o.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||o.cssNumber[h]||(c+="px"),l.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]="",i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=o.camelCase(b);return b=o.cssProps[h]||(o.cssProps[h]=Fb(a.style,h)),g=o.cssHooks[b]||o.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=xb(a,b,d)),"normal"===e&&b in Db&&(e=Db[b]),""===c||c?(f=parseFloat(e),c===!0||o.isNumeric(f)?f||0:e):e}}),o.each(["height","width"],function(a,b){o.cssHooks[b]={get:function(a,c,d){return c?0===a.offsetWidth&&zb.test(o.css(a,"display"))?o.swap(a,Cb,function(){return Ib(a,b,d)}):Ib(a,b,d):void 0},set:function(a,c,d){var e=d&&wb(a);return Gb(a,c,d?Hb(a,b,d,"border-box"===o.css(a,"boxSizing",!1,e),e):0)}}}),o.cssHooks.marginRight=yb(l.reliableMarginRight,function(a,b){return b?o.swap(a,{display:"inline-block"},xb,[a,"marginRight"]):void 0}),o.each({margin:"",padding:"",border:"Width"},function(a,b){o.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+R[d]+b]=f[d]||f[d-2]||f[0];return e}},ub.test(a)||(o.cssHooks[a+b].set=Gb)}),o.fn.extend({css:function(a,b){return J(this,function(a,b,c){var d,e,f={},g=0;if(o.isArray(b)){for(d=wb(a),e=b.length;e>g;g++)f[b[g]]=o.css(a,b[g],!1,d);return f}return void 0!==c?o.style(a,b,c):o.css(a,b)},a,b,arguments.length>1)},show:function(){return Jb(this,!0)},hide:function(){return Jb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){S(this)?o(this).show():o(this).hide()})}});function Kb(a,b,c,d,e){return new Kb.prototype.init(a,b,c,d,e)}o.Tween=Kb,Kb.prototype={constructor:Kb,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(o.cssNumber[c]?"":"px")},cur:function(){var a=Kb.propHooks[this.prop];return a&&a.get?a.get(this):Kb.propHooks._default.get(this)},run:function(a){var b,c=Kb.propHooks[this.prop];return this.pos=b=this.options.duration?o.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Kb.propHooks._default.set(this),this}},Kb.prototype.init.prototype=Kb.prototype,Kb.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=o.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){o.fx.step[a.prop]?o.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[o.cssProps[a.prop]]||o.cssHooks[a.prop])?o.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Kb.propHooks.scrollTop=Kb.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},o.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},o.fx=Kb.prototype.init,o.fx.step={};var Lb,Mb,Nb=/^(?:toggle|show|hide)$/,Ob=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),Pb=/queueHooks$/,Qb=[Vb],Rb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=Ob.exec(b),f=e&&e[3]||(o.cssNumber[a]?"":"px"),g=(o.cssNumber[a]||"px"!==f&&+d)&&Ob.exec(o.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,o.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function Sb(){return setTimeout(function(){Lb=void 0}),Lb=o.now()}function Tb(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=R[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function Ub(a,b,c){for(var d,e=(Rb[b]||[]).concat(Rb["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Vb(a,b,c){var d,e,f,g,h,i,j,k=this,l={},m=a.style,n=a.nodeType&&S(a),p=L.get(a,"fxshow");c.queue||(h=o._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,k.always(function(){k.always(function(){h.unqueued--,o.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[m.overflow,m.overflowX,m.overflowY],j=o.css(a,"display"),"none"===j&&(j=tb(a.nodeName)),"inline"===j&&"none"===o.css(a,"float")&&(m.display="inline-block")),c.overflow&&(m.overflow="hidden",k.always(function(){m.overflow=c.overflow[0],m.overflowX=c.overflow[1],m.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Nb.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(n?"hide":"show")){if("show"!==e||!p||void 0===p[d])continue;n=!0}l[d]=p&&p[d]||o.style(a,d)}if(!o.isEmptyObject(l)){p?"hidden"in p&&(n=p.hidden):p=L.access(a,"fxshow",{}),f&&(p.hidden=!n),n?o(a).show():k.done(function(){o(a).hide()}),k.done(function(){var b;L.remove(a,"fxshow");for(b in l)o.style(a,b,l[b])});for(d in l)g=Ub(n?p[d]:0,d,k),d in p||(p[d]=g.start,n&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function Wb(a,b){var c,d,e,f,g;for(c in a)if(d=o.camelCase(c),e=b[d],f=a[c],o.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=o.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function Xb(a,b,c){var d,e,f=0,g=Qb.length,h=o.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Lb||Sb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:o.extend({},b),opts:o.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Lb||Sb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=o.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(Wb(k,j.opts.specialEasing);g>f;f++)if(d=Qb[f].call(j,a,k,j.opts))return d;return o.map(k,Ub,j),o.isFunction(j.opts.start)&&j.opts.start.call(a,j),o.fx.timer(o.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}o.Animation=o.extend(Xb,{tweener:function(a,b){o.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],Rb[c]=Rb[c]||[],Rb[c].unshift(b)},prefilter:function(a,b){b?Qb.unshift(a):Qb.push(a)}}),o.speed=function(a,b,c){var d=a&&"object"==typeof a?o.extend({},a):{complete:c||!c&&b||o.isFunction(a)&&a,duration:a,easing:c&&b||b&&!o.isFunction(b)&&b};return d.duration=o.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in o.fx.speeds?o.fx.speeds[d.duration]:o.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){o.isFunction(d.old)&&d.old.call(this),d.queue&&o.dequeue(this,d.queue)},d},o.fn.extend({fadeTo:function(a,b,c,d){return this.filter(S).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=o.isEmptyObject(a),f=o.speed(b,c,d),g=function(){var b=Xb(this,o.extend({},a),f);(e||L.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=o.timers,g=L.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Pb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&o.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=L.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=o.timers,g=d?d.length:0;for(c.finish=!0,o.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),o.each(["toggle","show","hide"],function(a,b){var c=o.fn[b];o.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Tb(b,!0),a,d,e)}}),o.each({slideDown:Tb("show"),slideUp:Tb("hide"),slideToggle:Tb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){o.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),o.timers=[],o.fx.tick=function(){var a,b=0,c=o.timers;for(Lb=o.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||o.fx.stop(),Lb=void 0},o.fx.timer=function(a){o.timers.push(a),a()?o.fx.start():o.timers.pop()},o.fx.interval=13,o.fx.start=function(){Mb||(Mb=setInterval(o.fx.tick,o.fx.interval))},o.fx.stop=function(){clearInterval(Mb),Mb=null},o.fx.speeds={slow:600,fast:200,_default:400},o.fn.delay=function(a,b){return a=o.fx?o.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=m.createElement("input"),b=m.createElement("select"),c=b.appendChild(m.createElement("option"));a.type="checkbox",l.checkOn=""!==a.value,l.optSelected=c.selected,b.disabled=!0,l.optDisabled=!c.disabled,a=m.createElement("input"),a.value="t",a.type="radio",l.radioValue="t"===a.value}();var Yb,Zb,$b=o.expr.attrHandle;o.fn.extend({attr:function(a,b){return J(this,o.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){o.removeAttr(this,a)})}}),o.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===U?o.prop(a,b,c):(1===f&&o.isXMLDoc(a)||(b=b.toLowerCase(),d=o.attrHooks[b]||(o.expr.match.bool.test(b)?Zb:Yb)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=o.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void o.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=o.propFix[c]||c,o.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!l.radioValue&&"radio"===b&&o.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),Zb={set:function(a,b,c){return b===!1?o.removeAttr(a,c):a.setAttribute(c,c),c}},o.each(o.expr.match.bool.source.match(/\w+/g),function(a,b){var c=$b[b]||o.find.attr;$b[b]=function(a,b,d){var e,f;
return d||(f=$b[b],$b[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,$b[b]=f),e}});var _b=/^(?:input|select|textarea|button)$/i;o.fn.extend({prop:function(a,b){return J(this,o.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[o.propFix[a]||a]})}}),o.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!o.isXMLDoc(a),f&&(b=o.propFix[b]||b,e=o.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||_b.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),l.optSelected||(o.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),o.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){o.propFix[this.toLowerCase()]=this});var ac=/[\t\r\n\f]/g;o.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(o.isFunction(a))return this.each(function(b){o(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ac," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=o.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(o.isFunction(a))return this.each(function(b){o(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ac," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?o.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(o.isFunction(a)?function(c){o(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=o(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===U||"boolean"===c)&&(this.className&&L.set(this,"__className__",this.className),this.className=this.className||a===!1?"":L.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ac," ").indexOf(b)>=0)return!0;return!1}});var bc=/\r/g;o.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=o.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,o(this).val()):a,null==e?e="":"number"==typeof e?e+="":o.isArray(e)&&(e=o.map(e,function(a){return null==a?"":a+""})),b=o.valHooks[this.type]||o.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=o.valHooks[e.type]||o.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(bc,""):null==c?"":c)}}}),o.extend({valHooks:{select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(l.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&o.nodeName(c.parentNode,"optgroup"))){if(b=o(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=o.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=o.inArray(o(d).val(),f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),o.each(["radio","checkbox"],function(){o.valHooks[this]={set:function(a,b){return o.isArray(b)?a.checked=o.inArray(o(a).val(),b)>=0:void 0}},l.checkOn||(o.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),o.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){o.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),o.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var cc=o.now(),dc=/\?/;o.parseJSON=function(a){return JSON.parse(a+"")},o.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}return(!b||b.getElementsByTagName("parsererror").length)&&o.error("Invalid XML: "+a),b};var ec,fc,gc=/#.*$/,hc=/([?&])_=[^&]*/,ic=/^(.*?):[ \t]*([^\r\n]*)$/gm,jc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,kc=/^(?:GET|HEAD)$/,lc=/^\/\//,mc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,nc={},oc={},pc="*/".concat("*");try{fc=location.href}catch(qc){fc=m.createElement("a"),fc.href="",fc=fc.href}ec=mc.exec(fc.toLowerCase())||[];function rc(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(o.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function sc(a,b,c,d){var e={},f=a===oc;function g(h){var i;return e[h]=!0,o.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function tc(a,b){var c,d,e=o.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&o.extend(!0,a,d),a}function uc(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function vc(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}o.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:fc,type:"GET",isLocal:jc.test(ec[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":pc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":o.parseJSON,"text xml":o.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?tc(tc(a,o.ajaxSettings),b):tc(o.ajaxSettings,a)},ajaxPrefilter:rc(nc),ajaxTransport:rc(oc),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=o.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?o(l):o.event,n=o.Deferred(),p=o.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!f){f={};while(b=ic.exec(e))f[b[1].toLowerCase()]=b[2]}b=f[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?e:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return c&&c.abort(b),x(0,b),this}};if(n.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||fc)+"").replace(gc,"").replace(lc,ec[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=o.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(h=mc.exec(k.url.toLowerCase()),k.crossDomain=!(!h||h[1]===ec[1]&&h[2]===ec[2]&&(h[3]||("http:"===h[1]?"80":"443"))===(ec[3]||("http:"===ec[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=o.param(k.data,k.traditional)),sc(nc,k,b,v),2===t)return v;i=k.global,i&&0===o.active++&&o.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!kc.test(k.type),d=k.url,k.hasContent||(k.data&&(d=k.url+=(dc.test(d)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=hc.test(d)?d.replace(hc,"$1_="+cc++):d+(dc.test(d)?"&":"?")+"_="+cc++)),k.ifModified&&(o.lastModified[d]&&v.setRequestHeader("If-Modified-Since",o.lastModified[d]),o.etag[d]&&v.setRequestHeader("If-None-Match",o.etag[d])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+pc+"; q=0.01":""):k.accepts["*"]);for(j in k.headers)v.setRequestHeader(j,k.headers[j]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(j in{success:1,error:1,complete:1})v[j](k[j]);if(c=sc(oc,k,b,v)){v.readyState=1,i&&m.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,c.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,f,h){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),c=void 0,e=h||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,f&&(u=uc(k,v,f)),u=vc(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(o.lastModified[d]=w),w=v.getResponseHeader("etag"),w&&(o.etag[d]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?n.resolveWith(l,[r,x,v]):n.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,i&&m.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),i&&(m.trigger("ajaxComplete",[v,k]),--o.active||o.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return o.get(a,b,c,"json")},getScript:function(a,b){return o.get(a,void 0,b,"script")}}),o.each(["get","post"],function(a,b){o[b]=function(a,c,d,e){return o.isFunction(c)&&(e=e||d,d=c,c=void 0),o.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),o.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){o.fn[b]=function(a){return this.on(b,a)}}),o._evalUrl=function(a){return o.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},o.fn.extend({wrapAll:function(a){var b;return o.isFunction(a)?this.each(function(b){o(this).wrapAll(a.call(this,b))}):(this[0]&&(b=o(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return this.each(o.isFunction(a)?function(b){o(this).wrapInner(a.call(this,b))}:function(){var b=o(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=o.isFunction(a);return this.each(function(c){o(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){o.nodeName(this,"body")||o(this).replaceWith(this.childNodes)}).end()}}),o.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},o.expr.filters.visible=function(a){return!o.expr.filters.hidden(a)};var wc=/%20/g,xc=/\[\]$/,yc=/\r?\n/g,zc=/^(?:submit|button|image|reset|file)$/i,Ac=/^(?:input|select|textarea|keygen)/i;function Bc(a,b,c,d){var e;if(o.isArray(b))o.each(b,function(b,e){c||xc.test(a)?d(a,e):Bc(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==o.type(b))d(a,b);else for(e in b)Bc(a+"["+e+"]",b[e],c,d)}o.param=function(a,b){var c,d=[],e=function(a,b){b=o.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=o.ajaxSettings&&o.ajaxSettings.traditional),o.isArray(a)||a.jquery&&!o.isPlainObject(a))o.each(a,function(){e(this.name,this.value)});else for(c in a)Bc(c,a[c],b,e);return d.join("&").replace(wc,"+")},o.fn.extend({serialize:function(){return o.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=o.prop(this,"elements");return a?o.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!o(this).is(":disabled")&&Ac.test(this.nodeName)&&!zc.test(a)&&(this.checked||!T.test(a))}).map(function(a,b){var c=o(this).val();return null==c?null:o.isArray(c)?o.map(c,function(a){return{name:b.name,value:a.replace(yc,"\r\n")}}):{name:b.name,value:c.replace(yc,"\r\n")}}).get()}}),o.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Cc=0,Dc={},Ec={0:200,1223:204},Fc=o.ajaxSettings.xhr();a.ActiveXObject&&o(a).on("unload",function(){for(var a in Dc)Dc[a]()}),l.cors=!!Fc&&"withCredentials"in Fc,l.ajax=Fc=!!Fc,o.ajaxTransport(function(a){var b;return l.cors||Fc&&!a.crossDomain?{send:function(c,d){var e,f=a.xhr(),g=++Cc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Dc[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Ec[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Dc[g]=b("abort"),f.send(a.hasContent&&a.data||null)},abort:function(){b&&b()}}:void 0}),o.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return o.globalEval(a),a}}}),o.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),o.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=o("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),m.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Gc=[],Hc=/(=)\?(?=&|$)|\?\?/;o.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Gc.pop()||o.expando+"_"+cc++;return this[a]=!0,a}}),o.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Hc.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Hc.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=o.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Hc,"$1"+e):b.jsonp!==!1&&(b.url+=(dc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||o.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Gc.push(e)),g&&o.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),o.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||m;var d=v.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=o.buildFragment([a],b,e),e&&e.length&&o(e).remove(),o.merge([],d.childNodes))};var Ic=o.fn.load;o.fn.load=function(a,b,c){if("string"!=typeof a&&Ic)return Ic.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=a.slice(h),a=a.slice(0,h)),o.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&o.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?o("<div>").append(o.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},o.expr.filters.animated=function(a){return o.grep(o.timers,function(b){return a===b.elem}).length};var Jc=a.document.documentElement;function Kc(a){return o.isWindow(a)?a:9===a.nodeType&&a.defaultView}o.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=o.css(a,"position"),l=o(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=o.css(a,"top"),i=o.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),o.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},o.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){o.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,o.contains(b,d)?(typeof d.getBoundingClientRect!==U&&(e=d.getBoundingClientRect()),c=Kc(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===o.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),o.nodeName(a[0],"html")||(d=a.offset()),d.top+=o.css(a[0],"borderTopWidth",!0),d.left+=o.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-o.css(c,"marginTop",!0),left:b.left-d.left-o.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||Jc;while(a&&!o.nodeName(a,"html")&&"static"===o.css(a,"position"))a=a.offsetParent;return a||Jc})}}),o.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;o.fn[b]=function(e){return J(this,function(b,e,f){var g=Kc(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),o.each(["top","left"],function(a,b){o.cssHooks[b]=yb(l.pixelPosition,function(a,c){return c?(c=xb(a,b),vb.test(c)?o(a).position()[b]+"px":c):void 0})}),o.each({Height:"height",Width:"width"},function(a,b){o.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){o.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return J(this,function(b,c,d){var e;return o.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?o.css(b,c,g):o.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),o.fn.size=function(){return this.length},o.fn.andSelf=o.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return o});var Lc=a.jQuery,Mc=a.$;return o.noConflict=function(b){return a.$===o&&(a.$=Mc),b&&a.jQuery===o&&(a.jQuery=Lc),o},typeof b===U&&(a.jQuery=a.$=o),o});
</script>
<script type="text/javascript">
/*! jQuery throttle / debounce - v1.1 - 3/7/2010 [http://benalman.com/projects/jquery-throttle-debounce-plugin/] | (c) 2010 "Cowboy" Ben Alman | Dual licensed under the MIT and GPL licenses. [http://benalman.com/about/license/] */
(function(b,c){var $=b.jQuery||b.Cowboy||(b.Cowboy={}),a;$.throttle=a=function(e,f,j,i){var h,d=0;if(typeof f!=="boolean"){i=j;j=f;f=c}function g(){var o=this,m=+new Date()-d,n=arguments;function l(){d=+new Date();j.apply(o,n)}function k(){h=c}if(i&&!h){l()}h&&clearTimeout(h);if(i===c&&m>e){l()}else{if(f!==true){h=setTimeout(i?k:l,i===c?e-m:e)}}}if($.guid){g.guid=j.guid=j.guid||$.guid++}return g};$.debounce=function(d,e,f){return f===c?a(d,e,false):a(d,f,e!==false)}})(this);
</script>
<script type="text/javascript">
/*! seedrandom.js v2.3.3 | (c) 2013 David Bau | Licensed under a BSD-style license */
!function(a,b,c,d,e,f,g,h,i){function j(a){var b,c=a.length,e=this,f=0,g=e.i=e.j=0,h=e.S=[];for(c||(a=[c++]);d>f;)h[f]=f++;for(f=0;d>f;f++)h[f]=h[g=r&g+a[f%c]+(b=h[f])],h[g]=b;(e.g=function(a){for(var b,c=0,f=e.i,g=e.j,h=e.S;a--;)b=h[f=r&f+1],c=c*d+h[r&(h[f]=h[g=r&g+b])+(h[g]=b)];return e.i=f,e.j=g,c})(d)}function k(a,b){var c,d=[],e=typeof a;if(b&&"object"==e)for(c in a)try{d.push(k(a[c],b-1))}catch(f){}return d.length?d:"string"==e?a:a+"\0"}function l(a,b){for(var c,d=a+"",e=0;e<d.length;)b[r&e]=r&(c^=19*b[r&e])+d.charCodeAt(e++);return n(b)}function m(c){try{return a.crypto.getRandomValues(c=new Uint8Array(d)),n(c)}catch(e){return[+new Date,a,(c=a.navigator)&&c.plugins,a.screen,n(b)]}}function n(a){return String.fromCharCode.apply(0,a)}var o=c.pow(d,e),p=c.pow(2,f),q=2*p,r=d-1,s=c["seed"+i]=function(a,f,g){var h=[],r=l(k(f?[a,n(b)]:null==a?m():a,3),h),s=new j(h);return l(n(s.S),b),(g||function(a,b,d){return d?(c[i]=a,b):a})(function(){for(var a=s.g(e),b=o,c=0;p>a;)a=(a+c)*d,b*=d,c=s.g(1);for(;a>=q;)a/=2,b/=2,c>>>=1;return(a+c)/b},r,this==c)};l(c[i](),b),g&&g.exports?g.exports=s:h&&h.amd&&h(function(){return s})}(this,[],Math,256,6,52,"object"==typeof module&&module,"function"==typeof define&&define,"random");
</script>
<script type="text/javascript">
/*
Portions of this code are based on:
____

TiddlyWiki 1.2.39 by Jeremy Ruston, (jeremy [at] osmosoft [dot] com)

Published under a BSD open source license

Copyright (c) Osmosoft Limited 2005

Redistribution and use in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:

Redistributions of source code must retain the above copyright notice, this list
of conditions and the following disclaimer.

Redistributions in binary form must reproduce the above copyright notice, this
list of conditions and the following disclaimer in the documentation and/or
other materials provided with the distribution.

Neither the name of the Osmosoft Limited nor the names of its contributors may
be used to endorse or promote products derived from this software without
specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
(function(){
"use strict";
(function(a){function b(a){this.message=a}a="undefined"!=typeof exports?exports:a;b.prototype=Error();b.prototype.name="InvalidCharacterError";a.btoa||(a.btoa=function(a){for(var d,e,f=0,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h="";a.charAt(0|f)||(g="=",f%1);h+=g.charAt(63&d>>8-8*(f%1))){if(e=a.charCodeAt(f+=0.75),255<e)throw new b("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");d=d<<8|e}return h});a.atob||(a.atob=function(a){if(a=a.replace(/=+$/,""),1==a.length%4)throw new b("'atob' failed: The string to be decoded is not correctly encoded.");for(var d,e,f=0,g=0,h="";e=a.charAt(g++);~e&&(d=f%4?64*d+e:e,f++%4)?h+=String.fromCharCode(255&d>>(6&-2*f)):0)e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e);return h})})(window);"document"in self&&!("classList"in document.createElement("_"))&&function(a){if("Element"in a){a=a.Element.prototype;var b=Object,c=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},d=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},e=function(a,b){this.name=a;this.code=DOMException[a];this.message=b},f=function(a,b){if(""===b)throw new e("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(b))throw new e("INVALID_CHARACTER_ERR","String contains an invalid character");return d.call(a,b)},g=function(a){for(var b=c.call(a.getAttribute("class")||""),b=b?b.split(/\s+/):[],d=0,e=b.length;d<e;d++)this.push(b[d]);this._updateClassName=function(){a.setAttribute("class",this.toString())}},h=g.prototype=[],k=function(){return new g(this)};e.prototype=Error.prototype;h.item=function(a){return this[a]||null};h.contains=function(a){return-1!==f(this,a+"")};h.add=function(){var a=arguments,b=0,c=a.length,d,e=!1;do d=a[b]+"",-1===f(this,d)&&(this.push(d),e=!0);while(++b<c);e&&this._updateClassName()};h.remove=function(){var a=arguments,b=0,c=a.length,d,e=!1;do d=a[b]+"",d=f(this,d),-1!==d&&(this.splice(d,1),e=!0);while(++b<c);e&&this._updateClassName()};h.toggle=function(a,b){a+="";var c=this.contains(a),d=c?!0!==b&&"remove":!1!==b&&"add";if(d)this[d](a);return!c};h.toString=function(){return this.join(" ")};if(b.defineProperty){h={get:k,enumerable:!0,configurable:!0};try{b.defineProperty(a,"classList",h)}catch(m){-2146823252===m.number&&(h.enumerable=!1,b.defineProperty(a,"classList",h))}}else b.prototype.__defineGetter__&&a.__defineGetter__("classList",k)}}(self);Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){if(null==this)throw new TypeError;b||(b=0);for(var c=b,d=this.length;c<d;c++)if(this[c]===a)return c;return-1});Array.prototype.filter||(Array.prototype.filter=function(a,b){if(null==this||"function"!==typeof a)throw new TypeError;for(var c=Object(this),d=c.length>>>0,e=[],f=0;f<d;f++)if(f in c){var g=c[f];a.call(b,g,f,c)&&e.push(g)}return e});Array.prototype.map||(Array.prototype.map=function(a,b){if(null==this||"function"!==typeof a)throw new TypeError;for(var c=Object(this),d=c.length>>>0,e=Array(d),f=0;f<d;f++)f in c&&(e[f]=a.call(b,c[f],f,c));return e});Array.prototype.some||(Array.prototype.some=function(a,b){if(null==this||"function"!==typeof a)throw new TypeError;for(var c=Object(this),d=c.length>>>0,e=0;e<d;e++)if(e in c&&a.call(b,c[e],e,c))return!0;return!1});Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});String.prototype.splice||(String.prototype.splice=function(a,b,c){if(null==this)throw new TypeError;if(0===this.length)return"";if("undefined"===typeof a)a=0;else if(a>=this.length)return this;"undefined"===typeof b?b=0:0>b&&(b=Math.abs(b));var d=this.slice(0,a);"undefined"!==typeof c&&(d+=c);if(0<=a||0>a+b)d+=this.slice(a+b);return d});String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});String.prototype.ltrim||(String.prototype.ltrim=function(){return this.replace(/^\s+/,"")});String.prototype.rtrim||(String.prototype.rtrim=function(){return this.replace(/\s+$/,"")});Object.create||(Object.create=function(){function a(){}return function(b){if(1!==arguments.length)throw Error("Object.create (polyfill) implementation only accepts one parameter.");a.prototype=b;return new a}}());var saveAs=saveAs||navigator.msSaveBlob&&navigator.msSaveBlob.bind(navigator)||function(a){var b=a.document,c=a.URL||a.webkitURL||a,d=b.createElementNS("http://www.w3.org/1999/xhtml","a"),e="download"in d,f=function(c){var d=b.createEvent("MouseEvents");d.initMouseEvent("click",!0,!1,a,0,0,0,0,0,!1,!1,!1,!1,0,null);c.dispatchEvent(d)},g=a.webkitRequestFileSystem,h=a.requestFileSystem||g||a.mozRequestFileSystem,k=function(b){(a.setImmediate||a.setTimeout)(function(){throw b;},0)},m=0,q=[],r=function(a,b,c){b=[].concat(b);for(var d=b.length;d--;){var e=a["on"+b[d]];if("function"===typeof e)try{e.call(a,c||a)}catch(f){k(f)}}},s=function(b,c){var k=this,n=b.type,s=!1,v,x,y=function(){var c=(a.URL||a.webkitURL||a).createObjectURL(b);q.push(c);return c},z=function(){r(k,["writestart","progress","write","writeend"])},u=function(){if(s||!v)v=y(b);x?x.location.href=v:window.open(v,"_blank");k.readyState=k.DONE;z()},w=function(a){return function(){if(k.readyState!==k.DONE)return a.apply(this,arguments)}},A={create:!0,exclusive:!1},B;k.readyState=k.INIT;c||(c="download");if(e)v=y(b),d.href=v,d.download=c,f(d),k.readyState=k.DONE,z();else{a.chrome&&(n&&"application/octet-stream"!==n)&&(B=b.slice||b.webkitSlice,b=B.call(b,0,b.size,"application/octet-stream"),s=!0);g&&"download"!==c&&(c+=".download");if("application/octet-stream"===n||g)x=a;h?(m+=b.size,h(a.TEMPORARY,m,w(function(a){a.root.getDirectory("saved",A,w(function(a){var d=function(){a.getFile(c,A,w(function(a){a.createWriter(w(function(c){c.onwriteend=function(b){x.location.href=a.toURL();q.push(a);k.readyState=k.DONE;r(k,"writeend",b)};c.onerror=function(){var a=c.error;a.code!==a.ABORT_ERR&&u()};["writestart","progress","write","abort"].forEach(function(a){c["on"+a]=k["on"+a]});c.write(b);k.abort=function(){c.abort();k.readyState=k.DONE};k.readyState=k.WRITING}),u)}),u)};a.getFile(c,{create:!1},w(function(a){a.remove();d()}),w(function(a){a.code===a.NOT_FOUND_ERR?d():u()}))}),u)}),u)):u()}},n=s.prototype;n.abort=function(){this.readyState=this.DONE;r(this,"abort")};n.readyState=n.INIT=0;n.WRITING=1;n.DONE=2;n.error=n.onwritestart=n.onprogress=n.onwrite=n.onabort=n.onerror=n.onwriteend=null;a.addEventListener("unload",function(){for(var a=q.length;a--;){var b=q[a];"string"===typeof b?c.revokeObjectURL(b):b.remove()}q.length=0},!1);return function(a,b){return new s(a,b)}}(self);Array.random=function(a,b,c){if(Array.isArray(a))return a.random(b,c);if(a.hasOwnProperty("length"))return Array.prototype.slice.call(a,0).random(b,c)};Array.prototype.random=function(a,b){null==a?a=0:0>a?a=0:a>=this.length&&(a=this.length-1);null==b?b=this.length-1:0>b?b=0:b>=this.length&&(b=this.length-1);return this[random(a,b)]};Math.clamp=function(a,b,c){a=Number(a);return isNaN(a)?NaN:a.clamp(b,c)};Number.prototype.clamp=function(a,b){var c=Number(this);c<a&&(c=a);c>b&&(c=b);return c};Math.easeInOut=function(a){return 1-(Math.cos(a*Math.PI)+1)/2};String.prototype.readBracketedList=function(){var a=/(?:\[\[((?:\s|\S)*?)\]\])|([^"'\s]\S*)/gm,b=[];do{var c=a.exec(this);c&&(c[1]?b.push(c[1]):c[2]&&b.push(c[2]))}while(c);return b};function clone(a,b){if(null===a||"object"!==typeof a)return a;if("function"===typeof a.clone)return a.clone(!0);if(a instanceof Date)return new Date(a.getTime());if(a instanceof RegExp)return RegExp(a);if(a.nodeType&&"function"===typeof a.cloneNode)return a.cloneNode(!0);var c;if(Array.isArray(a))if(c=[],b)for(var d=0;d<a.length;d++)c.push(clone(a[d],!0));else for(d=0;d<a.length;d++)c.push(a[d]);else if(c=Object.getPrototypeOf?Object.getPrototypeOf(a):a.__proto__,c||(c=a.constructor.prototype),c=Object.create(c),b)for(d in a)c[d]=clone(a[d],!0);else for(d in a)c[d]=a[d];return c}function deepCopy(a){return clone(a,!0)}function insertElement(a,b,c,d,e){b=document.createElement(b);c&&(b.id=c);d&&(b.className=d);e&&insertText(b,e);a&&a.appendChild(b);return b}function insertPassageLink(a,b,c,d){var e=document.createElement("a");"undefined"!==typeof b&&(e.setAttribute("data-passage",b),e.className=tale.has(b)?"link-internal":"link-broken");d&&(e.className+=" "+d);c&&insertText(e,c);a&&a.appendChild(e);return e}function insertText(a,b){return a.appendChild(document.createTextNode(b))}function removeChildren(a){if(a)for(;a.hasChildNodes();)a.removeChild(a.firstChild)}function setPageElement(a,b,c){if(a="object"===typeof a?a:document.getElementById(a)){removeChildren(a);Array.isArray(b)||(b=[b]);for(var d=0;d<b.length;d++)if(tale.has(b[d]))return new Wikifier(a,tale.get(b[d]).processText().trim()),a;null!=c&&""!==c&&new Wikifier(a,c)}return a}function addStyle(a){var b=document.createElement("style");b.type="text/css";var c=RegExp(formatter.byName.image.lookaheadRegExp.source,"gm"),d=RegExp(Wikifier.textPrimitives.imagePattern);c.test(a)&&(a=a.replace(c,function(a){var b=d.exec(a);return null!==b?(a=b[4],"data:"!==a.slice(0,5)&&tale.has(a)&&(b=tale.get(a),-1!==b.tags.indexOf("Twine.image")&&(a=b.text)),"url("+a+")"):a}));b.styleSheet?b.styleSheet.cssText=a:b.appendChild(document.createTextNode(a));document.head.appendChild(b)}function throwError(a,b){insertElement(a,"span",null,"error","Error: "+b);return!1}function fade(a,b){function c(a,b){var c=Math.floor(100*b);a.style.zoom=1;a.style.filter="alpha(opacity="+c+")";a.style.opacity=b}var d,e=a.cloneNode(!0),f="in"==b.fade?1:-1,g;a.parentNode.replaceChild(e,a);"in"==b.fade?(d=0,e.style.visibility="visible"):d=1;c(e,d);g=window.setInterval(function(){d+=0.05*f;c(e,Math.easeInOut(d));if(1==f&&1<=d||-1==f&&0>=d)if(a.style.visibility="in"==b.fade?"visible":"hidden",e.parentNode.replaceChild(a,e),e=null,window.clearInterval(g),b.onComplete)b.onComplete()},25)}function scrollWindowTo(a){var b=window.scrollY?window.scrollY:document.body.scrollTop;a=function(a){var b;b=a;for(var c=0;b.offsetParent;)c+=b.offsetTop,b=b.offsetParent;b=c;var c=b+a.offsetHeight,d=window.scrollY?window.scrollY:document.body.scrollTop,e=window.innerHeight?window.innerHeight:document.body.clientHeight;return b<d?b:c>d+e?a.offsetHeight<e?b-(e-a.offsetHeight)+20:b:b}(a);var c=Math.abs(b-a),d=0,e=b>a?-1:1,f=window.setInterval(function(){d+=0.1;window.scrollTo(0,b+e*c*Math.easeInOut(d));1<=d&&window.clearInterval(f)},25)}function getRandom(){return random.apply(null,arguments)}function random(a,b){if(0===arguments.length)throw Error("random(): insufficient arguments");1===arguments.length&&(b=a,a=0);if(a>b){var c=b;b=a;a=c}return Math.floor(Math.random()*(b-a+1))+a}function getRandomArbitrary(){return randomFloat.apply(null,arguments)}function randomFloat(a,b){if(0===arguments.length)throw Error("randomFloat(): insufficient arguments");1===arguments.length&&(b=a,a=0);if(a>b){var c=b;b=a;a=c}return Math.random()*(b-a)+a}function visited(a){0===arguments.length&&(a=state.active.title);for(var b=0,c=0;c<state.history.length;c++)state.history[c].title===a&&b++;return b}function visitedTags(){if(0===arguments.length)return 0;for(var a=0,b=0;b<state.history.length;b++){var c=tale.get(state.history[b].title).tags;if(0!==c.length){for(var d=0,e=0;e<arguments.length;e++)-1!==c.indexOf(arguments[e])&&d++;d===arguments.length&&a++}}return a}function tags(){if(0===arguments.length)return tale.get(state.active.title).tags.slice(0);for(var a=[],b=0;b<arguments.length;b++)a=a.concat(tale.get(arguments[b]).tags);return a}function either(){return Array.random(arguments)}function visitedTag(){return visitedTags.apply(null,arguments)}var Util={random:Math.random,isNumeric:function(a){return"number"===typeof a||!isNaN(parseFloat(a))&&isFinite(a)},isBoolean:function(a){return"boolean"===typeof a||"string"===typeof a&&("true"===a||"false"===a)},slugify:function(a){return a.trim().replace(/[^\w\s\u2013\u2014-]+/g,"").replace(/[_\s\u2013\u2014-]+/g,"-").toLocaleLowerCase()},utf8ToBase64:function(a){return window.btoa(unescape(encodeURIComponent(a)))},base64ToUtf8:function(a){return decodeURIComponent(escape(window.atob(a)))},generateUuid:function(){var a=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Util.random())%16|0;a=Math.floor(a/16);return("x"===b?c:c&7|8).toString(16)})}};function SeedablePRNG(a,b){return new Math.seedrandom(a,b,function(a,b){return{random:function(){this.count++;return this._prng()},_prng:a,seed:b,count:0}})}SeedablePRNG.marshal=function(a){if(!a||!a.hasOwnProperty("seed")||!a.hasOwnProperty("count"))throw Error("PRNG is missing required data.");return{seed:a.seed,count:a.count}};SeedablePRNG.unmarshal=function(a){if(!a||!a.hasOwnProperty("seed")||!a.hasOwnProperty("count"))throw Error("PRNG object is missing required data.");for(var b=new SeedablePRNG(a.seed,!1),c=0;c<a.count;c++)b.random();return b};function KeyValueStore(a,b){this.store=null;switch(a){case "cookie":this.name="cookie";break;case "localStorage":this.name=a;config.hasLocalStorage&&(this.store=window.localStorage);break;case "sessionStorage":this.name=a;config.hasSessionStorage&&(this.store=window.sessionStorage);break;default:throw Error("Unknown storage type.");}this.prefix=b+"."}KeyValueStore.prototype.setItem=function(a,b){if(!a)return!1;var c=a;a=this.prefix+a;b=JSON.stringify(b);if(this.store)try{this.store.setItem(a,b)}catch(d){return d==QUOTA_EXCEEDED_ERR&&technicalAlert(null,"Unable to store key; "+this.name+" quota exceeded"),!1}else{var e=[escape(a)+"="+escape(b)];switch(this.name){case "cookie":case "localStorage":e.push("expires=Tue, 19 Jan 2038 03:14:07 GMT")}e.push("path=/");try{document.cookie=e.join("; ")}catch(f){return technicalAlert(null,"Unable to store key; cookie error: "+f.message),!1}if(!this.hasItem(c))return technicalAlert(null,"Unable to store key; unknown cookie error"),!1}return!0};KeyValueStore.prototype.getItem=function(a){if(!a)return null;a=this.prefix+a;if(this.store){if(this.store.getItem(a))return JSON.parse(this.store.getItem(a))}else{a=escape(a);for(var b=document.cookie.split(";"),c=0;c<b.length;c++){var d=b[c].split("=");if(d[0].trim()===a)return JSON.parse(unescape(d[1]))}}return null};KeyValueStore.prototype.removeItem=function(a){if(!a)return!1;a=this.prefix+a;this.store?this.store.removeItem(a):document.cookie=escape(a)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/";return!0};KeyValueStore.prototype.removeMatchingItems=function(a){if(!a)return!1;var b=[],c=RegExp(("^"+this.prefix+a).replace(/\./g,"\\.")+".*");if(this.store)for(a=0;a<this.store.length;a++){var d=this.store.key(a);c.test(d)&&b.push(d)}else{escape(a);var e=document.cookie.split(";");for(a=0;a<e.length;a++)d=e[a].split("=")[0].trim(),c.test(d)&&b.push(d)}for(a=0;a<b.length;a++)this.removeItem(b[a]);return!0};KeyValueStore.prototype.hasItem=function(a){if(!a)return!1;a=this.prefix+a;if(this.store){if(this.store.getItem(a))return!0}else{a=escape(a);for(var b=document.cookie.split(";"),c=0;c<b.length;c++)if(b[c].split("=")[0].trim()==a)return!0}return!1};function technicalError(a,b,c){a="Apologies! There is a technical problem with this "+a+". You may be able to continue, but some parts may not work properly.";if(null!=b||null!=c)a+="\n\nError";null!=b&&(a+=" ["+b+"]");if(null!=b||null!=c)a+=": ";null!=c&&(a+=c);return a}function technicalAlert(a,b){window.alert(technicalError(config&&config.errorName||"page",a,b))}window.onerror=function(a,b,c){technicalAlert(null,a);window.onerror=null};var version={title:"SugarCube",major:1,minor:0,revision:0,build:3010,date:new Date("Tue, 04 Mar 2014"),extensions:{},toString:function(){return this.title+" "+this.major+"."+this.minor+"."+this.revision+"."+this.build+" ("+this.date.toLocaleDateString()+")"}},modes={hashTag:1,windowHistory:2,sessionHistory:3},sysconfig={HistoryPRNG:{isEnabled:!1,replacedMathPRNG:!1}},config={hasPushState:"history"in window&&"pushState"in window.history,hasLocalStorage:"localStorage"in window&&function(a){try{return null!=a&&0<=a.length?(a.setItem("SugarCube_storage_test",!0),a.removeItem("SugarCube_storage_test"),!0):!1}catch(b){return!1}}(window.localStorage),hasSessionStorage:"sessionStorage"in window&&function(a){try{return null!=a&&0<=a.length?(a.setItem("SugarCube_storage_test",!0),a.removeItem("SugarCube_storage_test"),!0):!1}catch(b){return!1}}(window.sessionStorage),hasFileAPI:"File"in window&&"FileReader"in window&&"Blob"in window,userAgent:navigator.userAgent.toLowerCase(),browser:{},displayPassageTitles:!1,loadDelay:0,startPassage:"Start",updatePageElements:!0,disableHistoryControls:!1,disableHistoryTracking:!1,historyMode:modes.hashTag,saves:{autosave:void 0,id:"untitled-story",isAllowed:void 0,onLoad:void 0,onSave:void 0,slots:8},errorName:"game",errors:{}};config.transitionEndEventName=function(){var a={transition:"transitionend",MSTransition:"msTransitionEnd",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend"},b=document.createElement("div"),c;for(c in a)if(void 0!==b.style[c])return a[c];return""}();config.errors={savesNotAllowed:"Saving has been disallowed on this passage.",upgradeBrowser:"Apologies! Your web browser lacks capabilities that this "+config.errorName+" requires. Please consider upgrading it or switching to a more modern web browser."};config.browser={isGecko:navigator&&"Gecko"===navigator.product&&-1===config.userAgent.search(/webkit|trident/),isIE:-1!==config.userAgent.search(/msie|trident/)&&-1===config.userAgent.indexOf("opera"),ieVersion:function(){var a=/(?:msie\s+|rv:)(\d{1,2}\.\d)/.exec(config.userAgent);return a?+a[1]:0}(),isOpera:-1!==config.userAgent.indexOf("opera")||-1!==config.userAgent.indexOf(" opr/"),operaVersion:function(){var a=RegExp((/applewebkit|chrome/.test(config.userAgent)?"opr":"version")+"\\/(\\d{1,2}\\.\\d+)").exec(config.userAgent);return a?+a[1]:0}(),isMobile:{any:function(){return config.browser.isMobile.Android||config.browser.isMobile.BlackBerry||config.browser.isMobile.iOS||config.browser.isMobile.Windows},Android:-1!==config.userAgent.search(/android/),BlackBerry:-1!==config.userAgent.search(/blackberry/),iOS:-1!==config.userAgent.search(/ip(?:hone|ad|od)/),Windows:-1!==config.userAgent.search(/iemobile/)}};config.historyMode=config.hasPushState?config.browser.isGecko?modes.sessionHistory:modes.windowHistory:modes.hashTag;config.hasFileAPI=config.hasFileAPI&&!config.browser.isMobile.any()&&(!config.browser.isOpera||15<=config.browser.operaVersion);var formatter=null,macros={},tale={},state={},storage={},session={},options={},setup={},testPlay,prerender={},postrender={};$(document).ready(function(){if(document.head&&document.querySelector&&window.JSON){formatter=new WikiFormatter(Wikifier.formatters);macros=new Macros;addStandardMacros();tale=new Tale;state=new History;storage=new KeyValueStore("localStorage",tale.domId);session=new KeyValueStore("sessionStorage",tale.domId);config.saves.id=tale.domId;for(var a=tale.lookup("tags","stylesheet"),b=0;b<a.length;b++)addStyle(a[b].text);a=tale.lookup("tags","script");for(b=0;b<a.length;b++)try{eval(a[b].text)}catch(c){var d=c.message;if("TypeError"===c.name&&/read[\s-]only/.test(c.message)){var e=/([\"\'])([^\1]+)\1/.exec(c.message);e&&e[2]&&macros.has(e[2])&&(d="cannot clobber protected macro <<"+e[2]+">>")}technicalAlert(a[b].title,d)}a=tale.lookup("tags","widget");for(b=0;b<a.length;b++)try{Wikifier.wikifyEval(a[b].text)}catch(f){technicalAlert(a[b].title,f.message)}SaveSystem.init();UISystem.init();macros.init();if(tale.has("StoryInit"))try{Wikifier.wikifyEval(tale.get("StoryInit").text)}catch(g){technicalAlert("StoryInit",g.message)}config.disableHistoryTracking&&(config.disableHistoryControls=!0);state.init();macros.lateInit();window.SugarCube={config:config,setup:setup,macros:macros,tale:tale,state:state,storage:storage,session:session}}else $(document.documentElement).removeClass("loading"),$("#passages").empty().append("<h1>"+config.errors.upgradeBrowser+"</h1>")});var SaveSystem={_bad:!1,_max:-1,init:function(){function a(a,b){for(var c=0;c<b;c++)a.push(null);return a}function b(a){a.state={mode:a.mode,history:a.data};delete a.mode;delete a.data}0>config.saves.slots&&(config.saves.slots=0);if(null===storage.store)return!1;storage.hasItem("saves")||storage.setItem("saves",{autosave:null,slots:a([],config.saves.slots)});var c=storage.getItem("saves");if(null===c)return SaveSystem._bad=!0,!1;Array.isArray(c)&&(c={autosave:null,slots:c},storage.setItem("saves",c));config.saves.slots!==c.slots.length&&(config.saves.slots<c.slots.length?(c.slots.reverse(),c.slots=c.slots.filter(function(a,b,c){return null===a&&0<this.count?(this.count--,!1):!0},{count:c.slots.length-config.saves.slots}),c.slots.reverse()):config.saves.slots>c.slots.length&&a(c.slots,config.saves.slots-c.slots.length),storage.setItem("saves",c));var d=!1;null!==c.autosave&&(c.autosave.hasOwnProperty("data")&&!c.autosave.hasOwnProperty("state"))&&(b(c.autosave),d=!0);for(var e=0;e<c.slots.length;e++)null!==c.slots[e]&&(c.slots[e].hasOwnProperty("data")&&!c.slots[e].hasOwnProperty("state"))&&(b(c.slots[e]),d=!0);d&&storage.setItem("saves",c);SaveSystem._max=c.slots.length-1;return!0},length:function(){return SaveSystem._max+1},OK:function(){return SaveSystem.autosaveOK()||SaveSystem.slotsOK()},autosaveOK:function(){return!SaveSystem._bad&&"undefined"!==typeof config.saves.autosave},slotsOK:function(){return!SaveSystem._bad&&-1!==SaveSystem._max},hasAuto:function(){var a=storage.getItem("saves");return null===a||null===a.autosave?!1:!0},getAuto:function(){var a=storage.getItem("saves");return null===a?null:a.autosave},loadAuto:function(){var a=storage.getItem("saves");return null===a||null===a.autosave?!1:SaveSystem.unmarshal(a.autosave)},saveAuto:function(a){if("function"===typeof config.saves.isAllowed&&!config.saves.isAllowed())return!1;var b=storage.getItem("saves");if(null===b)return!1;b.autosave=SaveSystem.marshal();b.autosave.title=a||tale.get(state.active.title).excerpt();b.autosave.date=Date.now();return storage.setItem("saves",b)},deleteAuto:function(){var a=storage.getItem("saves");if(null===a)return!1;a.autosave=null;return storage.setItem("saves",a)},isEmpty:function(){return 0===SaveSystem.count()},count:function(){if(!SaveSystem.slotsOK())return 0;var a=storage.getItem("saves");if(null===a)return 0;for(var b=0,c=0;c<a.slots.length;c++)null!==a.slots[c]&&b++;return b},has:function(a){if(0>a||a>SaveSystem._max)return!1;var b=storage.getItem("saves");return null===b||a>b.slots.length||null===b.slots[a]?!1:!0},get:function(a){if(0>a||a>SaveSystem._max)return null;var b=storage.getItem("saves");return null===b||a>b.slots.length?null:b.slots[a]},load:function(a){if(0>a||a>SaveSystem._max)return!1;var b=storage.getItem("saves");return null===b||a>b.slots.length||null===b.slots[a]?!1:SaveSystem.unmarshal(b.slots[a])},save:function(a,b){if("function"===typeof config.saves.isAllowed&&!config.saves.isAllowed())return UISystem.alert(config.errors.savesNotAllowed),!1;if(0>a||a>SaveSystem._max)return!1;var c=storage.getItem("saves");if(null===c||a>c.slots.length)return!1;c.slots[a]=SaveSystem.marshal();c.slots[a].title=b||tale.get(state.active.title).excerpt();c.slots[a].date=Date.now();return storage.setItem("saves",c)},"delete":function(a){if(0>a||a>SaveSystem._max)return!1;var b=storage.getItem("saves");if(null===b||a>b.slots.length)return!1;b.slots[a]=null;return storage.setItem("saves",b)},purge:function(){storage.removeItem("saves");return SaveSystem.init()},exportSave:function(){if("function"!==typeof config.saves.isAllowed||config.saves.isAllowed()){var a=tale.domId+".json",b=JSON.stringify(SaveSystem.marshal());saveAs(new Blob([b],{type:"application/json;charset=UTF-8"}),a)}else UISystem.alert(config.errors.savesNotAllowed)},importSave:function(a){a=a.target.files[0];var b=new FileReader;$(b).load(function(a){return function(a){if(a.target.result){var b;try{b=JSON.parse(a.target.result)}catch(c){}SaveSystem.unmarshal(b)}}}(a));b.readAsText(a)},marshal:function(){var a={id:config.saves.id,state:History.marshal()};config.saves.version&&(a.version=config.saves.version);if("function"===typeof config.saves.onSave)config.saves.onSave(a);return a},unmarshal:function(a){try{if(!a||!a.hasOwnProperty("id")||!a.hasOwnProperty("state")){if(a&&a.hasOwnProperty("mode")&&a.hasOwnProperty("id")&&a.hasOwnProperty("data"))throw Error("Old-style saves seen in SaveSystem.unmarshal().");throw Error("Save is missing required data.  Either you've loaded a file which isn't a save, or the save has become corrupted.");}if("function"===typeof config.saves.onLoad)config.saves.onLoad(a);if(a.id!==config.saves.id)throw Error("Save is from the wrong "+config.errorName+".");History.unmarshal(a.state)}catch(b){return UISystem.alert(b.message+"\n\nAborting load."),!1}return!0}},UISystem={init:function(){var a=$(document.documentElement),b;tale.has("StoryCaption")&&(document.getElementById("story-caption").style.display="block");if(tale.has("StoryMenu")||tale.has("MenuStory"))document.getElementById("menu-story").style.display="block";setPageElement("story-title","StoryTitle",tale.title);UISystem.setPageElements();insertElement(document.body,"div","ui-overlay");insertElement(document.body,"div","ui-body");UISystem.addClickHandler("#menu-saves",null,function(){UISystem.buildSaves()});b=$("#menu-rewind");!config.disableHistoryTracking&&0<tale.lookup("tags","bookmark").length?(b.css({display:"block"}),UISystem.addClickHandler(b.find("a"),null,function(){UISystem.buildRewind()})):b.remove();UISystem.addClickHandler("#menu-restart",null,function(){UISystem.buildRestart()});b=$("#menu-options");tale.has("MenuOptions")&&""!==tale.get("MenuOptions").text.trim()?(b.css({display:"block"}),UISystem.addClickHandler(b.find("a"),null,function(){UISystem.buildOptions()})):b.remove();b=$("#menu-share");tale.has("MenuShare")&&""!==tale.get("MenuShare").text.trim()?(b.css({display:"block"}),UISystem.addClickHandler(b.find("a"),null,function(){UISystem.buildShare()})):b.remove();"complete"===document.readyState&&a.removeClass("loading");document.addEventListener("readystatechange",function(){"complete"===document.readyState?0<config.loadDelay?setTimeout(function(){a.removeClass("loading")},config.loadDelay):a.removeClass("loading"):a.addClass("loading")},!1)},setPageElements:function(){setPageElement("story-banner","StoryBanner");setPageElement("story-subtitle","StorySubtitle");setPageElement("story-author","StoryAuthor");setPageElement("story-caption","StoryCaption");setPageElement("menu-story",["StoryMenu","MenuStory"])},buildSaves:function(){function a(a,b,c,d){var e=document.createElement("li"),f=document.createElement("button");f.id="saves-"+a;b&&(f.className=b);f.innerHTML=c;$(f).click(d);e.appendChild(f);return e}function b(){function a(b,c,d,e,f){var g=document.createElement("button");g.id="saves-"+b+"-"+e;c&&(g.className=c);g.classList.add(b);g.innerHTML=d;$(g).click(function(a){return function(){f(a)}}(e));return g}var b=storage.getItem("saves");if(null===b)return!1;var c=document.createElement("tbody"),d,e,f,g,t,l;SaveSystem.autosaveOK()&&(d=document.createElement("tr"),e=document.createElement("td"),f=document.createElement("td"),g=document.createElement("td"),t=document.createElement("td"),l=document.createElement("b"),l.innerHTML="A",e.appendChild(l),b.autosave&&b.autosave.state.mode===config.historyMode?(l=document.createElement("button"),l.id="saves-load-autosave",l.classList.add("load"),l.classList.add("ui-close"),l.innerHTML="Load",$(l).click(SaveSystem.loadAuto),f.appendChild(l),l=document.createTextNode(b.autosave.title),g.appendChild(l),g.appendChild(document.createElement("br")),l=document.createElement("small"),l.innerHTML="Autosaved ("+(new Date(b.autosave.date)).toLocaleString()+")",g.appendChild(l),l=document.createElement("button"),l.id="saves-delete-autosave",l.classList.add("delete"),l.innerHTML="Delete",$(l).click(function(){SaveSystem.deleteAuto();UISystem.buildSaves()}),t.appendChild(l)):(l=document.createElement("i"),l.innerHTML="(autosave slot empty)",g.appendChild(l),g.classList.add("empty")),d.appendChild(e),d.appendChild(f),d.appendChild(g),d.appendChild(t),c.appendChild(d));for(var p=0;p<b.slots.length;p++)d=document.createElement("tr"),e=document.createElement("td"),f=document.createElement("td"),g=document.createElement("td"),t=document.createElement("td"),e.appendChild(document.createTextNode(p+1)),b.slots[p]&&b.slots[p].state.mode===config.historyMode?(l=a("load","ui-close","Load",p,SaveSystem.load),f.appendChild(l),l=document.createTextNode(b.slots[p].title),g.appendChild(l),g.appendChild(document.createElement("br")),l=document.createElement("small"),l.innerHTML=b.slots[p].date?"Saved ("+(new Date(b.slots[p].date)).toLocaleString()+")":"Saved (<i>unknown</i>)",g.appendChild(l),l=a("delete",null,"Delete",p,function(a){SaveSystem.delete(a);UISystem.buildSaves()}),t.appendChild(l)):(l=a("save","ui-close","Save",p,SaveSystem.save),f.appendChild(l),l=document.createElement("i"),l.innerHTML="(save slot empty)",g.appendChild(l),g.classList.add("empty")),d.appendChild(e),d.appendChild(f),d.appendChild(g),d.appendChild(t),c.appendChild(d);b=document.createElement("table");b.id="saves-list";b.appendChild(c);return b}function c(){var a=document.createElement("div"),b=document.createElement("div"),c=document.createElement("input");b.id="saves-import-label";b.appendChild(document.createTextNode("Select a save file to load:"));a.appendChild(b);c.type="file";c.id="saves-import-file";c.name="saves-import-file";$(c).change(function(a){SaveSystem.importSave(a);UISystem.close()});a.appendChild(c);return a}var d=document.getElementById("ui-body"),e,f,g=SaveSystem.OK();$(d).empty().addClass("saves");g&&(e=b(),e||(e=document.createElement("div"),e.id="saves-list",e.innerHTML="<i>No save slots found</i>"),d.appendChild(e));if(g||config.hasFileAPI)return f=document.createElement("div"),e=document.createElement("ul"),config.hasFileAPI&&(e.appendChild(a("export","ui-close","Save to Disk\u2026",SaveSystem.exportSave)),e.appendChild(a("import",null,"Load from Disk\u2026",function(a){document.getElementById("saves-import-file")||d.appendChild(c())}))),g&&e.appendChild(a("purge",null,"Purge Save Slots",function(a){SaveSystem.purge();UISystem.buildSaves()})),f.appendChild(e),d.appendChild(f),!0;window.alert("Apologies! Your browser either has none of the features required to support saves or has disabled them.\n\nThe former may be solved by updating it to a newer version or by switching to a more modern browser.\n\nThe latter may be solved by loosening its security restrictions or, perhaps, by viewing the "+config.errorName+" via the HTTP protocol.");return!1},buildRewind:function(){var a=document.getElementById("ui-body"),b=!1;$(a).empty().addClass("rewind");for(var c=0,d=state.history.length-1;c<d;c++){var e=tale.get(state.history[c].title);e&&-1!==e.tags.indexOf("bookmark")&&(b=document.createElement("div"),b.classList.add("ui-close"),$(b).click(function(){var a=c;return config.historyMode===modes.windowHistory?function(){document.title=tale.title;if(!config.disableHistoryControls)for(var b=0;b<=a;b++)window.history.pushState(state.history.slice(0,b+1),document.title);state.pop(state.history.length-(a+1));state.activate(state.top);state.display(state.active.title,null,"back")}:config.historyMode===modes.sessionHistory?function(){document.title=tale.title;state.regenerateSuid();if(config.disableHistoryControls)window.history.replaceState({sidx:state.history[a].sidx,suid:state.suid},document.title);else for(var b=0;b<=a;b++)window.history.pushState({sidx:state.history[b].sidx,suid:state.suid},document.title);window.history.state.sidx<state.top.sidx&&state.pop(state.top.sidx-window.history.state.sidx);state.activate(state.top);state.display(state.active.title,null,"back")}:function(){config.disableHistoryControls?(session.setItem("activeHash",state.history[a].hash),window.location.reload()):window.location.hash=state.history[a].hash}}()),b.innerHTML=e.excerpt(),a.appendChild(b),b=!0)}b||(b=document.createElement("div"),b.innerHTML="<i>No passages available</i>",a.appendChild(b))},buildRestart:function(){var a=document.getElementById("ui-body");$(a).empty().addClass("dialog restart").append('<p>Are you sure that you want to restart?  Unsaved progress will be lost.</p><ul><li><button id="restart-ok" class="ui-close">OK</button></li><li><button id="restart-cancel" class="ui-close">Cancel</button></li></ul>');$("#ui-body #restart-ok").click(function(){state.restart()});return!0},buildOptions:function(){var a=document.getElementById("ui-body");$(a).empty().addClass("dialog options");new Wikifier(a,tale.get("MenuOptions").processText().trim());return!0},buildShare:function(){var a=document.getElementById("ui-body");$(a).empty().addClass("share");new Wikifier(a,tale.get("MenuShare").processText().trim());$("br",a).remove();return!0},alert:function(a,b,c){var d=document.getElementById("ui-body");$(d).empty().addClass("dialog alert").append("<p>"+a+'</p><ul><li><button id="alert-ok" class="ui-close">OK</button></li></ul>');UISystem.show(b,c)},addClickHandler:function(a,b,c,d,e){$(a).click(function(a){a.preventDefault();"function"===typeof c&&c(a);UISystem.show(b,e);"function"===typeof d&&d(a)})},show:function(a,b){a=$.extend({top:50,opacity:0.8},a);$(document.body).addClass("ui-open").on("click.uisystem-close",".ui-close",b,UISystem.close);$("#ui-overlay").addClass("ui-close").css({display:"block",opacity:0}).fadeTo(200,a.opacity);$("#ui-body").css($.extend({display:"block",opacity:0},UISystem.calcPositionalProperties(a.top))).fadeTo(200,1);$(window).on("resize.uisystem",null,a.top,$.debounce(40,UISystem.resizeHandler))},close:function(a){$(window).off("resize.uisystem");$("#ui-body").css({display:"none",opacity:0,left:"",right:"",top:"",bottom:""}).removeClass().empty();$("#ui-overlay").fadeOut(200).removeClass();$(document.body).off("click.uisystem-close").removeClass("ui-open");a&&"function"===typeof a.data&&a.data(a)},resizeHandler:function(a){var b=$("#ui-body");a=a&&"undefined"!==typeof a.data?a.data:50;"block"===b.css("display")&&(b.css({display:"none",left:"",right:"",top:"",bottom:""}),b.css($.extend({display:"block"},UISystem.calcPositionalProperties(a))))},calcPositionalProperties:function(a){"undefined"===typeof a&&(a=50);var b=$(window),c=$("#ui-body"),d={left:"",right:"",top:"",bottom:""},e=b.width()-c.outerWidth(!0),b=b.height()-c.outerHeight(!0);d.left=20>=e?d.right="10px":d.right=~~(e/2)+"px";d.top=20>=b?d.bottom="10px":b/2>a?a+"px":d.bottom=~~(b/2)+"px";return d}};function History(){this.active={init:!0,variables:{}};this.history=[]}History.prototype={get top(){return 0!==this.history.length?this.history[this.history.length-1]:null},get bottom(){return 0!==this.history.length?this.history[0]:null},get isEmpty(){return 0===this.history.length},get length(){return this.history.length}};History.prototype.index=function(a){return 0===this.history.length||0>a||a>=this.history.length?null:this.history[a]};History.prototype.peek=function(a){if(0===this.history.length)return null;a=1+(a?Math.abs(a):0);return a>this.history.length?null:this.history[this.history.length-a]};History.prototype.push=function(){if(0!==arguments.length){for(var a=0;a<arguments.length;a++){var b=arguments[a];config.historyMode===modes.sessionHistory&&(b.sidx=this.history.length);this.history.push(b)}return this.history.length}};History.prototype.pop=function(a){if(0===this.history.length)return[];a=a?Math.abs(a):1;return 1==a?this.history.pop():this.history.splice(this.history.length-a,a)};History.prototype.activate=function(a){if(0!==arguments.length){if("object"===typeof a){if(null===a)return null;this.active=clone(a,!0)}else{if(0===this.history.length||0>a||a>=this.history.length)return null;this.active=clone(this.history[a],!0)}this.prng&&(this.prng=SeedablePRNG.unmarshal({seed:this.prng.seed,count:this.active.rcount}));return this.active}};History.prototype.init=function(){"undefined"!==typeof testPlay&&""!==testPlay?this.display(testPlay):this.restore()||this.display(config.startPassage);config.historyMode===modes.windowHistory?window.addEventListener("popstate",History.popStateHandler_windowHistory,!1):config.historyMode===modes.sessionHistory?window.addEventListener("popstate",History.popStateHandler_sessionHistory,!1):window.addEventListener("hashchange",History.hashChangeHandler,!1)};History.prototype.display=function(a,b,c){a=tale.get(a);this.active.init&&!this.isEmpty&&(config.historyMode===modes.sessionHistory?this.activate(null!==window.history.state?window.history.state.sidx:this.top):this.activate(this.top));"back"!==c&&(this.isEmpty||(config.disableHistoryTracking?this.pop():config.historyMode===modes.sessionHistory&&window.history.state.sidx<this.top.sidx&&this.pop(this.top.sidx-window.history.state.sidx)),this.push({title:a.title,variables:clone(this.active.variables,!0)}),this.prng&&(this.top.rcount=this.prng.count),this.activate(this.top));if("back"!==c||config.disableHistoryControls)config.historyMode===modes.windowHistory?null===window.history.state||config.disableHistoryControls?window.history.replaceState(this.history,document.title):window.history.pushState(this.history,document.title):config.historyMode===modes.sessionHistory&&(null===window.history.state||config.disableHistoryControls?window.history.replaceState({sidx:this.active.sidx,suid:this.suid},document.title):window.history.pushState({sidx:this.active.sidx,suid:this.suid},document.title));config.historyMode!==modes.hashTag&&config.historyMode!==modes.sessionHistory||this.save();if("offscreen"!==c&&(document.body.className&&(document.body.className=""),tale.has("PassageReady")))try{Wikifier.wikifyEval(tale.get("PassageReady").text)}catch(d){technicalAlert("PassageReady",d.message)}var e=a.render();e.style.visibility="visible";if("offscreen"!==c){b=document.getElementById("passages");var f=b.querySelector(".passage");if(null!==f&&("number"===typeof config.passageTransitionOut||"boolean"===typeof config.passageTransitionOut&&config.passageTransitionOut&&""!==config.transitionEndEventName))if(f.id="out-"+f.id,f.classList.add("transition-out"),"boolean"===typeof config.passageTransitionOut)$(f).on(config.transitionEndEventName,function(){this.parentNode&&this.parentNode.removeChild(this)});else setTimeout(function(){f.parentNode&&f.parentNode.removeChild(f)},config.passageTransitionOut);else removeChildren(b);e.classList.add("transition-in");b.appendChild(e);setTimeout(function(){e.classList.remove("transition-in")},1);config.displayPassageTitles&&"Start"!==a.title&&(document.title=tale.title+": "+a.title);config.historyMode===modes.hashTag&&(config.disableHistoryControls?session.setItem("activeHash",this.hash=this.active.hash):window.location.hash=this.hash=this.active.hash);window.scroll(0,0)}if("offscreen"!==c&&tale.has("PassageDone"))try{Wikifier.wikifyEval(tale.get("PassageDone").text)}catch(g){technicalAlert("PassageDone",g.message)}config.updatePageElements&&UISystem.setPageElements();"undefined"!==typeof config.saves.autosave&&("boolean"===typeof config.saves.autosave?config.saves.autosave&&SaveSystem.saveAuto():-1!==a.tags.indexOf(config.saves.autosave)&&SaveSystem.saveAuto());return e};History.prototype.regenerateSuid=function(){session.removeItem("activeHistory");this.suid=Util.generateUuid();this.save()};History.prototype.restart=function(){config.historyMode===modes.windowHistory?(window.history.pushState(null,document.title),window.location.reload()):config.historyMode===modes.sessionHistory?(session.removeItem("activeHistory"),window.location.reload()):config.disableHistoryControls?(session.removeItem("activeHash"),window.location.reload()):window.location.hash=""};History.prototype.save=function(){if(config.historyMode===modes.sessionHistory)session.setItem("history."+this.suid,this.history)&&session.setItem("activeHistory",this.suid);else if(config.historyMode===modes.hashTag){for(var a="",b=0;b<this.history.length;b++){var c=tale.get(this.history[b].title);c&&"undefined"!==typeof c.id&&(a+=c.id.toString(36)+".")}this.active.hash=this.top.hash="#"+a.substr(0,a.length-1);return this.active.hash}};History.prototype.restore=function(a){if(config.historyMode===modes.windowHistory){if(null!==window.history.state&&(this.history=window.history.state),!this.isEmpty&&tale.has(this.top.title))return this.display(this.top.title,null,"back"),!0}else if(config.historyMode===modes.sessionHistory){if(a?this.suid=a:null!==window.history.state&&session.hasItem("activeHistory")?this.suid=session.getItem("activeHistory"):this.suid=Util.generateUuid(),this.suid&&session.hasItem("history."+this.suid)&&(this.history=session.getItem("history."+this.suid),tale.has(this.history[window.history.state.sidx].title)))return this.display(this.history[window.history.state.sidx].title,null,"back"),!0}else if(config.historyMode===modes.hashTag){var b;session.hasItem("activeHash")?b=session.getItem("activeHash").replace("#","").split("."):""!==window.location.hash&&"#"!==window.location.hash&&(b=window.location.hash.replace("#","").split("."));if(b)try{a=0;for(var c=b.length-1;a<=c;a++){var d=parseInt(b[a],36);if(!tale.has(d))return!1;this.display(d,null,a===c?null:"offscreen")}return!0}catch(e){}}return!1};History.hashChangeHandler=function(a){if(window.location.hash!==state.hash){if(""!==window.location.hash&&"#"!==window.location.hash){a=document.getElementById("passages");var b=storage.getItem("remember");window.SugarCube.state=state=new History;null!==b&&(state.active.variables=clone(b,!0));sysconfig.HistoryPRNG.isEnabled&&History.initPRNG();if(config.disableHistoryControls){session.setItem("activeHash",state.hash=window.location.hash);window.location.hash="";return}a.style.visibility="hidden";removeChildren(a);state.restore()||technicalAlert(null,"The passage you had previously visited could not be found.");a.style.visibility="visible"}else window.location.reload();state.hash=window.location.hash}};History.popStateHandler_windowHistory=function(a){if(null!==a.state){if(0===a.state.length)throw Error("Guru meditation error!");state.history=a.state;state.display(state.activate(state.top).title,null,"back")}};History.popStateHandler_sessionHistory=function(a){null!==a.state&&(a.state.suid!==state.suid&&(state.save(),state.restore(a.state.suid)),state.display(state.activate(a.state.sidx).title,null,"back"))};History.initPRNG=function(a,b){sysconfig.HistoryPRNG.isEnabled=!0;state.prng=new SeedablePRNG(a,b);state.active.rcount=state.prng.count;sysconfig.HistoryPRNG.replacedMathPRNG||(sysconfig.HistoryPRNG.replacedMathPRNG=!0,Math.random=function(){return state.prng.random()})};History.marshal=function(){var a={mode:config.historyMode};state.prng&&(a.rseed=state.prng.seed);switch(config.historyMode){case modes.windowHistory:a.history=clone(state.history,!0);break;case modes.sessionHistory:a.history=clone(state.history.slice(0,state.active.sidx+1),!0);break;case modes.hashTag:a.history=state.active.hash}return a};History.unmarshal=function(a){if(!a||!a.hasOwnProperty("mode")||!a.hasOwnProperty("history"))throw Error("State object is missing required data.");if(a.mode!==config.historyMode)throw Error("State object is from the wrong history mode.");switch(config.historyMode){case modes.windowHistory:case modes.sessionHistory:document.title=tale.title;window.SugarCube.state=state=new History;sysconfig.HistoryPRNG.isEnabled&&History.initPRNG(a.hasOwnProperty("rseed")?a.rseed:null);config.historyMode===modes.sessionHistory&&state.regenerateSuid();for(var b=0,c=a.history.length;b<c;b++)state.history.push(clone(a.history[b],!0)),config.disableHistoryControls||(config.historyMode===modes.windowHistory?window.history.pushState(state.history,document.title):window.history.pushState({sidx:state.history[b].sidx,suid:state.suid},document.title));state.activate(state.top);state.display(state.active.title,null,"back");break;case modes.hashTag:config.disableHistoryControls?(session.setItem("activeHash",a.history),window.location.reload()):window.location.hash=a.history}};function Passage(a,b,c){this.title=a;if(b)if(this.id=c,this.domId="passage-"+Util.slugify(this.title),this.text=Passage.unescapeLineBreaks(b.firstChild?b.firstChild.nodeValue:""),this.textExcerpt=Passage.getExcerptFromText(this.text),this.tags=b.hasAttribute("tags")?b.getAttribute("tags").trim():""){if(this.tags=this.tags.split(/\s+/),this.classes=[],this.className="",0<this.tags.length){a=/^(?:debug|nobr|passage|script|stylesheet|widget|twine\.\w*)$/i;c=[];for(var d=0;d<this.tags.length;d++){var e=this.tags[d].toLowerCase();a.test(e)||c.push(Util.slugify(e))}0<c.length&&(b.className&&(c=c.concat(b.className.split(/\s+/))),this.classes=c=c.sort().filter(function(a,b,c){return 0===b||c[b-1]!=a?!0:!1}),this.className=c.join(" "))}}else this.tags=[],this.classes=[],this.className="";else this.text='<html><span class="error">Error: this passage does not exist</span></html>',this.tags=[],this.classes=[],this.className=""}Passage.prototype.processText=function(){var a=this.text;-1!==this.tags.indexOf("nobr")&&(a=a.replace(/\n/g," "));-1!==this.tags.indexOf("Twine.image")&&(a="[img["+a+"]]");return a};Passage.prototype.render=function(){var a=insertElement(null,"section",this.domId,"passage");a.setAttribute("data-passage",this.title);a.style.visibility="hidden";for(var b=0,c=this.classes.length;b<c;b++)document.body.classList.add(this.classes[b]),a.classList.add(this.classes[b]);insertElement(a,"header",null,"header");b=insertElement(a,"div",null,"body content");insertElement(a,"footer",null,"footer");for(var d in prerender)"function"===typeof prerender[d]&&prerender[d].call(this,b,d);new Wikifier(b,this.processText());for(d in postrender)"function"===typeof postrender[d]&&postrender[d].call(this,b,d);this.textExcerpt=Passage.getExcerptFromNode(b);return a};Passage.prototype.reset=function(){for(var a=document.getElementById("store-area").childNodes,b=0;b<a.length;b++){var c=a[b],d;if(c.getAttribute&&(d=c.getAttribute("tiddler"))&&this.title===d){this.text=Passage.unescapeLineBreaks(c.firstChild?c.firstChild.nodeValue:"");return}}this.text='<html><span class="error">Error: this passage does not exist</span></html>'};Passage.prototype.excerpt=function(){return this.textExcerpt};Passage.getExcerptFromText=function(a,b){var c=RegExp("(\\S+(?:\\s+\\S+){0,"+("undefined"!==typeof b?b-1:7)+"})");return(c=a.replace(/<<.*?>>/g," ").replace(/<.*?>/g," ").trim().replace(/^\s*\|.*\|.*?$/gm,"").replace(/\[[<>]?img\[[^\]]*\]\]/g,"").replace(/\[\[([^|\]]*)(?:|[^\]]*)?\]\]/g,"$1").replace(/^\s*!+(.*?)$/gm,"$1").replace(/\'{2}|\/{2}|_{2}|@{2}/g,"").replace(/\s+/g," ").trim().match(c))?c[1]+"\u2026":"\u2026"};Passage.getExcerptFromNode=function(a,b){function c(a){if(!a.hasChildNodes())return"";a=a.childNodes;for(var b="",d=0,e=a.length;d<e;d++)switch(a[d].nodeType){case 1:"none"!==a[d].style.display&&(b+=" ",a[d].hasChildNodes()&&(b+=c(a[d])));break;case 3:b+=a[d].textContent}return b}if(!a.hasChildNodes())return"";var d=RegExp("(\\S+(?:\\s+\\S+){0,"+("undefined"!==typeof b?b-1:7)+"})"),e=c(a).trim();e&&(e=e.replace(/\s+/g," ").match(d));return e?e[1]+"\u2026":"\u2026"};Passage.unescapeLineBreaks=function(a){return a&&""!==a?a.replace(/\\n/gm,"\n").replace(/\\t/gm,"\t").replace(/\\s|\\/gm,"\\").replace(/\r/gm,""):""};Passage.mergeClassNames=function(){if(0==arguments.length)return"";for(var a=[],b=0;b<arguments.length;b++)"object"===typeof arguments[b]&&Array.isArray(arguments[b])?a=a.concat(arguments[b]):"string"===typeof arguments[b]&&(a=a.concat(arguments[b].split(/\s+/)));return 0<a.length?a.sort().filter(function(a,b,e){return 0==b||e[b-1]!=a?!0:!1}).join(" "):""};function Tale(){this.passages={};document.normalize&&document.normalize();for(var a=document.getElementById("store-area").childNodes,b=0;b<a.length;b++){var c=a[b],d;c.getAttribute&&(d=c.getAttribute("tiddler"))&&(this.passages[d]=new Passage(d,c,b))}this.passages.hasOwnProperty("StoryTitle")?(a=document.createElement("div"),new Wikifier(a,this.passages.StoryTitle.processText().trim()),this.setTitle(a.textContent)):this.setTitle("Untitled Story")}Tale.prototype.setTitle=function(a){this.title=document.title=a;this.domId=Util.slugify(a)};Tale.prototype.has=function(a){if("string"===typeof a)return void 0!==this.passages[a]&&null!==this.passages[a];if("number"===typeof a)for(var b in this.passages)if(this.passages[b].id===a)return!0;return!1};Tale.prototype.get=function(a){if("string"===typeof a)return this.passages[a]||new Passage(a);if("number"===typeof a)for(var b in this.passages)if(this.passages[b].id===a)return this.passages[b]};Tale.prototype.lookup=function(a,b,c){c||(c="title");var d=[],e;for(e in this.passages){var f=this.passages[e];switch(typeof f[a]){case "undefined":break;case "object":for(var g=0;g<f[a].length;g++)if(f[a][g]==b){d.push(f);break}break;default:f[a]==b&&d.push(f)}}d.sort(function(a,b){return a[c]==b[c]?0:a[c]<b[c]?-1:1});return d};Tale.prototype.reset=function(){for(var a in this.passages)this.passages[a].reset()};String.prototype.readMacroParams=function(){for(var a=RegExp(Wikifier.textPrimitives.macroArgPattern,"gm"),b,c=[];null!==(b=a.exec(this));){var d;if(b[1])d=b[1];else if(b[2])d=b[2];else if(b[3])d="";else if(b[4]){d=b[4];b=RegExp(Wikifier.textPrimitives.linkPattern).exec(d);var e={};null!==b&&(e.count=b[1]?2:1,e.link=/^\$\w+/.test(b[3])?Wikifier.getValue(b[3]):b[3],e.text=b[1]?/^\$\w+/.test(b[1])?Wikifier.getValue(b[1]):b[1]:e.link,e.isExternal=!b[2]&&Wikifier.formatterHelpers.isExternalLink(e.link),e.setFn=b[4]?function(a){return function(){macros.eval(a,null,null)}}(Wikifier.parse(b[4])):null,d=e)}else b[5]&&(d=b[5],/^\$\w+/.test(d)?d=Wikifier.getValue(d):Util.isNumeric(d)?d=Number(d):Util.isBoolean(d)?d="true"===d?!0:!1:"null"===d?d=null:"undefined"===d&&(d=void 0));c.push(d)}return c};String.prototype.unDash=function(){var a,b=this.split("-");if(1<b.length)for(a=1;a<b.length;a++)b[a]=b[a].substr(0,1).toUpperCase()+b[a].substr(1);return b.join("")};function WikiFormatter(a){this.formatters=[];this.byName={};for(var b=[],c=0;c<a.length;c++)b.push("("+a[c].match+")"),this.formatters.push(a[c]),this.byName[a[c].name]=this.formatters[this.formatters.length-1];this.formatterRegExp=RegExp(b.join("|"),"gm")}function Wikifier(a,b){this.source=b;this.output=a;this.nextMatch=0;this.formatter=formatter;this.subWikify(this.output)}Wikifier.prototype.subWikify=function(a,b){var c=this.output;this.output=a;var d=b?RegExp("("+b+")","gm"):null,e,f;do{this.formatter.formatterRegExp.lastIndex=this.nextMatch;d&&(d.lastIndex=this.nextMatch);e=this.formatter.formatterRegExp.exec(this.source);if((f=d?d.exec(this.source):null)&&(!e||f.index<=e.index)){f.index>this.nextMatch&&this.outputText(this.output,this.nextMatch,f.index);this.matchStart=f.index;this.matchLength=f[1].length;this.matchText=f[1];this.nextMatch=f.index+f[1].length;this.output=c;return}if(e){e.index>this.nextMatch&&this.outputText(this.output,this.nextMatch,e.index);this.matchStart=e.index;this.matchLength=e[0].length;this.matchText=e[0];this.nextMatch=this.formatter.formatterRegExp.lastIndex;for(var g=-1,h=1;h<e.length;h++)if(e[h]){g=h-1;break}-1!==g&&this.formatter.formatters[g].handler(this)}}while(f||e);this.nextMatch<this.source.length&&(this.outputText(this.output,this.nextMatch,this.source.length),this.nextMatch=this.source.length);this.output=c};Wikifier.prototype.outputText=function(a,b,c){insertText(a,this.source.substring(b,c))};Wikifier.prototype.rawArgs=function(){return this._macroRawArgs};Wikifier.prototype.fullArgs=function(){return Wikifier.parse(this.rawArgs())};Wikifier.parse=function(a){for(var b=RegExp("(?:(?:\"((?:(?:\\\\\")|[^\"])+)\")|(?:'((?:(?:\\\\')|[^'])+)')|((?:\"\")|(?:''))|([=+\\-*\\/%<>&\\|\\^~!?:,;\\(\\)\\[\\]{}]+)|([^\"'=+\\-*\\/%<>&\\|\\^~!?:,;\\(\\)\\[\\]{}\\s]+))","g"),c,d={$:"state.active.variables.",eq:"==",neq:"!=",gt:">",gte:">=",lt:"<",lte:"<=",and:"&&",or:"||",not:"!",is:"===","is not":"!==",to:"=",def:'"undefined" !== typeof',ndef:'"undefined" === typeof'};null!==(c=b.exec(a));)if(c[5]){var e=c[5];"$"!==e&&("$"===e[0]?e="$":"is"===e&&"is not"===a.slice(c.index,c.index+6)&&(e="is not"),d[e]&&(a=a.splice(c.index,e.length,d[e]),b.lastIndex+=d[e].length-e.length))}return a};Wikifier.getValue=function(a){a=Wikifier.parseStoryVariable(a);var b=void 0;if(0!==a.length)for(var b=state.active.variables,c=0,d=a.length;c<d;c++)if("undefined"!==typeof b[a[c]])b=b[a[c]];else{b=void 0;break}return b};Wikifier.setValue=function(a,b){var c=Wikifier.parseStoryVariable(a);if(0!==c.length){for(var d=state.active.variables,e=c.pop(),f=0,g=c.length;f<g;f++)if("undefined"!==typeof d[c[f]])d=d[c[f]];else{d=void 0;break}if(void 0!==d)return d[e]=b,!0}return!1};Wikifier.parseStoryVariable=function(a){for(var b=/^(?:\$(\w+)|\.(\w+)|\[(?:(?:\"((?:\\.|[^\"\\])+)\")|(?:\'((?:\\.|[^\'\\])+)\')|(\$\w.*)|(\d+))\])/,c,d=[];null!==(c=b.exec(a));)a=a.slice(c[0].length),c[1]?d.push(c[1]):c[2]?d.push(c[2]):c[3]?d.push(c[3]):c[4]?d.push(c[4]):c[5]?d.push(Wikifier.getValue(c[5])):c[6]&&d.push(Number(c[6]));return""===a?d:[]};Wikifier.wikifyEval=function(a){var b=document.createElement("div");try{for(new Wikifier(b,a);b.hasChildNodes();){var c=b.firstChild;if(c.classList&&c.classList.contains("error"))throw Error(c.textContent.replace(/^Error:\s+/,""));b.removeChild(c)}}finally{removeChildren(b),"function"===typeof b.remove&&b.remove()}};Wikifier.createInternalLink=function(a,b,c,d){var e=document.createElement("a");"undefined"!==typeof b&&(e.setAttribute("data-passage",b),e.className=tale.has(b)?"link-internal":"link-broken");c&&insertText(e,c);a&&a.appendChild(e);"undefined"!==typeof b&&$(e).click(function(){"function"===typeof d&&d();state.display(b,e)});return e};Wikifier.createExternalLink=function(a,b,c){a=insertElement(a,"a",null,"link-external",c);b&&(a.href=b);a.target="_blank";return a};/[\u0150\u0170]/g.test("\u0150")?Wikifier.textPrimitives={anyLetter:"[A-Za-z0-9_\\-\u00c0-\u00de\u00df-\u00ff\u0150\u0170\u0151\u0171]"}:Wikifier.textPrimitives={anyLetter:"[A-Za-z0-9_\\-\u00c0-\u00de\u00df-\u00ff]"};Wikifier.textPrimitives.urlPattern="(?:file|https?|mailto|ftp|javascript|irc|news|data):[^\\s'\"]+(?:/|\\b)";Wikifier.textPrimitives.linkPattern="\\[\\[\\s*(?:(.+?)\\s*\\|\\s*)?(~)?(.+?)\\s*\\](?:\\[\\s*(.+?)\\s*\\])?\\]";Wikifier.textPrimitives.imagePattern="\\[([<]?)([>]?)[Ii][Mm][Gg]\\[\\s*(?:(.+?)\\s*\\|\\s*)?([^\\|]+?)\\s*\\](?:\\[\\s*(~)?(.+?)\\s*\\])?(?:\\[\\s*(.+?)\\s*\\])?\\]";Wikifier.textPrimitives.macroArgPattern="(?:(?:\"((?:(?:\\\\\")|[^\"])+)\")|(?:'((?:(?:\\\\')|[^'])+)')|((?:\"\")|(?:''))|(?:(\\[\\[(?:\\s|\\S)*?\\]\\]))|([^\"'\\s]\\S*))";Wikifier.formatterHelpers={charFormatHelper:function(a){var b=insertElement(a.output,this.element);a.subWikify(b,this.terminator)},inlineCssHelper:function(a){var b=[],c=RegExp("(?:("+Wikifier.textPrimitives.anyLetter+"+)\\(([^\\)\\|\\n]+)(?:\\):))|(?:("+Wikifier.textPrimitives.anyLetter+"+):([^;\\|\\n]+);)","gm");do{c.lastIndex=a.nextMatch;var d=c.exec(a.source),e=d&&d.index==a.nextMatch;if(e){var f,g;d[1]?(f=d[1].unDash(),g=d[2]):(f=d[3].unDash(),g=d[4]);switch(f){case "bgcolor":f="backgroundColor";break;case "float":f="cssFloat"}b.push({style:f,value:g});a.nextMatch=d.index+d[0].length}}while(e);return b},monospacedByLineHelper:function(a){var b=RegExp(this.lookahead,"gm");b.lastIndex=a.matchStart;(b=b.exec(a.source))&&b.index===a.matchStart&&(insertElement(a.output,"pre",null,null,b[1]),a.nextMatch=b.index+b[0].length)},isExternalLink:function(a){return tale.has(a)?!1:RegExp("^"+Wikifier.textPrimitives.urlPattern,"gim").test(a)||-1!==a.search(/[\.\/\\#]/)?!0:!1}};Wikifier.formatters=[{name:"table",match:"^\\|(?:[^\\n]*)\\|(?:[fhck]?)$",lookahead:"^\\|([^\\n]*)\\|([fhck]?)$",rowTerminator:"\\|(?:[fhck]?)$\\n?",cellPattern:"(?:\\|([^\\n\\|]*)\\|)|(\\|[fhck]?$\\n?)",cellTerminator:"(?:\\x20*)\\|",rowTypes:{c:"caption",h:"thead","":"tbody",f:"tfoot"},handler:function(a){var b=insertElement(a.output,"table"),c=RegExp(this.lookahead,"gm"),d=null,e,f,g=[],h=0;a.nextMatch=a.matchStart;do{c.lastIndex=a.nextMatch;var k=c.exec(a.source),m=k&&k.index===a.nextMatch;m&&(e=k[2],"k"===e?(b.className=k[1],a.nextMatch+=k[0].length+1):(e!==d&&(f=insertElement(b,this.rowTypes[e])),d=e,"c"===d?(0===h?f.setAttribute("align","top"):f.setAttribute("align","bottom"),a.nextMatch+=1,a.subWikify(f,this.rowTerminator)):(e=insertElement(f,"tr"),this.rowHandler(a,e,g)),h++))}while(m)},rowHandler:function(a,b,c){var d=0,e=1,f=RegExp(this.cellPattern,"gm");do{f.lastIndex=a.nextMatch;var g=f.exec(a.source),h=g&&g.index===a.nextMatch;if(h){if("~"===g[1]){var k=c[d];k&&(k.rowCount++,k.element.setAttribute("rowSpan",k.rowCount),k.element.setAttribute("rowspan",k.rowCount),k.element.valign="center");a.nextMatch=g.index+g[0].length-1}else if(">"===g[1])e++,a.nextMatch=g.index+g[0].length-1;else if(g[2]){a.nextMatch=g.index+g[0].length;break}else{var k=g=!1,m;a.nextMatch++;for(var q=Wikifier.formatterHelpers.inlineCssHelper(a);" "===a.source.substr(a.nextMatch,1);)g=!0,a.nextMatch++;"!"===a.source.substr(a.nextMatch,1)?(m=insertElement(b,"th"),a.nextMatch++):m=insertElement(b,"td");c[d]={rowCount:1,element:m};1<e&&(m.setAttribute("colSpan",e),m.setAttribute("colspan",e),e=1);for(var r=0;r<q.length;r++)m.style[q[r].style]=q[r].value;a.subWikify(m,this.cellTerminator);" "===a.matchText.substr(a.matchText.length-2,1)&&(k=!0);g&&k?m.align="center":g?m.align="right":k&&(m.align="left");a.nextMatch-=1}d++}}while(h)}},{name:"heading",match:"^!{1,6}",terminator:"\\n",handler:function(a){a.subWikify(insertElement(a.output,"h"+a.matchLength),this.terminator)}},{name:"list",match:"^(?:(?:\\*+)|(?:#+))",lookahead:"^(?:(\\*+)|(#+))",terminator:"\\n",outerElement:"ul",itemElement:"li",handler:function(a){var b=RegExp(this.lookahead,"gm");a.nextMatch=a.matchStart;var c=[a.output],d=null,e,f=0,g;do{b.lastIndex=a.nextMatch;var h=b.exec(a.source),k=h&&h.index==a.nextMatch;if(k){e=h[2]?"ol":"ul";g=h[0].length;a.nextMatch+=h[0].length;if(g>f)for(d=f;d<g;d++)c.push(insertElement(c[c.length-1],e));else if(g<f)for(d=f;d>g;d--)c.pop();else g==f&&e!=d&&(c.pop(),c.push(insertElement(c[c.length-1],e)));f=g;d=e;e=insertElement(c[c.length-1],"li");a.subWikify(e,this.terminator)}}while(k)}},{name:"quoteByBlock",match:"^<<<\\n",terminator:"^<<<\\n",handler:function(a){var b=insertElement(a.output,"blockquote");a.subWikify(b,this.terminator)}},{name:"quoteByLine",match:"^>+",terminator:"\\n",element:"blockquote",handler:function(a){var b=RegExp(this.match,"gm"),c=[a.output],d=0,e=a.matchLength;do{if(e>d)for(;d<e;d++)c.push(insertElement(c[c.length-1],this.element));else if(e<d)for(;d>e;d--)c.pop();d=e;a.subWikify(c[c.length-1],this.terminator);insertElement(c[c.length-1],"br");b.lastIndex=a.nextMatch;var f=b.exec(a.source),g=f&&f.index==a.nextMatch;g&&(e=f[0].length,a.nextMatch+=f[0].length)}while(g)}},{name:"rule",match:"^----+$\\n?|<hr ?/?>\\n?",handler:function(a){insertElement(a.output,"hr")}},{name:"monospacedByLine",match:"^\\{\\{\\{\\n",lookahead:"^\\{\\{\\{\\n((?:^[^\\n]*\\n)+?)(^\\}\\}\\}$\\n?)",handler:Wikifier.formatterHelpers.monospacedByLineHelper},{name:"prettyLink",match:"\\[\\[",lookaheadRegExp:/(\[\[(?:\s|\S)*?\]\])/gm,handler:function(a){this.lookaheadRegExp.lastIndex=a.matchStart;var b=this.lookaheadRegExp.exec(a.source);if(b&&b.index===a.matchStart){var c=RegExp("^"+Wikifier.textPrimitives.linkPattern+"$").exec(b[0]);if(null!==c){a.nextMatch=b.index+b[0].length;var b=/^\$\w+/.test(c[3])?Wikifier.getValue(c[3]):c[3],d=c[1]?/^\$\w+/.test(c[1])?Wikifier.getValue(c[1]):c[1]:b,e=c[4]?function(a){return function(){macros.eval(a,null,null)}}(Wikifier.parse(c[4])):null;!c[2]&&Wikifier.formatterHelpers.isExternalLink(b)?Wikifier.createExternalLink(a.output,b,d):Wikifier.createInternalLink(a.output,b,d,e)}}}},{name:"urlLink",match:Wikifier.textPrimitives.urlPattern,handler:function(a){var b=Wikifier.createExternalLink(a.output,a.matchText);a.outputText(b,a.matchStart,a.nextMatch)}},{name:"image",match:"\\[[<>]?[Ii][Mm][Gg]\\[",lookaheadRegExp:/(\[[<>]?[Ii][Mm][Gg]\[(?:\s|\S)*?\]\])/gm,handler:function(a){this.lookaheadRegExp.lastIndex=a.matchStart;var b=this.lookaheadRegExp.exec(a.source);if(b&&b.index===a.matchStart){var c=RegExp("^"+Wikifier.textPrimitives.imagePattern+"$").exec(b[0]);if(null!==c){a.nextMatch=b.index+b[0].length;a=a.output;b=c[7]?function(a){return function(){macros.eval(a,null,null)}}(Wikifier.parse(c[7])):null;if(c[6]){var d=/^\$\w+/.test(c[6])?Wikifier.getValue(c[6]):c[6];a=!c[5]&&Wikifier.formatterHelpers.isExternalLink(d)?Wikifier.createExternalLink(a,d):Wikifier.createInternalLink(a,d,null,b);a.classList.add("link-image")}a=insertElement(a,"img");b=/^\$\w+/.test(c[4])?Wikifier.getValue(c[4]):c[4];"data:"!==b.slice(0,5)&&tale.has(b)&&(d=tale.get(b),-1!==d.tags.indexOf("Twine.image")&&(b=d.text));a.src=b;c[3]&&(a.title=/^\$\w+/.test(c[3])?Wikifier.getValue(c[3]):c[3]);c[1]?a.align="left":c[2]&&(a.align="right")}}}},{name:"macro",match:"<<",lookaheadRegExp:/<<([^>\s]+)(?:\s*)((?:(?:\"(?:\\.|[^\"\\])*\")|(?:\'(?:\\.|[^\'\\])*\')|[^>]|(?:>(?!>)))*)>>/gm,working:{name:"",handlerName:"",arguments:"",index:0},context:null,handler:function(a){this.lookaheadRegExp.lastIndex=a.matchStart;if(this.parseTag(a)){var b=this.working.name,c=this.working.handlerName,d=this.working.arguments;try{var e=macros.get(b);if(e){e.hasOwnProperty("excludeParams")&&(e.skipArgs=e.excludeParams,delete e.excludeParams);e.hasOwnProperty("children")&&!e.hasOwnProperty("tags")&&(e.tags=e.children,delete e.children);var f=null;if(e.hasOwnProperty("tags")&&(f=this.parseBody(a,e.tags),!f))return throwError(a.output,"cannot find a closing tag for macro <<"+b+">>");if("function"===typeof e[c]){var g=e.hasOwnProperty("skipArgs")&&e.skipArgs?[]:d.readMacroParams();if(e.hasOwnProperty("_USE_MACROS_API")){var h=this.context,k={self:e,name:b,args:g,payload:f,output:a.output,parser:a,context:this.context,contextHas:function(a){for(var b=this;null!==(b=b.context);)if(a(b))return!0;return!1},contextSelect:function(a){for(var b=this,c=[];null!==(b=b.context);)a(b)&&c.push(b);return c},error:function(a){throwError(this.output,"<<"+this.name+">>: "+a);return!1}};k.args.raw=d;k.args.full=Wikifier.parse(d);try{this.context=k,e[c].call(k)}finally{this.context=h}}else a._macroRawArgs=d,e[c](a.output,b,g,a,f),a._macroRawArgs=""}else return throwError(a.output,"macro <<"+b+'>> property "'+c+'" '+(e.hasOwnProperty(c)?"is not a function":"does not exist"))}else return macros.tags.hasOwnProperty(b)?throwError(a.output,"child tag <<"+b+">> was found outside of a call to its parent macro"+(1===macros.tags[b].length?"":"s")+" <<"+macros.tags[b].join(">>, <<")+">>"):throwError(a.output,"macro <<"+b+">> does not exist")}catch(m){return throwError(a.output,"cannot execute "+(e&&e.isWidget?"widget":"macro")+" <<"+b+">>: "+m.message)}finally{this.working.name="",this.working.handlerName="",this.working.arguments="",this.working.index=0}}},parseTag:function(a){var b=this.lookaheadRegExp.exec(a.source);return b&&b.index===a.matchStart&&b[1]?(a.nextMatch=b.index+b[0].length,this.lookaheadRegExp.lastIndex=a.nextMatch,a=b[1].indexOf("::"),-1!==a?(this.working.name=b[1].slice(0,a),this.working.handlerName=b[1].slice(a+2)):(this.working.name=b[1],this.working.handlerName="handler"),this.working.arguments=b[2],this.working.index=b.index,!0):!1},parseBody:function(a,b){for(var c=this.working.name,d="/"+c,e="end"+c,f=Array.isArray(b)?b:!1,g=-1,h=1,k=this.working.name,m=this.working.arguments,q=a.nextMatch,r=[];-1!==(a.matchStart=a.source.indexOf("<<",a.nextMatch))&&this.parseTag(a);){var s=this.working.name,n=this.working.arguments,t=this.working.index,l=a.nextMatch;switch(s){case c:h++;break;case e:case d:h--;break;default:if(1===h&&f)for(var p=0,C=f.length;p<C;p++)s===f[p]&&(r.push({name:k,arguments:m,contents:a.source.slice(q,t)}),k=s,m=n,q=l)}if(0===h){r.push({name:k,arguments:m,contents:a.source.slice(q,t)});g=l;break}}return-1!==g?(a.nextMatch=g,r):null}},{name:"html",match:"<[Hh][Tt][Mm][Ll]>",lookaheadRegExp:/<[Hh][Tt][Mm][Ll]>((?:.|\n)*?)<\/[Hh][Tt][Mm][Ll]>/gm,handler:function(a){this.lookaheadRegExp.lastIndex=a.matchStart;var b=this.lookaheadRegExp.exec(a.source);if(b&&b.index===a.matchStart){a.nextMatch=b.index+b[0].length;var c=document.createDocumentFragment(),d=document.createElement("div");for(d.innerHTML=b[1];d.firstChild;)c.appendChild(d.firstChild);a.output.appendChild(c)}}},{name:"commentByBlock",match:"/(?:%|\\*)",lookaheadRegExp:/\/(%|\*)((?:.|\n)*?)\1\//gm,handler:function(a){this.lookaheadRegExp.lastIndex=a.matchStart;var b=this.lookaheadRegExp.exec(a.source);b&&b.index===a.matchStart&&(a.nextMatch=b.index+b[0].length)}},{name:"htmlCommentByBlock",match:"\x3c!--",lookaheadRegExp:/\x3c!--((?:.|\\n)*?)--\x3e/gm,handler:function(a){this.lookaheadRegExp.lastIndex=a.matchStart;var b=this.lookaheadRegExp.exec(a.source);b&&b.index===a.matchStart&&(a.output.appendChild(document.createComment(b[1])),a.nextMatch=b.index+b[0].length)}},{name:"boldByChar",match:"''",terminator:"''",element:"strong",handler:Wikifier.formatterHelpers.charFormatHelper},{name:"strikeByChar",match:"==",terminator:"==",element:"strike",handler:Wikifier.formatterHelpers.charFormatHelper},{name:"underlineByChar",match:"__",terminator:"__",element:"u",handler:Wikifier.formatterHelpers.charFormatHelper},{name:"italicByChar",match:"//",terminator:"//",element:"em",handler:Wikifier.formatterHelpers.charFormatHelper},{name:"subscriptByChar",match:"~~",terminator:"~~",element:"sub",handler:Wikifier.formatterHelpers.charFormatHelper},{name:"superscriptByChar",match:"\\^\\^",terminator:"\\^\\^",element:"sup",handler:Wikifier.formatterHelpers.charFormatHelper},{name:"monospacedByChar",match:"\\{\\{\\{",lookahead:"\\{\\{\\{((?:.|\\n)*?)\\}\\}\\}",handler:function(a){var b=RegExp(this.lookahead,"gm");b.lastIndex=a.matchStart;(b=b.exec(a.source))&&b.index===a.matchStart&&(insertElement(a.output,"code",null,null,b[1]),a.nextMatch=b.index+b[0].length)}},{name:"styleByChar",match:"@@",terminator:"@@",lookahead:"(?:([^\\(@]+)\\(([^\\)]+)(?:\\):))|(?:([^:@]+):([^;]+);)",handler:function(a){var b=insertElement(a.output,"span",null,null,null),c=Wikifier.formatterHelpers.inlineCssHelper(a);if(0==c.length)b.className="marked";else for(var d=0;d<c.length;d++)b.style[c[d].style]=c[d].value;a.subWikify(b,this.terminator)}},{name:"emdash",match:"--",handler:function(a){insertText(a.output,"\u2014")}},{name:"lineContinuation",match:"\\\\[\\s\\u00a0\\u2028\\u2029]*?(?:\\n|$)",handler:function(a){a.nextMatch=a.matchStart+a.matchLength}},{name:"lineBreak",match:"\\n|<br ?/?>",handler:function(a){insertElement(a.output,"br")}},{name:"rawText",match:'"{3}|<nowiki>',lookaheadRegExp:/(?:\"{3}|<nowiki>)((?:.|\n)*?)(?:\"{3}|<\/nowiki>)/gm,handler:function(a){this.lookaheadRegExp.lastIndex=a.matchStart;var b=this.lookaheadRegExp.exec(a.source);b&&b.index===a.matchStart&&(insertElement(a.output,"span",null,null,b[1]),a.nextMatch=this.lookaheadRegExp.lastIndex)}},{name:"htmlTag",match:"<\\w+(?:\\s+[^\\u0000-\\u001F\\u007F-\\u009F\\s\"'>\\/=]+(?:\\s*=\\s*(?:\"[^\"]+\"|'[^']+'|[^\\s\"'=<>`]+))?)*\\s*\\/?>",tagPattern:"<(\\w+)",voidElements:"area base br col embed hr img input keygen link menuitem meta param source track wbr".split(" "),handler:function(a){var b=RegExp(this.tagPattern).exec(a.matchText);if(b=b&&b[1]){var c=-1!==this.voidElements.indexOf(b.toLowerCase()),d,e;c||(d="<\\/"+b+"\\s*>",e=RegExp(d,"gm"),e.lastIndex=a.matchStart,e=e.exec(a.source));if(c||e){b=document.createElement(a.output.tagName);for(b.innerHTML=a.matchText;b.firstChild;)b=b.firstChild;e&&a.subWikify(b,d);a.output.appendChild(b)}else throwError(a.output,'HTML tag "'+b+'" is not closed')}}}];function Macros(){return Object.defineProperties({tags:{},definitions:{},add:function(a,b,c){if(Array.isArray(a))a.forEach(function(a){this.add(a,b,c)},this);else{if(this.has(a))throw Error("cannot clobber existing macro <<"+a+">>");if(this.tags.hasOwnProperty(a))throw Error("cannot clobber child tag <<"+a+">> of parent macro"+(1===this.tags[a].length?"":"s")+" <<"+this.tags[a].join(">>, <<")+">>");try{if("object"===typeof b)this.definitions[a]=c?clone(b,!0):b;else if(this.has(b))this.definitions[a]=c?clone(this.definitions[b],!0):this.definitions[b];else throw Error("cannot create alias of nonexistent macro <<"+b+">>");Object.defineProperty(this.definitions,a,{writable:!1});this.definitions[a]._USE_MACROS_API=!0}catch(d){if("TypeError"===d.name)throw Error("cannot clobber protected macro <<"+a+">>");throw Error("unknown error when attempting to add macro <<"+a+">>: ["+d.name+"] "+d.message);}if(this.definitions[a].hasOwnProperty("tags"))if(null==this.definitions[a].tags)this.registerTags(a);else if(Array.isArray(this.definitions[a].tags))this.registerTags(a,this.definitions[a].tags);else throw Error('bad value for "tags" property of macro <<'+a+">>");}},remove:function(a){if(Array.isArray(a))a.forEach(function(a){this.remove(a)},this);else if(this.definitions.hasOwnProperty(a)){this.definitions[a].hasOwnProperty("tags")&&this.unregisterTags(a);try{Object.defineProperty(this.definitions,a,{writable:!0}),delete this.definitions[a]}catch(b){throw Error("unknown error removing macro <<"+a+">>: "+b.message);}}else if(this.tags.hasOwnProperty(a))throw Error("cannot remove child tag <<"+a+">> of parent macro <<"+this.tags[a]+">>");},has:function(a,b){return this.definitions.hasOwnProperty(a)||b&&this.tags.hasOwnProperty(a)},get:function(a){var b=null;this.definitions.hasOwnProperty(a)&&"function"===typeof this.definitions[a].handler?b=this.definitions[a]:this.hasOwnProperty(a)&&"function"===typeof this[a].handler&&(b=this[a]);return b},getHandler:function(a,b){var c=this.get(a);b||(b="handler");return c&&c.hasOwnProperty(b)&&"function"===typeof c[b]?c[b]:null},eval:function(a,b,c){try{var output=b;return eval("(function(){"+a+"}());"),!0}catch(d){return b?throwError(b,"<<"+c+">>: bad expression: "+d.message):!1}},registerTags:function(a,b){if(!a)throw Error("no parent specified");Array.isArray(b)||(b=[]);for(var c=[].concat(["/"+a,"end"+a],b),d=0;d<c.length;d++){var e=c[d];if(this.definitions.hasOwnProperty(e))throw Error("cannot register tag for an existing macro");this.tags.hasOwnProperty(e)?-1===this.tags[e].indexOf(a)&&(this.tags[e].push(a),this.tags[e].sort()):this.tags[e]=[a]}},unregisterTags:function(a){if(!a)throw Error("no parent specified");for(var b in this.tags){var c=this.tags[b].indexOf(a);-1!==c&&(1===this.tags[b].length?delete this.tags[b]:this.tags[b].splice(c,1))}},init:function(){for(var a in this.definitions){var b=this.getHandler(a,"init");b&&b.call(this.definitions[a],a)}for(a in this)(b=this.getHandler(a,"init"))&&b.call(this[a],a)},lateInit:function(){for(var a in this.definitions){var b=this.getHandler(a,"lateInit");b&&b.call(this.definitions[a],a)}for(a in this)(b=this.getHandler(a,"lateInit"))&&b.call(this[a],a)}},{tags:{writable:!1,enumerable:!1,configurable:!1},definitions:{writable:!1,enumerable:!1,configurable:!1},add:{writable:!1,enumerable:!1,configurable:!1},remove:{writable:!1,enumerable:!1,configurable:!1},has:{writable:!1,enumerable:!1,configurable:!1},get:{writable:!1,enumerable:!1,configurable:!1},getHandler:{writable:!1,enumerable:!1,configurable:!1},eval:{writable:!1,enumerable:!1,configurable:!1},registerTags:{writable:!1,enumerable:!1,configurable:!1},unregisterTags:{writable:!1,enumerable:!1,configurable:!1},init:{writable:!1,enumerable:!1,configurable:!1},lateInit:{writable:!1,enumerable:!1,configurable:!1}})}function registerMacroTags(a,b){return macros.registerTags(a,b)}function evalMacroExpression(a,b,c){return macros.eval(a,b,c)}function addStandardMacros(){macros.add("actions",{version:{major:2,minor:2,revision:0},handler:function(){var a=insertElement(this.output,"ul");a.classList.add(this.name);state.active.variables["#actions"]||(state.active.variables["#actions"]={});for(var b=0;b<this.args.length;b++){var c,d,e;"object"===typeof this.args[b]?(c=this.args[b].text,d=this.args[b].link,e=this.args[b].setFn):c=d=this.args[b];state.active.variables["#actions"][d]||(c=Wikifier.createInternalLink(insertElement(a,"li"),d,c,function(a,b){return function(){state.active.variables["#actions"][a]=!0;"function"===typeof b&&b()}}(d,e)),c.classList.add("link-"+this.name))}}});macros.add(["back","return"],{version:{major:4,minor:1,revision:0},handler:function(){var a=1,b,c,d=this.name[0].toUpperCase()+this.name.slice(1),e;1===this.args.length&&"object"===typeof this.args[0]&&(1===this.args[0].count?(this.args.push(this.args[0].link),this.args[0]="to"):(this.args.push("to"),this.args.push(this.args[0].link),this.args[0]=this.args[0].text));if(1===this.args.length)c=this.args[0];else if(0!==this.args.length){3===this.args.length&&(c=this.args.shift());var f=config.historyMode!==modes.sessionHistory?state.length:state.active.sidx+1;if("go"===this.args[0]){if(isNaN(this.args[1])||1>this.args[1])return this.error('the argument after "go" must be a whole number greater than zero');a=this.args[1]<f?this.args[1]:f-1;b=state.peek(a).title;d+=" (go "+a+")"}else if("to"===this.args[0]){"object"===typeof this.args[1]&&(this.args[1]=this.args[1].link);if(!tale.has(this.args[1]))return this.error('the "'+this.args[1]+'" passage does not exist');if("return"===this.name)b=this.args[1],d+=' (to "'+b+'")';else for(var g=f-1;0<=g;g--)if(state.history[g].title===this.args[1]){a=f-1-g;b=this.args[1];d+=' (to "'+b+'")';break}if(void 0===b)return this.error('cannot find passage "'+this.args[1]+'" in the current story history')}else return this.error('"'+this.args[0]+'" is not a valid action (go|to)')}void 0===b&&1<state.length&&(b=state.peek(a).title);if(void 0===b)return this.error("cannot find passage");if(0===a)return this.error("already at the first passage in the current story history");e=document.createElement("a");e.classList.add("link-"+this.name);0<a&&$(e).click(function(){return"back"===this.name?config.historyMode===modes.hashTag||config.disableHistoryControls?function(){for(;0<a;)state.isEmpty||state.pop(),a--;state.activate(state.top);state.display(b,e,"back")}:function(){1<state.length&&window.history.go(-a)}:function(){state.display(b,e)}}.call(this));insertText(e,c||this.self.dtext||d);this.output.appendChild(e)},linktext:function(){0===this.args.length?delete this.self.dtext:this.self.dtext=this.args[0]}},!0);macros.add("choice",{version:{major:4,minor:0,revision:0},handler:function(){if(0===this.args.length)return this.error("no passage specified");var a,b,c,d=state.active.title;1===this.args.length?"object"===typeof this.args[0]?(a=this.args[0].text,b=this.args[0].link,c=this.args[0].setFn):a=b=this.args[0]:(b=this.args[0],a=this.args[1]);if(!state.active.variables.hasOwnProperty("#choice"))state.active.variables["#choice"]={};else if(state.active.variables["#choice"][d]){insertElement(this.output,"span",null,"link-disabled link-"+this.name,a);return}Wikifier.createInternalLink(this.output,b,a,function(){state.active.variables["#choice"][d]=!0;"function"===typeof c&&c()}).classList.add("link-"+this.name)}});macros.add("link",{version:{major:3,minor:4,revision:0},handler:function(){if(0===this.args.length)return this.error("no link location specified");var a,b,c,d,e;3===this.args.length?e=this.args.pop():2!==this.args.length||"keep"!==this.args[1]&&"remove"!==this.args[1]&&"once"!==this.args[1]||(e=this.args.pop());if(e&&"keep"!==e&&"remove"!==e&&"once"!==e)return this.error('"'+e+'" is not a valid action (keep|remove)');2===this.args.length?(a=this.args[0],b=this.args[1]):"object"===typeof this.args[0]?(a=this.args[0].text,b=this.args[0].link,c=this.args[0].isExternal,d=this.args[0].setFn):a=b=this.args[0];void 0===c&&(c=Wikifier.formatterHelpers.isExternalLink(b));if(e)if(!state.active.variables.hasOwnProperty("#link"))state.active.variables["#link"]={};else if(state.active.variables["#link"][b]){"keep"===e&&insertElement(this.output,"span",null,"link-disabled link-"+this.name,a);return}(c?Wikifier.createExternalLink(this.output,b,a):Wikifier.createInternalLink(this.output,b,a,function(){e&&(state.active.variables["#link"][b]=!0);"function"===typeof d&&d()})).classList.add("link-"+this.name)}});macros.add("display",{version:{major:3,minor:1,revision:0},handler:function(){if(0===this.args.length)return this.error("no passage specified");var a;a="object"===typeof this.args[0]?this.args[0].link:this.args[0];if(!tale.has(a))return this.error('passage "'+a+'" does not exist');var b=this.output;a=tale.get(a);this.args[1]&&(b=insertElement(b,this.args[1],null,a.domId),b.setAttribute("data-passage",a.title));new Wikifier(b,a.processText())}});macros.add("nobr",{version:{major:1,minor:1,revision:0},skipArgs:!0,tags:null,handler:function(){new Wikifier(this.output,this.payload[0].contents.replace(/\n/g," "))}});macros.add("print",{version:{major:2,minor:0,revision:0},skipArgs:!0,handler:function(){try{var a=eval(this.args.full);null==a||"number"===typeof a&&isNaN(a)||new Wikifier(this.output,a.toString())}catch(b){return this.error("bad expression: "+b.message)}}});macros.add("silently",{version:{major:4,minor:0,revision:0},skipArgs:!0,tags:null,handler:function(){var a=document.createElement("div"),b=[];for(new Wikifier(a,this.payload[0].contents.trim());a.hasChildNodes();){var c=a.firstChild;c.classList&&c.classList.contains("error")&&b.push(c.textContent);a.removeChild(c)}"function"===typeof a.remove&&a.remove();if(0<b.length)return this.error("error"+(1===b.length?"":"s")+" within contents ("+b.join("; ")+")")}});macros.add("if",{version:{major:3,minor:0,revision:1},skipArgs:!0,tags:["elseif","else"],handler:function(){try{for(var a=0,b=this.payload.length;a<b;a++){if("else"===this.payload[a].name&&0!==this.payload[a].arguments.length)throw Error("<<else>> does not accept an expression (perhaps you meant to use <<elseif>> instead), invalid: "+this.payload[a].arguments);if("else"===this.payload[a].name||eval(Wikifier.parse(this.payload[a].arguments))){new Wikifier(this.output,this.payload[a].contents);break}}}catch(c){return this.error("bad conditional expression: "+c.message)}}});macros.add("set",{version:{major:3,minor:0,revision:0},skipArgs:!0,handler:function(){macros.eval(this.args.full,this.output,this.name)}});macros.add("unset",{version:{major:2,minor:0,revision:0},skipArgs:!0,handler:function(){for(var a=this.args.full,b=/state\.active\.variables\.(\w+)/g,c;null!==(c=b.exec(a));)c=c[1],state.active.variables.hasOwnProperty(c)&&delete state.active.variables[c]}});macros.add("remember",{version:{major:3,minor:0,revision:0},skipArgs:!0,handler:function(){var a=this.args.full;if(macros.eval(a,this.output,this.name)){for(var b=storage.getItem("remember")||{},c=/state\.active\.variables\.(\w+)/g,d;null!==(d=c.exec(a));)d=d[1],b[d]=state.active.variables[d];if(!storage.setItem("remember",b))return this.error("unknown error, cannot remember: "+this.args.raw)}},init:function(){var a=storage.getItem("remember");if(a)for(var b in a)state.active.variables[b]=a[b]}});macros.add("forget",{version:{major:1,minor:0,revision:0},skipArgs:!0,handler:function(){for(var a=this.args.full,b=/state\.active\.variables\.(\w+)/g,c,d=storage.getItem("remember"),e=!1;null!==(c=b.exec(a));)c=c[1],state.active.variables.hasOwnProperty(c)&&delete state.active.variables[c],d&&d.hasOwnProperty(c)&&(e=!0,delete d[c]);if(e&&!storage.setItem("remember",d))return this.error("unknown error, cannot update remember store")}});macros.add("run","set");macros.add("script",{version:{major:1,minor:0,revision:0},skipArgs:!0,tags:null,handler:function(){macros.eval(this.payload[0].contents.trim(),this.output,this.name)}});macros.add("click",{version:{major:3,minor:0,revision:0},tags:null,handler:function(){if(0===this.args.length)return this.error("no link text specified");var a,b,c=function(){var a;this.context&&state.active.variables.hasOwnProperty("args")&&this.contextHas(function(a){return a.self.isWidget})&&(a=state.active.variables.args);return a}.call(this),d=document.createElement("a");"object"===typeof this.args[0]?(a=this.args[0].text,b=this.args[0].link):(a=this.args[0],b=1<this.args.length?this.args[1]:void 0);d.classList.add("link-"+(b?tale.has(b)?"internal":"broken":"internal"));d.classList.add("link-"+this.name);insertText(d,a);$(d).click(function(a,c,g){return function(){""!==c&&(void 0!==g&&(state.active.variables.hasOwnProperty("args")&&(a.hasOwnProperty("_argsStack")||(a._argsStack=[]),a._argsStack.push(state.active.variables.args)),state.active.variables.args=g),new Wikifier(document.createElement("div"),c),void 0!==g&&(delete state.active.variables.args,a.hasOwnProperty("_argsStack")&&(state.active.variables.args=a._argsStack.pop(),0===a._argsStack.length&&delete a._argsStack)));void 0!==b&&state.display(b,d)}}(this.self,this.payload[0].contents.trim(),c));this.output.appendChild(d)}});macros.add("textbox",{version:{major:1,minor:1,revision:0},handler:function(){if(0===this.args.length)return this.error("no $variable name specified");var a=this.args[0].replace("$",""),b=Util.slugify(a),c=1<this.args.length?this.args[1]:void 0,d=document.createElement("input");d.type="text";d.id="textbox-"+b;"undefined"!==typeof state.active.variables[a]&&(d.value=state.active.variables[a]);$(d).change(function(){state.active.variables[a]=this.value}).keypress(function(a){13===a.which&&(a.preventDefault(),$(this).change(),"undefined"!==typeof c&&state.display(c,this))});this.output.appendChild(d)}});macros.add(["addclass","toggleclass"],{version:{major:2,minor:0,revision:0},protect:!0,handler:function(){if(2>this.args.length){var a=[];1>this.args.length&&a.push("selector");2>this.args.length&&a.push("class names");return this.error("no "+a.join(" or ")+" specified")}a=$(this.args[0]);if(0===a.length)return this.error('no elements matched the selector "'+this.args[0]+'"');switch(this.name){case "addclass":a.addClass(this.args[1].trim());break;case "toggleclass":a.toggleClass(this.args[1].trim())}}});macros.add("removeclass",{version:{major:1,minor:0,revision:0},handler:function(){if(0===this.args.length)return this.error("no selector specified");var a=$(this.args[0]);if(0===a.length)return this.error('no elements matched the selector "'+this.args[0]+'"');1<this.args.length?a.removeClass(this.args[1].trim()):a.removeClass()}});macros.add(["append","prepend","replace"],{version:{major:2,minor:0,revision:0},tags:null,handler:function(){if(0===this.args.length)return this.error("no selector specified");var a=$(this.args[0]);if(0===a.length)return this.error('no elements matched the selector "'+this.args[0]+'"');"replace"===this.name&&a.empty();if(""!==this.payload[0].contents){var b=document.createDocumentFragment();new Wikifier(b,this.payload[0].contents);switch(this.name){case "replace":case "append":a.append(b);break;case "prepend":a.prepend(b)}}}});macros.add("remove",{version:{major:1,minor:0,revision:0},handler:function(){if(0===this.args.length)return this.error("no selector specified");var a=$(this.args[0]);if(0===a.length)return this.error('no elements matched the selector "'+this.args[0]+'"');a.remove()}});macros.add("widget",{version:{major:2,minor:0,revision:0},tags:null,handler:function(){if(0===this.args.length)return this.error("no widget name specified");var a=this.args[0];if(macros.has(a)){if(!macros.get(a).isWidget)return this.error('cannot clobber existing macro "'+a+'"');macros.remove(a)}try{macros.add(a,{version:{major:1,minor:0,revision:0},isWidget:!0,handler:function(a){return function(){try{state.active.variables.hasOwnProperty("args")&&(this.self.hasOwnProperty("_argsStack")||(this.self._argsStack=[]),this.self._argsStack.push(state.active.variables.args));state.active.variables.args=[];for(var b=0,e=this.args.length;b<e;b++)state.active.variables.args[b]=this.args[b];state.active.variables.args.raw=this.args.raw;state.active.variables.args.full=this.args.full;var f=document.createDocumentFragment(),g=document.createElement("div"),b=[];for(new Wikifier(g,a);g.hasChildNodes();){var h=g.firstChild;h.classList&&h.classList.contains("error")&&b.push(h.textContent);f.appendChild(h)}if(0===b.length)this.output.appendChild(f);else return this.error("error"+(1===b.length?"":"s")+" within widget contents ("+b.join("; ")+")")}catch(k){return this.error("cannot execute widget: "+k.message)}finally{delete state.active.variables.args,this.self.hasOwnProperty("_argsStack")&&(state.active.variables.args=this.self._argsStack.pop(),0===this.self._argsStack.length&&delete this.self._argsStack)}}}(this.payload[0].contents)})}catch(b){return this.error('cannot create widget macro "'+a+'": '+b.message)}}});macros.add(["optiontoggle","optionlist"],{version:{major:2,minor:0,revision:0},tags:["onchange"],handler:function(){if(0===this.args.length)return this.error("no option property specified");if("optionlist"===this.name&&2>this.args.length)return this.error("no list specified");var a=this.args[0],b=Util.slugify(a),c=document.createElement("div"),d=document.createElement("div"),e=document.createElement("div");c.appendChild(d);c.appendChild(e);c.id="option-body-"+b;d.id="option-label-"+b;e.id="option-control-"+b;new Wikifier(d,this.payload[0].contents.trim());var f=2===this.payload.length?this.payload[1].contents.trim():"";options.hasOwnProperty(a)||(options[a]=void 0);switch(this.name){case "optiontoggle":var g=1<this.args.length?this.args[1]:void 0,h=document.createElement("a");void 0===options[a]&&(options[a]=!1);options[a]?(insertText(h,g||"On"),h.classList.add("enabled")):insertText(h,g||"Off");$(h).click(function(){return function(b){removeChildren(h);options[a]?(insertText(h,g||"Off"),h.classList.remove("enabled"),options[a]=!1):(insertText(h,g||"On"),h.classList.add("enabled"),options[a]=!0);macros.get("saveoptions").handler();""!==f&&new Wikifier(document.createElement("div"),f)}}());break;case "optionlist":d=this.args[1];h=document.createElement("select");Array.isArray(d)||(d=options.hasOwnProperty(d)?options[d]:d.trim().split(/\s*,\s*/));void 0===options[a]&&(options[a]=d[0]);for(var k=0;k<d.length;k++){var m=document.createElement("option");insertText(m,d[k]);h.appendChild(m)}h.value=options[a];$(h).change(function(){return function(b){options[a]=b.target.value;macros.get("saveoptions").handler();""!==f&&new Wikifier(document.createElement("div"),f)}}())}h.id="option-input-"+b;e.appendChild(h);this.output.appendChild(c)}});macros.add("optionbar",{version:{major:3,minor:0,revision:0},handler:function(){var a=document.createElement("ul"),b=document.createElement("li"),c=document.createElement("li");a.appendChild(b);a.appendChild(c);b.appendChild(insertElement(null,"button","options-ok","ui-close","OK"));c.appendChild(insertElement(null,"button","options-reset","ui-close","Reset to Defaults"));$("button",c).click(function(a){macros.get("deleteoptions").handler();window.location.reload()});this.output.appendChild(a)}});macros.add("saveoptions",{version:{major:2,minor:0,revision:0},handler:function(){return storage.setItem("options",options)},init:function(){var a=storage.getItem("options");if(null!==a)for(var b in a)options[b]=a[b]}});macros.add("deleteoptions",{version:{major:2,minor:0,revision:0},handler:function(){options={};if(!storage.removeItem("options"))return this.error("unknown error, cannot update options store")}});macros.add("bind","click");macros.add("class",{version:{major:2,minor:2,revision:0},tags:null,handler:function(){var a=insertElement(this.output,this.args[1]||"span",null,this.args[0]||"");new Wikifier(a,this.payload[0].contents)}});macros.add("classupdate",{version:{major:1,minor:0,revision:0},handler:function(){if(3>this.args.length){var a=[];1>this.args.length&&a.push("element ID");2>this.args.length&&a.push("action");3>this.args.length&&a.push("class names");return this.error("no "+a.join(" or ")+" specified")}var a="body"===this.args[0]?document.body:document.getElementById(this.args[0]),b=this.args[1],c=this.args[2].trim().split(/\s+/);if(!a)return this.error('element with ID "'+this.args[0]+'" does not exist');if("add"!==b&&"remove"!==b&&"toggle"!==b)return this.error('"'+b+'" is not a valid action (add|remove|toggle)');for(var d=0;d<c.length;d++)switch(b){case "add":a.classList.add(c[d]);break;case "remove":a.classList.remove(c[d]);break;case "toggle":a.classList.toggle(c[d])}}});macros.add("id",{version:{major:2,minor:2,revision:0},tags:null,handler:function(){var a=insertElement(this.output,this.args[1]||"span",this.args[0]||"");new Wikifier(a,this.payload[0].contents)}});macros.add("runjs",{version:{major:3,minor:0,revision:0},skipArgs:!0,handler:function(){macros.eval(this.args.raw,this.output,this.name)}});macros.add("update",{version:{major:2,minor:0,revision:0},tags:null,handler:function(){if(0===this.args.length)return this.error("no element ID specified");var a=document.getElementById(this.args[0]),b=this.args[1];if(!a)return this.error('element with ID "'+this.args[0]+'" does not exist');if(b&&"append"!==b&&"prepend"!==b&&"replace"!==b)return this.error('"'+b+'" is not a valid action (append|prepend|replace)');switch(b){case "prepend":b=document.createDocumentFragment();new Wikifier(b,this.payload[0].contents);a.insertBefore(b,a.firstChild);break;case "append":new Wikifier(a,this.payload[0].contents);break;default:removeChildren(a),new Wikifier(a,this.payload[0].contents)}}})};
}());
</script>
<style type="text/css">
/* Loading screen styling */
body > #loading-screen { display: none; z-index: 100000; position: fixed; top: 0px; left: 0px; height: 100%; width: 100%; color: #fff; background-color: #111; text-align: center; }
body > #loading-screen p { font-family: verdana,"dejavu sans",tahoma,arial,sans-serif; font-size: 2em; font-weight: bold; font-style: italic; }
html.loading body > #loading-screen { display: block; }
html.loading body > #ui-bar, html.loading body > #passages { display: none; }

@font-face
{
	font-family: 'icomoon-sugarcube';
	src: url(data:application/font-woff;charset=utf-8;base64,d09GRk9UVE8AABEkAAsAAAAAHHgAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABDRkYgAAABCAAADeQAABb40HwEm0ZGVE0AAA7sAAAAGgAAABxmn3O0R0RFRgAADwgAAAAdAAAAIABOAARPUy8yAAAPKAAAAEsAAABgL9zcQGNtYXAAAA90AAAAPQAAAVLgMPLNaGVhZAAAD7QAAAAuAAAANv41RT9oaGVhAAAP5AAAAB4AAAAkBBD/5GhtdHgAABAEAAAAHgAAAEgEkACpbWF4cAAAECQAAAAGAAAABgAhUABuYW1lAAAQLAAAAOsAAAIHCW+4AnBvc3QAABEYAAAADAAAACAAAwAAeJyNWAl0lEUS7j9OZoYkThLIIGcCCASYABkIQkQQMHIFEWEERBQEvBgE1ImrnAIRlB+E1QmycoiRS8IqizHgystjMRwyHgkEQcK94ALBAJrNPzBDar/qngxR43v7Jq+6u7q76qvq6ur6owmTSWiaVv/5idNemDZtaseXs5596qWJWROeFlqE0ERvf88I/313+BuZ9Jg79BhTYpRoPKI+6Xq4E2NZPNmf48+KbKblxTYTIq6ZdiW+mYhpZo+oL1qxDKuIFQ1Fc9FaOEQXkS76iAFiqHhUjBUTxWTxonhVzBULxVLhFatErvhYbBM7RKHYK74Rh8VxcVb8ot2RNfX5/qmpqWgeDDdO1XRRTVfVpKmmm2ruUU131fRQTbpq+qqmn2oeUE2Gah5UTX/ZOJU+p9LnVPqcSp9T6XMqfU6lz6n0OZU+p9LnVPqcSp9T6XMqfc4H/+D9Px6HENoi7U3tLW2xpmtLtKXa29oybbn2V+0d7V3Nq+VoK7T3tJXa37T3tVXaam2Ntlb7QFunfajlah9p67UN2kbRkk8jQsSIUi3N1NDU0bTBtNd0wnQxcnDkqMjtZpu5o3moOcucYzYsvSyBesOix9xpjm0VOyz2qzgtLil+RPwz8Xr9Ypvu95iCXr/XYvNnG/l2EtYfTCQs7YNEfvTIaB9MclhkG+LUsBMDGYEMc50zjtpsKYzFJhnYYKlzptxSS3GYnWhkGNBQ10y5uU6kkG8z1pvq3OL31L3nT6wLeuo2wkZawLWLREbeG/CWttVKVD1iJ3rd5qMXvY+E2LeZ6Fb5QhIRSXOIbj58GhNfQ9CN0UeIAi/YJMG+gnXZTPpFMuOd0NSN0aVYfrA3b1zLImaFhEmx1TFWVjWPlXpYfT3IoepXMK0B76S/20isGtFV9WjS1m8hm2gWk9lM5jApDJPZLKcAxJXO4Bey5rmsD8AofbTCQLfOYHjjsdGseQ9gTvmWhOmdX6QF/UgMGjdbWhArucpWYd7kYPCFJCK3tWTwlzFMmKnAC60yHSRvH1swGLOiH5MFYdI3TLKtbFAaEw8b9A16w6+xzTvZ5oGRDP7emoMAeMguVOChbwaDX8AYWrDmr4Br42WGeT1kAcAXMtkdqcCDbONFm7H8HhNvXM8i+rEw9mL6+wo8VM1hpYOkequEEgK1avgvtYBK3PJwFFrsWVJjeuUsFTYSKFz0DOuboM5cYpBxoJwaeGGYRDuHnb5Qor2mIkYCVWEjD+rmw2cUUBxjhgIq4xIn7ZfHHYoYiRZx8k4Y7VTZi7T5M/xp9rKegVL8XIarrMwwBUyR0LRvx1IS9raX7aSlz91NWtqysURrOEyfarWcqH3qR0Qp8C2t+tdAEhO2zFWztPbkdCC+J2VwQxIp2WNIOErakZjUG/rXPNqHxA/fjyVxmG1JyV5NVNq5CVUH+UDFnocAx2NqEeX35NlbRhmVfpPdlxnw4JdmpPl85Y7fzJcblfaA18DPUpttM7x+j71VVNBlujvKYbhwcdNuVQJGREyIyGGYR6XokY97vvCwDl54b+JvNCBFzKoY6YaWJWPgm/fyq4nOdelE4tcGfqquzD6F47JMseokZnVeG3CxjwMujOZceg1uOj1eIA56fUZU5cb5TTjxM9H+u+sTrQxctMJFC+KvQBXRy+tPEj2XGUGi+XcjiWKuWEmLnnEGkeP3QjYtKJ5gSMkGZNO8hotwVVqsEwiQPctI1PMih61pVUKix8lUEs+aGllthsfErtPhWq8uc0TAhTMQ/XSw4Gev4YF3A17dSAOR19ZwESQW6mAhQDRwGBuzsDAN+7wQwQt1xUzTI+EqtzokzIO6pCZdKjJ4vtzvsvsTgviZjco8u8FhWGrJzERPz3MHE3Tdn5DnhqdWrFuAoBs3G844VHiTRMe+uGXjIE2MF5pKr7gxs2C/zoaExrNhiQsofZl60BX0Qpo30vBm2gMJPiPBYkCtXSft6dnbiS7MhmuazB9KdHx+MTshkM+WunU9mMB2+DmSlk5YTuKlNdOJuEfoJcGYz976J9Gp13ALv3zyC6KDPyKZlty1FDF9ZMvuLwE++UQFibs7rSTRuM14El1ffQQuSn/sLtDJ9bB3izWfxKNV/YlyjCEQePDmWdBi5Ee6PO8g0ck+uOsn+5qRFQYUNSLa2SsVQaTzgQwOXCT6PKIYWjqNMEA4Qd5fDQ8121xFov8/knUcdilpK/J3wYCxC58hOp+1h8QDjHfLQ6VQ9P6iT4A1exCQrCroHyJymD0oyEMkx0kYipkF/ROB+elXh/P+MmDensIy25Bourg3ZOyKzMUL+/OFXLykjRsSXR3zJFHl9m1E11dXhMjZ/Z+EyNXHJxEdLbkCCEcecClKIm79asklkdhjuFqJ3iOhXruOh9VG0WFXhV5D23U8pDbKPb8ncqJdpwS5fKtVNSxlo2Sz5CkhbYxQ2CYUK+gi+qFhyhxh+emyFa/c0gfPI559nHNIO3QhkcQnZwRXUqduEl3LxWWL8ewi+hWnImwTj6GqKHoMfvn2U+TpzcfP4VqWdBqJOOOXt2gqVF9LvorYQ2hQyZJ6WJ7cATx+zwOHOgFEH34ioyPQe2UR5KwaNwsvP+08QqLbOU5MC/F4OVa+i5B55hIcWNHvTtCrT/yK/T3Avb71O8jceFlCOE1iVJvxHCirO+DA2l6CZ+LwVvact5ghAFYnD147I6GaROyLV2BFFh7RGNtxyFlwFDbeNxkB2OXh23KO4wJesEBYzx1DsOcQntMmJ7ZiYhHCwno9GbxZmDU53oCqq3gc6CQSaVz+DMiZ9KEsV6pBvz5TBCtW4GUrbYFr261oNfwaf2QPDiqu4E3sLwUiG6dKq3wZuwxrwd5cx97sPgTxfBHlwtVjOL4iAAIERFnJa3fB6I5NzkF81jycUDonDLzLQPd8Dyav8bAPTwywMkXglqx4k2cQ+PuQY0B2Mq9/iIR5WBJk3iIpNRFvqJEADSmdjuOWl7QlOsHnebjkOZDiCzyEC090bsq8tiFyQi7GrEjp3BRJRJj4aRVjmqF3L4jYhHrC1ELAiHZzZ5Nw7+bS8brnXoRH5Uyi8rXINFUfvkV0yf2GbmWpySz1x9tSGdFKRpTM5Dke/phEoqF3JtQlPDWA9+Pptun7WSafydHXF7CmbD6Z0XFSP3obzktMCqO1lp2KyGFt24//3s4wL5HRLtQZPbxY78lXlEUiNnqhtBNVl/f+QkSW2OxEBJ/BiYvHytDbex6bAtsmKApMG9tILnqjvkfvdKFEP79mv00/wFL3s50DWdNf2O4ZSIV42JDI6YNh63GRqhsjB15y4HrdbIOUdZlr8qqrqHOuLLoGgb2qb8Louy1IVS+fhafPVKLG9N+H6Po3eELy9h/apsNd51Bq0jHOxYc3wur/tEaW/u7JNJ1pN9DD7MRGZZg/twm5JhlPsNqrZNGSxL+wfNTMlq/qK52CeRJDpEIlGrwap5AKu6y9G6PubVhabZXm5OEl3JCIGI+owE1uPeo7XN0quKKlA98TDfguNlk9BUs/tTig9IR/OCvAKSRF43Ja9hTjwQCPJG/UqCidT+GlaSCjfwB5uQBk5AHudQUZ9TZREDWJqLe7D4Ck4CMhKqsIzoo6VwyadnYxcuzNcyCn8LnSLZJfDUWZS0daLg59lvgSC4Dmv81TWcoS9BbjYyi4AYFSdX8ha8PNps35CgF6lYwKiZE2pVgVToUbhzGQbcFXjb9XqrKPmAd7U9iWBtdxLBcmutgruMunSmcoT1HZ5i5W5Tqbz5Tp9/osQReus8NXbslDG/D4DI8lzxEqGfIQPYFSn1FqCVeBk/A6vsSh+kSLGiKHTCi3ZoKWhkluzcRtnlqSG9qW5DbO2zN9PktewGvPcxsJDneew+2GSg8Q8YSPqzNXJsoTsyNTd/v0cvzBynh8YSHp4zPLxp96FSMKEh1l9tZRX5rayMI4I9R3ByqlnEzDCzk+w8XmkLb8Iy5ytk7eTdXLxm6l6k0dXmffgcHVD1UacDdTOHlZE7wU6/ZCW/NKRFWbVxZR9ZAXtyBUr/b1Icp78gPYuxuuwgZUPK3aXkaO0rZvmmLmwWadJ1FQNBqzjjf0R11b1EiKOUDaZ2+PjGTh+Gyy8SPHCoVl+k8KgBVVIUDGf4wPT9tIU4jIYZhH19GjCu5VhId18MJ7E/NkVqhgp12v8SEPk3IcO/ScP3EtqlcPCtWg18wfKKgYURcbCfieAs91mwe/e+3uQH4wweJ2636XrK7z7Vy+oXKLkYSfMv6e5/KNdkcMRVR/jGfoi6ErObffrjhryk5FbpeiXJkitw/hYkpkXMSFaXnsXYi7ArzdcvpAxvdH4cUOrRtB062uMCD4/Wn0uEgLch4L+n8AuYFh2a7JTNzYcqAKqdDiIPpmB5+8oswVDfxHeFF7ZBrUbOht5d5RtVykdud72XVglaJqOXPVcpBjarkayokG/lK1xVqzk9mQl6LWsw6YsfO+dpKwExN0+5KYqGYipoEw83/I6ol4MVF8rr2pHfd7g/iZo/0u1P0uS3Rdpfuf+5XCi0WNc0PDGl5SNJfuQa7aTSEih0xoS80E5YTJlpqJ2zy1ZEtoG0vsvqwJZ8+eG/EWPYHPkeRBPfCqFByo3bPnojj1FY3BSRyY/pOkF9RycB9Xi35DvpbLeUnnWlt0xYW4ErUIKrqHez3UckDZoDOsplbZNFHrJUK5Xi6t1ZMTjJD36Nbo/zd063KxIrePQn5tRf8PlqV0RnicY2BgYGQAgpOd+YYg+lw3kyOMBgA8PwUsAAB4nGNgZGBg4ANiCQYQYGJgBEIFIGYB8xgABaoAUwAAAHicY2BmYmCcwMDKwMHow5jGwMDgDqW/MkgytDAwMDGwMjPAgQCCyRCQ5prC4PCA4QMD44P/Dxj0GB8wKDQwMDDCFSgAISMAEEIMHwB4nGNgYGBmgGAZBkYGEPAB8hjBfBYGAyDNAYRMIIkHch8Y/v8HsxggLAUmAUaoLjBgZGNA5o5IAADrtAjMAAAAeJxjYGRgYADild0rzsfz23xl4GZiAIFz3UyOCPr/AyYGxgdALgcDWBoAMdIKXgAAeJxjYGRgYHzw/wGDHhMDA8M/BiAJFEEBzABt5wP2AAB4nGNigAAmBqxAgcEAiQ0hOdHUJDA4MDAAABelAT4AAAAAUAAAIQAAeJydj81Kw0AUhb9pk0LRTV3oNhS3iTMRXNR9F66lq4K0IYQsmoFJ8yo+iG/km3gSZyEoCB243I9zz/0Z4Jp3DOMzrLiPPGPJS+Q5BR+RE1YmjZxyZR4iL6S/yWmSpZT11DXyjBueIs/Z8xo5keczcsqtuYu8YG2eaanwnBSejpyegYYDQfrAkRrayp+87/J+aA6hGo6S/nD9qG6nWecpB/lqMkr9zCpvFP/v/PaVOFWd+nKxFT1quO/OWx+aOisLm22yX9dJK13ubF5aJ/9lH9xJD/K2U1em1eP57OrQt77LXGEvnPwFPSJZ7QB4nGNgZsALAAB9AAQ=) format('woff');
	font-weight: normal;
	font-style: normal;
}

body { margin: 3.5em 15% 5% 3.5em; color: #fff; background-color: #111; font-family: verdana,"dejavu sans",tahoma,arial,sans-serif; font-size: 12px; }
a { cursor: pointer; color: #46d; }
a:hover { color: #79f; }
a:active { color: #f70; }
a.link-internal, a.link-external, a.link-back, a.link-return { font-weight: bold; text-decoration: none; }
a.link-internal:hover, a.link-external:hover, a.link-back:hover, a.link-return:hover { text-decoration: underline; }
a.link-broken { padding: 3px; color: #000; background-color: red; font-weight: bold; text-decoration: none; }
input, textarea { min-width: 16em; color: #fff; background-color: #444; border: 1px solid #fff; }
input { padding: 2px 3px; }
input:focus, textarea:focus { border: 1px solid #292; }
input:hover, textarea:hover { border: 1px solid #f70; }
noscript { color: red; font-size: 210%; font-weight: bold; }
button
{
	cursor: pointer;
	padding: 4px 6px;
	color: #fff;
	background-color: #36c;
	border: 1px solid #58e;
	-webkit-border-radius: 4px;
	-moz-border-radius: 4px;
	border-radius: 4px;
	text-decoration: none;
	text-shadow: 1px 1px rgba(0, 0, 0, 0.4);
	-webkit-transition-duration: 200ms;
	-moz-transition-duration: 200ms;
	transition-duration: 200ms;
	-webkit-user-select: none;
	-khtml-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	-o-user-select: none;
	user-select: none;
}
button:hover { background-color: #58e; border: 1px solid #7af; }
button:active { background-color: #f70; border: 1px solid #f92; }
.error { margin: 0 12px 0 3px; padding: 3px 5px; color: #000; background-color: red; font-weight: bold; }
.highlight, .marked { color: yellow; font-weight: bold; font-style: italic; }
.transition-in { opacity: 0; }

#store-area { display: none; }

#ui-bar { position: fixed; top: 3.5em; left: 3.5em; width: 14.5em; margin: 0; padding: 0 1.5em 0 0; border-right: 1px solid #fff; }
#ui-bar header, #ui-bar nav, #ui-bar footer { text-align: right; }
#ui-bar header, #ui-bar nav { font-weight: bold; }
#ui-bar nav, #ui-bar footer { margin-top: 3em; }
#ui-bar ul { list-style: none; }
#ui-bar li { margin-bottom: 1em; }
#ui-bar li a { text-decoration: none; }

#story-caption, #menu-story, #menu-rewind, #menu-options, #menu-share { display: none; }
#story-title { margin: 0; font-size: 210%; }
#story-subtitle { font-size: 111%; }
#story-author { font-size: 111%; }
#story-caption { margin-top: 3em; text-align: right; }
#menu-story { line-height: 1.125; }

[data-icon], a.link-back:before, a.link-return:after, a.link-external:after,
#menu-saves a:before, #menu-rewind a:before, #menu-restart a:before, #menu-options a:before, #menu-share a:before,
#ui-body.options a[id|="option-input"]:before, #ui-body.options a[id|="option-input"].enabled:before
{
	font-family: 'icomoon-sugarcube';
	speak: none;
	font-style: normal;
	font-weight: normal;
	font-variant: normal;
	text-transform: none;
	line-height: 1;
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
}
[data-icon]:before { content: attr(data-icon) "\00a0\00a0"; }
a.link-back:before { content: "\e00a\00a0\00a0"; }
a.link-return:after { content: "\00a0\00a0\e00b"; }
#passages a.link-external:after { content: "\00a0\e010"; }
#menu-saves a:before { content: "\e011\00a0\00a0"; }
#menu-rewind a:before { content: "\e012\00a0\00a0"; }
#menu-restart a:before { content: "\e013\00a0\00a0"; }
#menu-options a:before { content: "\e014\00a0\00a0"; }
#menu-share a:before { content: "\e015\00a0\00a0"; }

#credits, #version { margin-top: 1em; color: #999; font-weight: normal; font-size: 71%; }

/* Default menu styling */
body.ui-open { overflow: hidden; }
#ui-overlay
{
	display: none;
	z-index: 1000;
	opacity: 0.8;
	position: fixed;
	top: 0px;
	left: 0px;
	height: 100%;
	width: 100%;
	background-color: #000;
}
#ui-body
{
	display: none;
	z-index: 1100;
	opacity: 1;
	position: fixed;
	overflow: auto;
	min-width: 140px;
	max-width: 90%;
	max-height: 90%;
	color: #fff;
	background-color: #333;
	border: 1px solid #fff;
	text-align: left;
	line-height: 2;
}
#ui-body div
{
	padding: 0.2em;
}
#ui-body hr { height: 1px; border: none; background-color: #fff; }

/* Default menu button styling */
#ui-body > ul > li + li > button
{
	margin-left: 12px;
}

/* General dialog styling */
#ui-body.dialog
{
	min-width: 280px;
	padding: 0.33em 1em 0.66em;
}
#ui-body.dialog > ul { display: block; width: 100%; margin: 0; padding: 0; list-style: none; text-align: left; }
#ui-body.dialog > ul li { display: inline-block; margin: 0; padding: 0.4em 0.4em 0.5em; }

/* Saves menu styling */
#ui-body.saves table
{
	border-spacing: 0;
	min-width: 320px;
	width: 100%;
}
#ui-body.saves tr:nth-child(even)
{
	background-color: #444;
}
#ui-body.saves td
{
	padding: 0.33em 0.33em;
	line-height: 1.2;
}
#ui-body.saves td:first-child
{
	min-width: 1.5em;
	text-align: center;
}
#ui-body.saves .empty
{
	color: #999;
}
#ui-body.saves ul { display: block; margin: 0; padding: 0; list-style: none; white-space: nowrap; }
#ui-body.saves li { display: inline-block; margin: 0; padding: 0.33em 0.33em 0.4em; }
#ui-body.saves > div:not(:first-child) { border-top: 1px solid #fff; }
#saves-import-label { margin: 0 6px; font-weight: bold; }
#saves-import-file { margin: 0 6px 6px; }

/* Rewind & Share menu styling */
#ui-body.share a { display: block; color: #fff; font-weight: normal; text-decoration: none; }
#ui-body.rewind div, #ui-body.share div, #ui-body.share a
{
	padding: 0.15em 0.75em;
	-webkit-user-select: none;
	-khtml-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	-o-user-select: none;
	user-select: none;
}
#ui-body.rewind div:nth-child(even), #ui-body.share div:nth-child(even), #ui-body.share a:nth-child(even)
{
	background-color: #444;
}
#ui-body.rewind div:hover, #ui-body.share div:hover, #ui-body.share a:hover
{
	cursor: pointer;
	color: #fff;
	background-color: #47b;
}
#ui-body.rewind div:active, #ui-body.share div:active, #ui-body.share a:active
{
	background-color: #47b;
}

/* Options menu styling */
#ui-body.options [id|="option-body"] { display: table; width: 100%; }
#ui-body.options div[id|="option-body"] + div[id|="option-body"],
#ui-body.options div[id|="option-body"] + br + div[id|="option-body"]
{
	margin-top: 0.5em;
}
#ui-body.options [id|="option-label"] { display: table-cell; width: 80%; padding: 0.33em 2em 0.4em 0.33em; }
#ui-body.options [id|="option-control"] { display: table-cell; padding: 0.33em 0.33em 0.4em; white-space: nowrap; }
#ui-body.options select[id|="option-input"]
{
	cursor: pointer;
	padding: 3px 6px;
	font-weight: normal;
	color: #fff;
	background-color: #36c;
	border: 1px solid #58e;
	-webkit-border-radius: 4px;
	-moz-border-radius: 4px;
	border-radius: 4px;
	text-decoration: none;
	text-shadow: 1px 1px rgba(0, 0, 0, 0.4);
	-webkit-transition-duration: 200ms;
	-moz-transition-duration: 200ms;
	transition-duration: 200ms;
	white-space: nowrap;
}
#ui-body.options a[id|="option-input"]
{
	cursor: pointer;
	padding: 4px 6px;
	font-weight: normal;
	color: #fff;
	background-color: #36c;
	border: 1px solid #58e;
	-webkit-border-radius: 4px;
	-moz-border-radius: 4px;
	border-radius: 4px;
	text-decoration: none;
	text-shadow: 1px 1px rgba(0, 0, 0, 0.4);
	-webkit-transition-duration: 200ms;
	-moz-transition-duration: 200ms;
	transition-duration: 200ms;
	-webkit-user-select: none;
	-khtml-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	-o-user-select: none;
	user-select: none;
	white-space: nowrap;
}
#ui-body.options a[id|="option-input"]:hover
{
	background-color: #58e;
	border: 1px solid #7af;
	text-decoration: none;
}
#ui-body.options a[id|="option-input"].enabled
{
	background-color: #292;
	border: 1px solid #4b4;
	text-decoration: none;
}
#ui-body.options a[id|="option-input"].enabled:hover
{
	background-color: #4b4;
	border: 1px solid #6d6;
	text-decoration: none;
}
#ui-body.options a[id|="option-input"]:before { content: "\e002\00a0\00a0"; }
#ui-body.options a[id|="option-input"].enabled:before { content: "\e003\00a0\00a0"; }

/* Passages area styling */
#passages { margin-left: 16em; padding-left: 1.5em; border-left: 1px solid #fff; }
.passage { line-height: 1.75; margin-bottom: 2em; text-align: left; transition: opacity 400ms ease-in; -webkit-transition: opacity 400ms ease-in; }
.passage ul, .passage ol { margin-left: 0.5em; padding-left: 1.5em; }
.passage table { margin: 0.8em 1.0em; border-collapse: collapse; font-size: 100%; }
.passage th, .passage td, .passage tr, .passage caption { padding: 3px; }
.passage hr { height: 1px; border: none; background-color: #fff; }

/* Basic mobile device styling */
@media screen and (max-width: 768px)
{
	body { margin: 3.5%; }

	#ui-bar { position: relative; top: 0; left: 0; width: 100%; margin: 0; padding: 0; border-right: none; border-bottom: 1px solid #fff; }
	#ui-bar header, #ui-bar #story-caption, #ui-bar footer { text-align: left; width: 60%; }
	#ui-bar nav { position: absolute; top: 0; right: 0; margin: 0; }
	#ui-bar ul { margin: 0; }
	#ui-bar li { margin-bottom: 0.5em; }
	#ui-bar li#menu-story { margin-bottom: 0.7em; line-height: 0.9; }

	#passages
	{
		width: 100%;
		margin-left: 0;
		padding-top: 2em;
		padding-left: 0;
		border-left: none;
		min-height: 100vh;
	}
}
</style>
</head>
<body id="body">
	<div id="loading-screen"><p>Loading Story Resources&hellip;<br /><progress></progress></p></div>
	<div id="ui-bar">
		<header id="title">
			<div id="story-banner"></div>
			<h1 id="story-title"></h1>
			<div id="story-subtitle"></div>
			<div id="story-title-separator"></div>
			<p id="story-author"></p>
		</header>
		<div id="story-caption"></div>
		<nav>
			<ul>
				<li id="menu-story"></li>
				<li id="menu-saves"><a>Saves</a></li>
				<li id="menu-rewind"><a>Rewind</a></li>
				<li id="menu-restart"><a>Restart</a></li>
				<li id="menu-options"><a>Options</a></li>
				<li id="menu-share"><a>Share</a></li>
			</ul>
		</nav>
		<footer>
			<p id="credits">This story was created with <a href="http://twinery.org/" target="_blank">Twine</a> and is powered by <a href="http://www.motoslave.net/sugarcube/" target="_blank">SugarCube</a>, which is based on <a href="http://tiddlywiki.com/" target="_blank">TiddlyWiki</a></p>
			<p id="version">SugarCube (&#x03b2;-3010)</p>
		</footer>
	</div>

	<div role="main" id="passages"><noscript>Please enable JavaScript to play this story!</noscript></div>

	<div id="store-area">
<div tiddler="Balancing Contact" tags="living" modified="201403051449" created="201403051449" modifier="twee">!Communicating with home\n!!!!Striking a balance\nYou will need to strike an appropriate balance between the folks back home and your new life abroad. Your family wants to know you are safe and having a good time, and your friends want to keep in touch--so dont cut them off completely!\n\nAt the same time, be careful not to spend //all// your time chatting back home. Constant contact might be tempting, but will ultimately make culture shock harder to bear and prevent you from experiencing your host country to the fullest. Our suggestion for keeping a healthy balance: get out and explore, make new friends, and set up a weekly schedule for contacting home.\n\nAlso keep your experiences in perspective when you call home. What you report from abroad can seem much more serious to family who aren't around to assess the situation for themselves. Beware of venting; you dont want to alarm anyone if you are only battling a head cold! Work with your on-site staff to remedy problems, and make sure your family knows you are safe and happy.\n\n&lt;&lt;sidebar-box&gt;&gt;\n   [[Phones and internet abroad|Phones and internet abroad]]\n&lt;&lt;/sidebar-box&gt;&gt;\n\n&lt;&lt;continue &quot;Special accommodations&quot;&gt;&gt;</div><div tiddler="CSS for replacelinks macros" tags="stylesheet" modified="201403051449" created="201403051449" modifier="twee">.revision-span-in { opacity: 0; }\n.revision-span:not(.revision-span-out) { transition: 0.4s; -webkit-transition: 0.4s; }\n.revision-span-out { position: absolute; opacity: 0; }</div><div tiddler="Vaccination" tags="sidebar health" modified="201403051449" created="201403051449" modifier="twee">&lt;&lt;sidebar &quot;Do I Need Any Vaccinations?&quot;&gt;&gt;\n\nTravel Medicine Clinic, cdc.gov/travel\n\n&lt;&lt;continue &quot;Medical insurance&quot;&gt;&gt;</div><div tiddler="Passage Transition CSS" tags="stylesheet" modified="201403051449" created="201403051449" modifier="twee">/* disable SugarCube's default passage transition */\n.passage { transition: none; -webkit-transition: none; }\n\n/* setup the new passage transition(s) */\n/* this is a simple 3-step fade out \n.transition-in { opacity: 0; position: absolute; }\n.passage:not(.transition-out) { transition: 0s 1100ms; -webkit-transition: 0s 1100ms; }\n.transition-out { opacity:0; position: absolute; transition: 1000ms steps(3); -webkit-transition: 1000ms steps(3); }\n*/\n\n/* Fast scroll (normal flow) */\n\n.transition-in:not(.flip) {\n    opacity:0;\n    transform: translate(0,-100rem);\n    -webkit-transform: translate(0,-100rem);\n    position:absolute;\n}\n.passage {\n    transition: 0.7s;\n    -webkit-transition: 0.7s;\n}\n.transition-out:not(.flip) {\n    opacity:0;\n    transform: translate(0,100rem);\n    -webkit-transform: translate(0,100rem);\n    position:absolute;\n}\n\n\n/* Page-flipping for sidebars */\n\n.flip.transition-in {\n    opacity:0;\n    position:absolute;\n    transform: rotateY(90deg);\n    -webkit-transform: rotateY(90deg);    \n}\n\n.flip.transition-out {\n    opacity:0;\n    transform: rotateY(-90deg);\n    -webkit-transform: rotateY(-90deg);\n    position:absolute;\n}\n\n#passages {\n    transition: background-color 0.4s cubic-bezier(0.95, 0.05, 0.795, 0.035);\n    -webkit-transition: background-color 0.4s cubic-bezier(0.95, 0.05, 0.795, 0.035);\n}</div><div tiddler="LGBQTI issues" tags="safety" modified="201403051449" created="201403051449" modifier="twee">!LGBQTI issues\n!!!!Subhead goes here [could also be a sidebar]\n   * On being out in a different country / Resources\n&lt;&lt;sidebar-box&gt;&gt;\n   [[Where is it particularly unsafe to be out abroad?|Being out]]\n&lt;&lt;/sidebar-box&gt;&gt;\n\n&lt;&lt;continue &quot;Sexual harassment and sexual assault&quot;&gt;&gt;</div><div tiddler="Basic shim for IE console.log" tags="script" modified="201403051449" created="201403051449" modifier="twee">//from https://stackoverflow.com/questions/8785624/how-to-safely-wrap-console-log\nif (typeof console === &quot;undefined&quot;){\n    console={};\n    console.log = function(){\n        return;\n    }\n}</div><div tiddler="Continue arrow & animation" tags="stylesheet" modified="201403051449" created="201403051449" modifier="twee">span.continue-button {\n    background:-webkit-gradient(linear, left top, left bottom, color-stop(0.05, #2dabf9), color-stop(1, #0688fa));\n    background:-moz-linear-gradient(top, #2dabf9 5%, #0688fa 100%);\n    background:-webkit-linear-gradient(top, #2dabf9 5%, #0688fa 100%);\n    background:-o-linear-gradient(top, #2dabf9 5%, #0688fa 100%);\n    background:-ms-linear-gradient(top, #2dabf9 5%, #0688fa 100%);\n    background:linear-gradient(to bottom, #2dabf9 5%, #0688fa 100%);\n    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#2dabf9', endColorstr='#0688fa',GradientType=0);\n    background-color:#2dabf9;\n    -moz-border-radius:28px;\n    -webkit-border-radius:28px;\n    border-radius:28px;\n    border:1px solid #c4ccff;\n    display:inline;\n    cursor:pointer;\n    color:#ffffff;\n    font-size:17px;\n    padding:0px 15px 1px 10px;\n    text-decoration:none;\n    text-shadow:0px 1px 5px #2b4487;\n}\nspan.continue-button:hover {\n    background:-webkit-gradient(linear, left top, left bottom, color-stop(0.05, #0688fa), color-stop(1, #2dabf9));\n    background:-moz-linear-gradient(top, #0688fa 5%, #2dabf9 100%);\n    background:-webkit-linear-gradient(top, #0688fa 5%, #2dabf9 100%);\n    background:-o-linear-gradient(top, #0688fa 5%, #2dabf9 100%);\n    background:-ms-linear-gradient(top, #0688fa 5%, #2dabf9 100%);\n    background:linear-gradient(to bottom, #0688fa 5%, #2dabf9 100%);\n    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#0688fa', endColorstr='#2dabf9',GradientType=0);\n    background-color:#0688fa;\n}\n.continue-button a {\n    color: #fff!important;\n}\n.continue-button a:hover {\n    text-decoration:none!important;\n}\n.continue-button a.link-internal,\n.continue-button a.link-external,\n.continue-button a.link-back,\n.continue-button a.link-return {\n    font-weight:normal;\n    margin:0;\n    padding:0;\n}\n.onward-arrow {\n    position: relative;\n    left:0;\n    display:inline-block;\n}\n.fade-bounce {\n -webkit-animation-name: fade-bounce;\n -moz-animation-name: fade-bounce;\n -webkit-animation-duration: 1s;\n -moz-animation-duration: 1s;\n -webkit-animation-iteration-count: infinite;\n -moz-animation-iteration-count: infinite;\n -webkit-animation-direction: normal;\n -moz-animation-direction: normal;\n -webkit-animation-timing-function: ease-in;\n -moz-animation-timing-function: ease-in;\n }\n @-webkit-keyframes fade-bounce {\n    0%   { left: 0; opacity:1.0; }\n    35%  { left: 0.75em; opacity:1.0; }\n    100% { left: 0.35em; opacity:0.25; }\n }\n@-moz-keyframes fade-bounce {\n    0%   { left: 0; opacity:1.0; }\n    35%  { left: 0.75em; opacity:1.0; }\n    100% { left: 0.35em; opacity:0.25; }\n}\n\n#section-title {\n    position: fixed;\n    display:none;\n    background-color:rgba(0,0,0,0.8);\n    padding:15px;\n    z-index:999;\n    color:#fff;\n    font-weight:bold;\n    margin: auto;\n    position: absolute;\n    top: 40%;\n    left: 50%;\n    -webkit-transform: translate(-50%,-50%);\n    -ms-transform: translate(-50%,-50%);\n    transform: translate(-50%,-50%);\n}</div><div tiddler="Cycling Links" tags="script" modified="201403051449" created="201403051449" modifier="twee">/*! &lt;&lt;cyclinglink&gt;&gt; (SugarCube Edition) */\n(function(){&quot;use strict&quot;;var requiredSugarCubeBuild=2680;if(!version||!version.build||version.build&lt;requiredSugarCubeBuild)throw new Error(&quot;&lt;&lt;cyclinglink&gt;&gt; macro requires SugarCube build &quot;+requiredSugarCubeBuild+&quot; or greater, disabling macro&quot;);version.extensions[&quot;cyclinglinkMacro&quot;]={major:3,minor:3,revision:1};macros[&quot;cyclinglink&quot;]={handler:function(a,b,c){function toggleText(w){w.classList.remove(&quot;cyclingLinkInit&quot;);w.classList.toggle(rl+&quot;Enabled&quot;);w.classList.toggle(rl+&quot;Disabled&quot;);w.style.display=w.style.display===\n&quot;none&quot;?&quot;inline&quot;:&quot;none&quot;}var rl=&quot;cyclingLink&quot;;switch(c[c.length-1]){case &quot;end&quot;:var end=true;c.pop();break;case &quot;out&quot;:var out=true;c.pop();break}var v=&quot;&quot;;if(c.length&&c[0][0]===&quot;$&quot;){v=c[0].slice(1);c.shift()}var h=state.active.variables;if(out&&h[v]===&quot;&quot;)return;var l=Wikifier.createInternalLink(a,null);l.className=&quot;link-internal cyclingLink&quot;;l.setAttribute(&quot;data-cycle&quot;,0);for(var i=0;i&lt;c.length;i++){var on=i===Math.max(c.indexOf(h[v]),0);var d=insertElement(null,&quot;span&quot;,null,&quot;cyclingLinkInit cyclingLink&quot;+\n(on?&quot;En&quot;:&quot;Dis&quot;)+&quot;abled&quot;);if(on){h[v]=c[i];l.setAttribute(&quot;data-cycle&quot;,i)}else d.style.display=&quot;none&quot;;insertText(d,c[i]);if(on&&end&&i===c.length-1)l.parentNode.replaceChild(d,l);else l.appendChild(d)}l.onclick=function(){var t=this.childNodes;var u=this.getAttribute(&quot;data-cycle&quot;)-0;var m=t.length;toggleText(t[u]);u=u+1;if(!(out&&u===m)){u%=m;if(v)h[v]=c[u]}else h[v]=&quot;&quot;;if((end||out)&&u===m-(end?1:0)){if(end){var n=this.removeChild(t[u]);n.className=rl+&quot;End&quot;;n.style.display=&quot;inline&quot;;this.parentNode.replaceChild(n,\nthis)}else{this.parentNode.removeChild(this);return}return}toggleText(t[u]);this.setAttribute(&quot;data-cycle&quot;,u)}}}})();</div><div tiddler="Autoplay interface" tags="widget" modified="201403051449" created="201403051449" modifier="twee">/%%%%%%%%%%%%%\n&lt;&lt;autoPlay filename [passage]&gt;&gt;\nIf you pass the title of a passage into the widget, things will automatically\nforward to that passage when the sound completes playing.\n\nIf no passage title is included, then the sound will simply play and stop.\nThis should be used for times when the reader has e.g. clicked on an\noptional link, or if some further interaction is called for.\n%%%%%%%%%%%%%%/\n&lt;&lt;widget &quot;autoPlay&quot;&gt;&gt;\s\n    &lt;&lt;set $autoplaySound to $args[0]&gt;&gt;\s\n        &lt;&lt;if  $args[1]&gt;&gt;\s\n            &lt;&lt;set $autoplayDestination to $args[1]&gt;&gt;\s\n        &lt;&lt;/if&gt;&gt;\s\n&lt;&lt;/widget&gt;&gt;\s</div><div tiddler="Further packing tips" tags="sidebar travel" modified="201403051449" created="201403051449" modifier="twee">&lt;&lt;sidebar &quot;Further Tips for Successful Packing&quot;&gt;&gt;\n\nText goes here!!\n\n&lt;&lt;continue &quot;Contacts and communications&quot;&gt;&gt;</div><div tiddler="Update Autoplay Button" tags="widget" modified="201403051449" created="201403051449" modifier="twee">/%%%%%%%%%%%%%\n&lt;&lt;updateAutoplay&gt;&gt;\n\nThis updates the on-screen button for autoplay/sounds. Use this macro\nwhenever changing the state of the options.autoplay variable. \n%%%%%%%%%%%%%%/\n&lt;&lt;widget &quot;updateAutoplay&quot;&gt;&gt;\s\n    &lt;&lt;if options.autoplay&gt;&gt;\s\n        &lt;&lt;script&gt;&gt;$(&quot;#autoplay-switch&quot;).addClass(&quot;switchedon&quot;);&lt;&lt;/script&gt;&gt;\s\n    &lt;&lt;else&gt;&gt;\s\n        &lt;&lt;script&gt;&gt;$(&quot;#autoplay-switch&quot;).removeClass(&quot;switchedon&quot;);&lt;&lt;/script&gt;&gt;\s\n    &lt;&lt;/if&gt;&gt;\s\n&lt;&lt;/widget&gt;&gt;\s</div><div tiddler="Emergencies" tags="safety" modified="201403051449" created="201403051449" modifier="twee">!Emergencies\n!!!!Subhead goes here\n    * ISOS and so on\n\n&lt;&lt;continue &quot;Reverse culture shock&quot;&gt;&gt;</div><div tiddler="Sexual activity" tags="safety sidebar" modified="201403051449" created="201403051449" modifier="twee">&lt;&lt;sidebar &quot;Educate Yourself About Legal Issues Regarding Sexual Activity&quot;&gt;&gt;\n\nLegal issues surrounding sexual activity\n\n&lt;&lt;continue &quot;Who to Contact&quot;&gt;&gt;</div><div tiddler="Financial Aid" tags="policies sidebar" modified="201403051449" created="201403051449" modifier="twee">&lt;&lt;sidebar &quot;Financial Aid&quot;&gt;&gt;\nAll programs available through GEO //during the regular academic year// are eligible for federal and Vanderbilt financial aid. All types of financial aid, other than work study, are applicable to semester-long study abroad. If you aren't sure about your financial aid package, check with your financial aid officer.\n\n''Summer and Maymester abroad programs are not eligible for Vanderbilt financial aid''. There may be some circumstances in which financial aid can apply to summer study. You should speak with your financial aid officer if you think an exception might apply in your case. \n\nThe Office of Financial Aid disburses funding from the scholarships covered by the ''GEO Common Scholarship Application''. Scholarship funds will be credited to your student account //on or about the day that your account is billed for your abroad program//. Please feel free to contact the Global Education Office's [[scholarship coordinator|]] with questions about this process.\n\n&lt;&lt;continue &quot;Conduct and law&quot;&gt;&gt;\s</div><div tiddler="StoryTitle" tags="" modified="201403051449" created="201403051449" modifier="twee">Predeparture Orientation</div><div tiddler="jQuery CSS hook for gradients" tags="script" modified="201403051449" created="201403051449" modifier="twee">/*! \n* Copyright (c) 2011 Tom Ellis (http://www.webmuse.co.uk)\n* Linear and Radial Gradient cssHook for jQuery\n* Limitations:\n  - Works with jQuery 1.4.3 and higher\n  - Works in Firefox 3.6+, Safari 5.1+, Chrome 13+, Opera 11.10+, IE9+ \n  - Radial Gradients DO NOT work in Opera yet (Doesn't make sense I Know!)\n  - Only works for background and background image CSS properties\n* Licensed under the MIT License (LICENSE.txt).\n*/\n(function($) {\n    var div = document.createElement( &quot;div&quot; ),\n        divStyle = div.style,\n        rLinear = /^(.*?)linear-gradient(.*?)$/i,\n        rRadial = /^(.*?)radial-gradient(.*?)$/i,\n        rLinearSettings = /^(.*?)(:?linear-gradient)(\s()(.*)(\s))(.*?)$/i,       \n        rRadialSettings = /^(.*?)(:?radial-gradient)(\s()(.*?)(\s))(.*?)$/i,\n        rSupportLinearW3C = /(^|\ss)linear-gradient/,    \n        rSupportLinearMoz = /(^|\ss)-moz-linear-gradient/,   \n        rSupportLinearWebkit = /(^|\ss)-webkit-linear-gradient/, \n        rSupportLinearOpera = /(^|\ss)-o-linear-gradient/,   \n        rSupportRadialW3C = /(^|\ss)radial-gradient/,    \n        rSupportRadialMoz = /(^|\ss)-moz-radial-gradient/,   \n        rSupportRadialWebkit = /(^|\ss)-webkit-radial-gradient/, \n        rSupportRadialOpera = /(^|\ss)-o-radial-gradient/,                 \n        rWhitespace = /\ss/,\n        rWhiteGlobal = /\ss/g,\n        cssProps = &quot;background backgroundImage&quot;, //listStyleImage not supported yet\n        cssLinear = &quot;background-image: -moz-linear-gradient(red, blue);background-image: -webkit-linear-gradient(red, blue);background-image: -o-linear-gradient(red, blue);background-image: linear-gradient(red, blue);&quot;,\n        cssRadial = &quot;background-image: -moz-radial-gradient(circle, orange, red);background-image: -webkit-radial-gradient(circle, orange, red);background-image: -o-radial-gradient(circle,red, blue);background-image: radial-gradient(circle, orange, red);&quot;,\n        cssPropsArray = cssProps.split( rWhitespace ),\n        linearSettings = function ( value ) {\n            var parts = rLinearSettings.exec( value );\n            value = value.replace( new RegExp(parts[2], 'g') , $.support.linearGradient );\n            return value;\n        },\n        radialSettings = function ( value ) {\n            var parts = rRadialSettings.exec( value );          \n            value = value.replace( new RegExp(parts[2], 'g') , $.support.radialGradient );\n            return value;\n        };\n        divStyle.cssText = cssLinear;\n\n        $.support.linearGradient =\n            rSupportLinearW3C.test( divStyle.backgroundImage ) ? &quot;linear-gradient&quot; :\n            (rSupportLinearMoz.test( divStyle.backgroundImage ) ? &quot;-moz-linear-gradient&quot; :\n            (rSupportLinearWebkit.test( divStyle.backgroundImage ) ? &quot;-webkit-linear-gradient&quot; :\n            (rSupportLinearOpera.test( divStyle.backgroundImage ) ? &quot;-o-linear-gradient&quot; :\n            false)));\n\n        divStyle.cssText = cssRadial;\n        \n        $.support.radialGradient =\n            rSupportRadialW3C.test( divStyle.backgroundImage ) ? &quot;radial-gradient&quot; :\n            (rSupportRadialMoz.test( divStyle.backgroundImage ) ? &quot;-moz-radial-gradient&quot; :\n            (rSupportRadialWebkit.test( divStyle.backgroundImage ) ? &quot;-webkit-radial-gradient&quot; :\n            (rSupportRadialOpera.test( divStyle.backgroundImage ) ? &quot;-o-radial-gradient&quot; :\n            false)));\n        \n        if ( $.support.linearGradient && $.support.linearGradient !== &quot;linear-gradient&quot; ) {\n\n            $.each( cssPropsArray, function( i, prop ) {\n\n                $.cssHooks[ prop ] = {\n\n                    set: function( elem, value ) {\n                                                \n                        if( rLinear.test( value ) ){\n                            elem.style[ prop ] = linearSettings( value );\n                        } else if ( rRadial.test( value ) ) {\n                            elem.style[ prop ] = radialSettings( value );\n                        } else {\n                            elem.style[ prop ] = value;\n                        }\n                    }\n                };\n                \n            });\n\n        }\n    \n        div = divStyle = null; \n})(jQuery);</div><div tiddler="AutoPlay Sound widget" tags="widget" modified="201403051449" created="201403051449" modifier="twee">/%%%%%%%%%%%%%\n&lt;&lt;autoplay filename [passage]&gt;&gt;\n\nThis widget is called automatically during the PassageDone phase\n(i.e., right after the passage has rendered), to prevent the voiceover\nfrom beginning before there is text on the page. It uses the values\nset by the &quot;autoPlay&quot; widget.\n\nA delay (in milliseconds) can be set in options.autoplaydelay; the sound\nwill begin playing only after at least this much time has passed since\nthe passage rendered. \n%%%%%%%%%%%%%%/\n&lt;&lt;widget &quot;autoplay&quot;&gt;&gt;\s\n    &lt;&lt;if options.autoplay&gt;&gt;\s\n            &lt;&lt;if $args[0] neq $autoplaySound&gt;&gt;\s\n                &lt;&lt;stopAllSounds&gt;&gt;\s\n            &lt;&lt;/if&gt;&gt;\s\n            &lt;&lt;set $args[2] to options.autoplaydelay&gt;&gt;\s\n            &lt;&lt;if $args[1]&gt;&gt;\s\n                &lt;&lt;playSoundDelay $args[0] $args[2] $args[1]&gt;&gt;\s\n            &lt;&lt;else&gt;&gt;\s\n                &lt;&lt;playSoundDelay $args[0] $args[2] &gt;&gt;\s\n            &lt;&lt;set $autoplay to $args[0]&gt;&gt;\s\n        &lt;&lt;/if&gt;&gt;\s\n    &lt;&lt;/if&gt;&gt;\s\n&lt;&lt;/widget&gt;&gt;\s</div><div tiddler="Time values support" tags="script" modified="201403051449" created="201403051449" modifier="twee">//adapted from http://www.glorioustrainwrecks.com/files/TwineMacro-TimedLoop-1.1.0.txt\nString.prototype.cssTimeUnit = function() {\n    if (typeof this == &quot;string&quot;) {\n          if (this.slice(-2).toLowerCase() == &quot;ms&quot;) {\n            return Number(this.slice(0, -2)) || 0;\n          }\n          else if (this.slice(-1).toLowerCase() == &quot;s&quot;) {\n            return Number(this.slice(0, -1)) * 1000 || 0;\n          }\n        }\n        throw new Error(this + &quot; isn't a CSS this unit&quot;);\n        return 0;\n}</div><div tiddler="Airport Dangers" tags="sidebar travel" modified="201403051449" created="201403051449" modifier="twee">&lt;&lt;sidebar &quot;Airport Dangers&quot;&gt;&gt;\n\nText goes here!\n\n&lt;&lt;continue &quot;Tips for packing&quot;&gt;&gt;</div><div tiddler="Reverse culture shock" tags="home" modified="201403051449" created="201403051449" modifier="twee">!Reverse culture shock\n!!!!Be prepared for coming home to be a bumpy ride\nIt may seem like a distant reality now, but part of the study abroad experience is returning home. There are many students who tell GEO that this is harder than expected, and often harder than going abroad to begin with!\n\nLook, reverse culture shock is a fact. Returning home after a significant period of time abroad is in some ways just like going abroad. You have changed, your perceptions have changed, and you are now used to living in and interacting with a different culture. You may even find that readjusting to life in the US is more difficult than the initial adaption to your host country! Instead of ignoring this reverse culture shock, learn about it and about effective ways to combat it. Rest assured, there are many resources that may be helpful as you make the adjustment to being back at home. You can find some resources on GEO's website (under [[Reverse Culture Shock|http://vanderbi.lt/reversecultureshock]]); you might want to bookmark it for when you come back! We're also listing some right here.\n\n|box|k\n|!Resources for Reverse Culture Shock|\n|[[Top 10 Challenges Faced on Returning from Study Abroad|http://www.du.edu/intl/abroad/pdf_docs/challenges_returnees.pdf]]|\n|[[Adjusting to Life Back Home|http://www.studyabroad.illinois.edu/resources/return/adjusting_home.aspx]]|\n|[[Common Challenges and Coping Strategies|http://www.du.edu/intl/abroad/pdf_docs/returneechallenges.pdf]]|\n|[[Tips for Family and Friends on Welcoming a Student Home|http://www.du.edu/intl/abroad/pdf_docs/twelvetips_parents.pdf]]|\n|[[Small Planet Studio, an online community for study abroad alums|http://www.smallplanetstudio.com/]]|\n|[[Melibee Global|http://www.melibeeglobal.com/]]|\n\n&lt;&lt;continue &quot;Opportunities for returned students&quot;&gt;&gt;\s</div><div tiddler="Continue Button" tags="widget" modified="201403051449" created="201403051449" modifier="twee">/% Syntax:\n    &lt;&lt;continue [passage name]&gt;&gt;  %/\s\n&lt;&lt;widget &quot;continue&quot;&gt;&gt;\s\n    &lt;span class='continue-button' style=&quot;clear:both;&quot;&gt;&lt;&lt;link &quot;Continue&quot; $args[0]&gt;&gt;&lt;span class=&quot;anim-wrapper&quot;&gt;&lt;span class='onward-arrow fade-bounce'&gt;&raquo;&lt;/span&gt;&lt;/span&gt;&emsp;&lt;/span&gt;\s\n&lt;&lt;/widget&gt;&gt;\s</div><div tiddler="Special accommodations" tags="living" modified="201403051449" created="201403051449" modifier="twee">!Special accommodations\n!!!!Subhead goes here\n   * How to deal with academic, dietary, physical accomodations\n\n&lt;&lt;sidebar-box&gt;&gt;\n   [[How can I make the most of my time with my host family?|Host families]]\n&lt;&lt;/sidebar-box&gt;&gt;\n\n&lt;&lt;continue &quot;Money&quot;&gt;&gt;</div><div tiddler="Section record" tags="script" modified="201403051449" created="201403051449" modifier="twee">//  Use the section macro to mark out one entry in the table of contents\n//    &lt;&lt;section [name of section] [tag name] [path to background image]&gt;&gt;\n//\n//  A number of javascript objects store the index information in different forms:\n//  1. $backgrounds stores the background image url associated with the tag name,\n//     as well as the section name associated with the tag:\n//          backgrounds = {\n//              &quot;intro&quot;: {\n//                          url: &quot;images/imagetest.jpg&quot;,\n//                          section: &quot;Introduction&quot;\n//              }\n//          };\n//  2. The $index stores each passage name associated with a passage title, as well as the\n//     long section name and the background image's url. The enumeration gives the place\n//     in the presentation where the passage lies in linear reading order.\n//			index = {\n//              &quot;What Study Abroad Is All About&quot;: {\n//                  tag: &quot;intro&quot;,\n//                  url: &quot;images/imagetest.jpg&quot;,\n//                  section: &quot;Introduction&quot;,\n//                  enumeration: 1\n//              }\n//  		};\n//  3. $bookmarks stores the bookmarked passage name keyed to each section tag:\n//          bookmarks = {\n//              &quot;intro&quot;: &quot;What Study Abroad Is All About&quot;\n//          };\n//\n//  4. $fullindex stores all sections, passages, and sidebars in a single object.\n//     The names of sections, passages, etc. are stored in arrays so that everything is enumerated.\n//          fullindex[0] = {\n//              section: &quot;Introduction&quot;,\n//              passages[0]: {\n//                             passage: &quot;What you will get out of study abroad&quot;\n//                           },\n//              passages[1]: {\n//                             passage: &quot;What we will cover in this presentation&quot;,\n//                             sidebars[0]: &quot;Give me some tips!&quot;\n//                           }\n//           }\n\n// There is also the $tags array, which stores the names of the section tags (only, other tags are\n// ignored), e.g. tags = [&quot;intro&quot;]. This allows for us to easily ask &quot;which section tag comes next?&quot;\n\n\n(function () {\n    macros.add(&quot;section&quot;, {\n        version: {\n            major: 1,\n            minor: 0,\n            revision: 0\n        },\n        handler: function () {\n            try {\n                var backgrounds = state.active.variables.backgrounds;\n                var sectionName = &quot;&quot;;\n                var tagName = &quot;&quot;;\n                var url = &quot;&quot;;\n                if (this.args[2].length &lt; 1) {throw sectionName + &quot;: Supply a section name, a tag name, and the path to a background image.&quot;;}\n                sectionName = this.args[0];\n                tagName = this.args[1];\n                url = this.args[2];\n                if (!backgrounds.hasOwnProperty(tagName)) {\n                    backgrounds[tagName] = {};\n                }\n                backgrounds[tagName].section = sectionName;\n                backgrounds[tagName].url = url;\n            } catch(e) {\n                return this.error(&quot;Error: &quot; + e.message);\n            }\n        }\n    });\n\n    macros.add(&quot;create-index&quot;, {\n        version: {\n            major: 1,\n            minor: 0,\n            revision: 0\n        },\n        handler: function () {\n            try {\n            	var index = state.active.variables.index;\n                var backgrounds = state.active.variables.backgrounds;\n                var bookmarks = state.active.variables.bookmarks;\n                state.active.variables.tags = Object.getOwnPropertyNames(backgrounds);\n                console.log(backgrounds);\n                var sectionName = &quot;&quot;;\n                var tagName = &quot;&quot;;\n                var url = &quot;&quot;;\n                var text = '';\n                var num = -1;\n                console.log(&quot;Tags: &quot; + state.active.variables.tags);\n                for(var i in backgrounds) {\n					if (backgrounds.hasOwnProperty(i)) {\n						num++;\n						tagName = i;\n						backgrounds[i].enumeration = num;\n						$(&quot;#store-area div&quot;).each(function() {\n							if ($(this).attr(&quot;tags&quot;).indexOf(i) &gt; -1) {\n								var passageName = $(this).attr(&quot;tiddler&quot;);\n								console.log(&quot;Found passage: &quot; + passageName);\n								if (!index.hasOwnProperty(passageName)) {\n									index[passageName] = {};\n									index[passageName].tag = tagName;\n									index[passageName].section = backgrounds[i].section;\n									index[passageName].url = backgrounds[i].url;\n									//index[passageName].enumeration = backgrounds[i].enumeration;\n								}\n                                if ($(this).attr(&quot;tags&quot;).indexOf(&quot;bookmark&quot;) &gt; -1) {\n                                    if (!bookmarks.hasOwnProperty(tagName)) {\n                                        bookmarks[tagName] = [];\n                                    }\n                                    bookmarks[tagName].push(passageName);\n                                }\n							}\n						});\n					}\n				}\n                console.log(backgrounds);\n                console.log(index);\n                console.log(bookmarks);\n\n                //Build the full index by &quot;reading&quot; the full presentation in order\n                var fullindex = state.active.variables.fullindex;\n                var seek = state.active.variables.first;\n                var lastTag = &quot;&quot;;\n                var count = -1;\n                while(seek !== null) {\n                    $(&quot;#store-area div&quot;).each(function() {\n                        if ($(this).attr(&quot;tiddler&quot;) === seek) {\n                            for(tagName in backgrounds) {\n                                if ($(this).attr(&quot;tags&quot;) && $(this).attr(&quot;tags&quot;).indexOf(tagName) &gt; -1 ) {\n                                    if (tagName !== lastTag) {\n                                        count++;\n                                        lastTag = tagName;\n                                        fullindex.push({});\n                                    }\n                                    console.log(&quot;fullindex.length = &quot;+fullindex.length+ &quot;, count: &quot;+ count);\n                                    if (fullindex.length &lt; count + 2) {\n                                        console.log(&quot;Looking to add &quot; + $(this).attr(&quot;tiddler&quot;) + &quot; to fullindex&quot;);\n                                        if (!fullindex[count].hasOwnProperty(&quot;section&quot;)) {\n                                            console.log(&quot;   Looking to add section.&quot;);\n                                            fullindex[count].section = backgrounds[tagName].section;\n                                        }\n                                        if (!fullindex[count].hasOwnProperty(&quot;passages&quot;)) {\n                                            console.log(&quot;   Looking to add passages.&quot;);\n                                            fullindex[count].passages = [];\n                                        }\n                                        var passageStore = { passage: $(this).attr(&quot;tiddler&quot;) };\n                                        var sidebars = $(this).text().match(/&lt;&lt;\ss*sidebar-link\ss+[&quot;'](.*)[&quot;']/g);\n                                        console.log(&quot;   Looking to add sidebars.&quot;);\n                                        if (sidebars !== null) {\n                                            var sidebarStore = [];\n                                            $.each(sidebars, function(index, value) {\n                                                    sidebarStore.push((/[&quot;'](.*?)[&quot;']/).exec(value)[1]);\n                                                });\n                                            passageStore.sidebars = sidebarStore;\n                                        }\n                                        fullindex[count].passages.push(passageStore);\n                                    }\n                                    \n                                    break;\n                                }\n                            }\n                            seek = (/&lt;&lt;\ss*continue\ss+[&quot;'](.*?)[&quot;']\ss*&gt;&gt;/g).exec($(this).text());\n                            if (seek != null) {\n                                seek = seek[1]; \n                            }\n                            return false;\n                        }\n                    });\n\n                    \n                }\n            \n            console.log(fullindex);\n\n            //In the $index, number each passage so that we can quickly\n            //identify where we are for the progress meter.\n            count = 0;\n            $.each(fullindex, function(i, part){\n                if (part.passages.length &gt; 0) {\n                    $.each(part.passages, function(j, group) {\n                        count ++;\n                        index[group.passage].enumeration = count;\n                    });\n                }\n            });\n            \n            state.active.variables.totalPassages = count;\n\n            } catch(e) {\n                return this.error(&quot;Error: &quot; + e.message);\n            }\n        }\n    });                \n}());\n\n\n//          fullindex[0] = {\n//              section: &quot;Introduction&quot;,\n//              passages[0]: {\n//                             passage: &quot;What you will get out of study abroad&quot;\n//                           },\n//              passages[1]: {\n//                             passage: &quot;What we will cover in this presentation&quot;,\n//                             sidebars[0]: &quot;Give me some tips!&quot;\n//                           }\n//           }</div><div tiddler="External Script Loader" tags="script" modified="201403051449" created="201403051449" modifier="twee">//adapted from http://videlais.com/2013/03/05/twine-tuesday-loading-external-javascript/\n(function () {\n    macros.add(&quot;loadJS&quot;, {\n        version: {\n            major: 1,\n            minor: 0,\n            revision: 0\n        },\n        handler: function () {\n            try {\n                var se = document.createElement(&quot;script&quot;);\n                se.type = 'text/javascript';\n                se.src = this.args[0];\n                $(&quot;head&quot;).append(se);\n                if(se.innerText) {eval(se.innerText);}\n                else {eval(se.textContent);} \n            } \n            catch (e) {\n                return this.error(&quot;LoadJS: &quot; + e.message);\n            }\n        }\n    });\n}());</div><div tiddler="StoryInit" tags="nobr" modified="201403051449" created="201403051449" modifier="twee">/% Add the header & controls to the document when the story first loads. %/\n&lt;&lt;set options.autoplaydelay to 0&gt;&gt;\n&lt;&lt;set $csscalc to true&gt;&gt;\n&lt;&lt;set $facultyled to false&gt;&gt;\n&lt;&lt;set $vanderbilt to false&gt;&gt;\n&lt;&lt;set $urlopts to {}&gt;&gt;\n&lt;&lt;script&gt;&gt;\n    // Check CSS3 calc() support\n    $('body').append('&lt;div id=&quot;css3-calc&quot;&gt;&lt;/div&gt;');\n    var css3_calc = parseInt($('#css3-calc').width());\n    if(css3_calc == 10) {\n        state.active.variables.csscalc = false;\n    }\n    $('#css3-calc').remove();\n    // Replace text in loading screen\n    $(&quot;#loading-screen p&quot;).html(&quot;Loading&hellip;&lt;br /&gt;&lt;progress&gt;&lt;/progress&gt;&quot;);\n\n    // Initialize chapter progress storage\n    if (!options.chapterprogress) {\n        options.chapterprogress = 0;\n    }\n\n    // Set up custom UI\n    var header = insertElement(document.html, &quot;header&quot;, &quot;custom&quot;);\n    var banner = insertElement(header, &quot;h2&quot;, &quot;section-name&quot;, &quot;&quot;, &quot;GEO Predeparture Information&quot;);\n    var controls = insertElement(header, &quot;div&quot;, &quot;controls&quot;);\n    var story_rewind = insertElement(header, &quot;div&quot;, &quot;story-rewind&quot;);\n    var progress = insertElement(header, &quot;div&quot;, &quot;progress&quot;);\n    var label = insertElement(controls, &quot;label&quot;, &quot;&quot;, &quot;autoplay-switch&quot;, &quot;Autoplay + Sound&quot;);\n    var toggle = insertElement(controls, &quot;button&quot;, &quot;autoplay-switch&quot;);\n    var backgrounds = insertElement(document.body, &quot;div&quot;, &quot;backgrounds&quot;);\n    var image_container_1 = insertElement(backgrounds, &quot;div&quot;, &quot;bkgd-1&quot;);\n    var image_container_2 = insertElement(backgrounds, &quot;div&quot;, &quot;bkgd-2&quot;);\n\n    $(&quot;body&quot;).before(backgrounds);\n    $(&quot;body&quot;).before(header);\n    $(&quot;#custom&quot;).css(&quot;display&quot;,&quot;none&quot;);\n    $(image_container_1).addClass(&quot;img-anchor img-container&quot;);\n    $(image_container_2).addClass(&quot;img-fader img-container&quot;);\n    $(progress).html(&quot;&lt;div id='progress-meter'&gt;&lt;span id='pb-complete'&gt;&lt;/span&gt;&lt;span id='pb-position'&gt;&lt;/span&gt;&lt;/div&gt;&quot;);\n\n    $(toggle)\n        .attr(&quot;type&quot;, &quot;button&quot;)\n        .addClass(function() {\n            if (options.autoplay) { return &quot;switchedon&quot; }\n        })\n        .click(function() {\n            $(toggle).toggleClass(&quot;switchedon&quot;);\n            if ( $(toggle).hasClass(&quot;switchedon&quot;) ) {\n                var soundName = state.active.variables.autoplaySound;\n                options.autoplay = true;\n                var sound = macros.get(&quot;playSound&quot;).soundtracks[soundName.slice(0, soundName.lastIndexOf(&quot;.&quot;))];\n                if (sound) { sound.play() }\n            }\n            else {\n                options.autoplay = false;\n                var sounds = macros.get(&quot;playSound&quot;).soundtracks;\n                for (var i in sounds) {\n                    if (sounds.hasOwnProperty(i)) {\n                        sounds[i].pause();\n                        sounds[i].currentTime = 0;\n                    }\n                }\n            }\n        });\n\n    // Prep first background image object with inline CSS for background image\n    $(&quot;.img-anchor&quot;).css(&quot;background-image&quot;, &quot;url(&quot;+ getBackgroundImage(&quot;.img-anchor&quot;) +&quot;)&quot;);\n\n    //Process URL substring for options\n    state.active.variables.urlopts = parseQueryString( window.location.search.substring(1) );\n    var opts = state.active.variables.urlopts;\n    for (var key in opts) {\n        if ( opts.hasOwnProperty(key) ) {\n            if (key == &quot;nav&quot;) { state.active.variables.urlopts[key] = unescape(opts[key]); }\n            else {\n                if (state.active.variables.hasOwnProperty(key)) {\n                    state.active.variables[key] = state.active.variables.urlopts[key];\n                }\n            }\n        }\n    }\n    if (opts.hasOwnProperty(&quot;nav&quot;)) {\n        SaveSystem.deleteAuto();\n        config.startPassage = opts[&quot;nav&quot;];\n    } \n&lt;&lt;/script&gt;&gt;\n\n/% Initialize variables %/\n&lt;&lt;set $index to {}&gt;&gt;\n&lt;&lt;set $section to &quot;&quot;&gt;&gt;\n&lt;&lt;set $backgrounds to {}&gt;&gt;\n/% Custom scrollbar %/\s\n&lt;&lt;loadJS &quot;jquery.nicescroll.js&quot;&gt;&gt;\s\n&lt;&lt;script&gt;&gt;\n$(document).ready(\n    function() {  \n        $(&quot;body&quot;).niceScroll({\n            cursorwidth: &quot;8px&quot;, \n            railpadding:{top:0,right:5,left:0,bottom:0}\n        });\n    }\n);\n&lt;&lt;/script&gt;&gt;\s\n&lt;&lt;display &quot;Table of Contents&quot;&gt;&gt;\n&lt;&lt;script&gt;&gt;\n//Set up the progress bar\nvar fullindex = state.active.variables.fullindex;\nif (fullindex.length &gt; 0) {\n    var len = 0;\n    var stops = [];\n    var colorA = &quot;#b0b0b0&quot;;\n    var colorB = &quot;#d8d8d8&quot;;\n    var first = colorA;\n    var second = colorB;\n    for (var i = 0; i &lt; fullindex.length; i++) {\n        len += fullindex[i].passages.length;\n        stops.push(fullindex[i].passages.length);\n    }\n    console.log(stops);\n    var rule = &quot;linear-gradient(to right, &quot;;\n    console.log(&quot;Total length: &quot; + len);\n    if (len &gt; 0) {\n        rule += colorA + &quot;, &quot;;\n        var sum = 0;\n        for (i = 0; i &lt; stops.length; i++) {\n            //get first color, then choose opposite\n            if (i === 0 || i % 2 === 0) {\n                first = colorA;\n                second = colorB;\n            }\n            else {\n                first = colorB;\n                second = colorA;\n            }\n            var val = (stops[i]/len)*100;\n            console.log(&quot;Stop &quot; + i + &quot;: &quot; + stops[i] + &quot;, sum: &quot; + sum);\n            //fix -- percentages too simple, not cumulative.\n            rule += first + &quot; &quot; + (sum + val);\n            if (i + 1 === stops.length) {\n                rule += &quot;%)&quot;;\n            }\n            else {\n                rule += &quot;%, &quot; + second + &quot; &quot; + (sum + val) + &quot;%, &quot;;\n                sum += val;\n            }\n        }\n        $(&quot;#progress-meter&quot;).css(&quot;backgroundImage&quot;, rule);\n    }\n}\n&lt;&lt;/script&gt;&gt;</div><div tiddler="Ethical photography" tags="home sidebar" modified="201403051449" created="201403051449" modifier="twee">&lt;&lt;sidebar &quot;Ethical Photography Abroad&quot;&gt;&gt;\nAs a representative of Vanderbilt, your home country, and the global community at large, you have a responsibility to follow ethical and respectful photography practices. Be mindful of the message your final product sends as well as the impact it has on the host culture.\n\nDefinitely ''get permission'' to photograph human subjects: There are cultures where people consider photography rude or a violation of modesty, or believe that the camera can be harmful to health. And in all cultures there are people who just don't like to be photographed! Don't be afraid to ask for permission, though, or let it stop you from shooting. Instead consider asking for permission as opportunity to make a connection, have a conversation, and to demonstrate your interest in the people of your host country!\n\n|box|k\n|!Questions to ask yourself before you snap that picture|\n|Does the photo make fun of the culture or people of my host country?|\n|Does this picture tell a false story about my host country or its people?|\n|Does the subject mind that I'm photographing them?|\n|What message does this photo send about how I spent my time abroad?|\n\n''More resources:''\n[[Guidelines for Culturally Sensitive Photography|http://www.culturosity.com/pdfs/CulturallySensitivePhotography.pdf]]\n[[Breaking Free from the Viewfinder|http://www.melibeeglobal.com/2012/09/photography-while-on-study-abroad-breaking-free-from-the-viewfinder/]]\n\n&lt;&lt;continue &quot;What to do next&quot;&gt;&gt;\s</div><div tiddler="Image with Caption" tags="widget" modified="201403051449" created="201403051449" modifier="twee">/% Syntax:\n       &lt;&lt;figure [image url] \n                [caption text]\n                [optional: &quot;left&quot; or &quot;right&quot;, to float figure container; other classes could be given here as well]&gt;&gt;  %/\s\n&lt;&lt;widget &quot;figure&quot;&gt;&gt;\s\n    &lt;&lt;script&gt;&gt;\n        (function () {\n            var url = &quot;&quot;;\n            url = state.active.variables.args[0];\n            var text = &quot;&quot;;\n            text = state.active.variables.args[1];\n            var positioning = &quot;&quot;;\n            positioning = state.active.variables.args[2].length ? state.active.variables.args[2] : &quot;&quot;;\n            var container = insertElement( \n                output, \n                &quot;figure&quot;, \n                &quot;&quot;, \n                positioning \n            );\n            var image = insertElement(\n                container,\n                &quot;img&quot;\n            );\n            var figurecaption = insertElement(\n                container,\n                &quot;figcaption&quot;,\n                &quot;&quot;,\n                &quot;&quot;,\n                text\n            );\n            image.src = url;\n        }());\n    &lt;&lt;/script&gt;&gt;\s\n&lt;&lt;/widget&gt;&gt;\s</div><div tiddler="Passport Check" tags="" modified="201403051449" created="201403051449" modifier="twee">&lt;img src=&quot;images/warning.png&quot; class=&quot;left inline&quot; style=&quot;width:40px; margin-right:10px;&quot; /&gt;\s\n!Passport Check\n!!!!Be sure that you have a valid passport, and that it will not be expiring within the next year or so.\nBefore we begin, take a moment to check your passport's expiration date.\n\n&lt;&lt;figure &quot;images/passport_expiration.jpg&quot; &quot;Where to find the expiration date on your main passport page.&quot; &quot;right&quot;&gt;&gt;Most countries will not allow you to get a student visa or residence permit if your passport is near its expiration date. Be sure that your passport does not expire until at least 6 months after your program ends!\n\n&lt;&lt;sidebar-box&gt;&gt;\n	[[It looks like I need a new passport!|Passport Acquisition]]\n&lt;&lt;/sidebar-box&gt;&gt;\n\n&lt;&lt;continue &quot;Passport Security&quot;&gt;&gt;</div><div tiddler="Index" tags="finish" modified="201403051449" created="201403051449" modifier="twee">!Index\n!!!!Bookmark this!\n\n&lt;&lt;continue &quot;Credits&quot;&gt;&gt;</div><div tiddler="Documents" tags="travel" modified="201403051449" created="201403051449" modifier="twee">!Passport and Document Security\n!!!!Keep your passport and other key documents safe\nWhen you are abroad, no single document is more important than your passport. Without it, ''you will not be able to cross international borders'', and other tasks--such as transferring funds--may also be made difficult or impossible. Losing your passport can be a major headache, and might even cost you thousands of dollars in airfare for missed flights. Do everything you can to keep it safe!\n\nIn general, you should only keep your passport on your person when you are traveling across borders. Otherwise, ''find a safe place for it and leave it there.'' Make a photocopy and carry that on you when you are out and about.\n&lt;img src=&quot;images/passport wallet.jpg&quot; class=&quot;right&quot; style=&quot;height: 250px;&quot; /&gt;\s\n\nIf you must carry your passport with you, keep it in a special ''passport wallet'' under your clothes.\n\n|box|k\n|!(Potentially) Good Places to Keep Your Passport|\n|Hidden in the room of your homestay or residence hall|\n|In your hotel's safe (//not// the room safe)|\n|With your study abroad provider, if they offer such a service|\n|&lt;hr&gt;//In some situations, even these options may not be secure. Use your common sense and evaluate the situation. If in doubt, talk to your Resident Director for advice.//|\n\n&lt;&lt;sidebar-box &quot;More Info&quot;&gt;&gt;\n   [[Uh oh! I need a new passport!|Passport Acquisition]]\n   [[How do I go about getting a travel visa?|Visa Acquisition]]\n&lt;&lt;/sidebar-box&gt;&gt;\n\n&lt;&lt;continue &quot;Traveling with medications&quot;&gt;&gt;</div><div tiddler="Replace Links" tags="script" modified="201403051449" created="201403051449" modifier="twee">/*! &lt;&lt;replacelink&gt;&gt; macro set (SugarCube Edition) */\n(function(){&quot;use strict&quot;;var requiredSugarCubeBuild=2680;if(!version||!version.build||version.build&lt;requiredSugarCubeBuild)throw new Error(&quot;&lt;&lt;replacelink&gt;&gt; macro set requires SugarCube build &quot;+requiredSugarCubeBuild+&quot; or greater, disabling macro set&quot;);version.extensions[&quot;replacelinkMacroSet&quot;]={major:1,minor:1,revision:2};function showVer(n,notrans){n.innerHTML=&quot;&quot;;new Wikifier(n,n.tweecode);n.setAttribute(&quot;data-enabled&quot;,&quot;true&quot;);n.style.display=&quot;inline&quot;;n.classList.remove(&quot;revision-span-out&quot;);if(!notrans){n.classList.add(&quot;revision-span-in&quot;);\nif(n.timeout)clearTimeout(n.timeout);n.timeout=setTimeout(function(){n.classList.remove(&quot;revision-span-in&quot;);n=null},1)}}function hideVer(n,notrans){n.setAttribute(&quot;data-enabled&quot;,&quot;false&quot;);n.classList.remove(&quot;revision-span-in&quot;);if(n.timeout)clearTimeout(n.timeout);if(!notrans){n.classList.add(&quot;revision-span-out&quot;);n.timeout=setTimeout(function(){if(n.getAttribute(&quot;data-enabled&quot;)===&quot;false&quot;){n.classList.remove(&quot;revision-span-out&quot;);n.style.display=&quot;none&quot;;n.innerHTML=&quot;&quot;}n=null},1E3)}else{n.style.display=\n&quot;none&quot;;n.innerHTML=&quot;&quot;;n=null}}function tagcontents(b,starttags,desttags,endtags,k){function tagfound(i,e){for(var j=0;j&lt;e.length;j++)if(a.indexOf(&quot;&lt;&lt;&quot;+e[j],i)===i)return e[j]}var l=0,c=&quot;&quot;,tg,a=b.source.slice(k);for(var i=0;i&lt;a.length;i++){if(tg=tagfound(i,starttags))l++;else if((tg=tagfound(i,desttags))&&l===0){b.nextMatch=k+i+tg.length+4;return[c,tg]}else if(tg=tagfound(i,endtags)){l--;if(l&lt;0)return null}c+=a.charAt(i)}return null}function revisionSpanHandler(g,e,f,b){function mkspan(vtype){h=insertElement(m,\n&quot;span&quot;,null,&quot;revision-span &quot;+vtype);h.setAttribute(&quot;data-enabled&quot;,false);h.style.display=&quot;none&quot;;h.tweecode=&quot;&quot;;return h}var k=b.source.indexOf(&quot;&gt;&gt;&quot;,b.matchStart)+2,vsns=[],vtype=e,flen=f.length,becomes,c,cn,m,h,vsn;if(this.shorthand&&flen)while(f.length&gt;0)vsns.push([f.shift(),this.flavour===&quot;insert&quot;?&quot;gains&quot;:&quot;becomes&quot;]);else if(this.flavour===&quot;insert&quot;||this.flavour===&quot;continue&quot;&&this.trigger===&quot;time&quot;)vsns.push([&quot;&quot;,&quot;becomes&quot;]);if(this.flavour===&quot;continue&quot;&&flen){b.nextMatch=k+b.source.slice(k).length;\nvsns.push([b.source.slice(k),vtype])}else{becomes=[&quot;becomes&quot;,&quot;gains&quot;];c=tagcontents(b,begintags,becomes.concat(endtags),endtags,k);if(c&&endtags.indexOf(c[1])===-1){while(c){vsns.push(c);c=tagcontents(b,begintags,becomes,endtags,b.nextMatch)}c=tagcontents(b,begintags,[&quot;/&quot;+e,&quot;end&quot;+e],endtags,b.nextMatch)}if(!c){throwError(g,&quot;&lt;&lt;&quot;+e+&quot;&gt;&gt;: cannot find a matching close tag&quot;);return}vsns.push(c);if(this.flavour===&quot;continue&quot;){k=b.nextMatch;b.nextMatch=k+b.source.slice(k).length;vsns.push([b.source.slice(k),\n&quot;&quot;])}}if(this.flavour===&quot;remove&quot;)vsns.push([&quot;&quot;,&quot;becomes&quot;]);cn=0;m=insertElement(g,&quot;span&quot;,null,e);m.setAttribute(&quot;data-flavour&quot;,this.flavour);h=mkspan(&quot;initial&quot;);vsn=vsns.shift();h.tweecode=vsn[0];showVer(h,true);while(vsns.length&gt;0){if(vsn)vtype=vsn[1];vsn=vsns.shift();h=mkspan(vtype);h.tweecode=vsn[0]}if(typeof this.setup===&quot;function&quot;)this.setup(m,g,e,f)}function quantity(m){return m.children.length-1+(m.getAttribute(&quot;data-flavour&quot;)===&quot;remove&quot;?1:0)}function revisionSetup(m,g,e,f){m.className+=&quot; &quot;+\nf[0].replace(&quot; &quot;,&quot;_&quot;)}function keySetup(m,g,e,f){var fl=this.flavour,key=f[0];m.setEventListener(&quot;keydown&quot;,function l(e){var done=!revise(&quot;revise&quot;,m);if(done)m.removeEventListener(&quot;keydown&quot;,l)})}function timeSetup(m,g,e,f){function cssTimeUnit(s){if(typeof s===&quot;string&quot;)if(s.slice(-2).toLowerCase()===&quot;ms&quot;)return Number(s.slice(0,-2))||0;else if(s.slice(-1).toLowerCase()===&quot;s&quot;)return Number(s.slice(0,-1))*1E3||0;throwError(g,&quot;&lt;&lt;&quot;+e+'&gt;&gt;: &quot;'+s+'&quot; is not a valid CSS time unit');return 0}var fl=this.flavour;\nvar tm=cssTimeUnit(f[0]);setTimeout(function timefn(){var done=!revise(&quot;revise&quot;,m);if(!done)setTimeout(timefn,tm)},tm)}function hoverSetup(m){m.onmouseover=function(){revise(&quot;revise&quot;,this)};m.onmouseout=function(){revise(&quot;revert&quot;,this)};m=null}function mouseSetup(m){var fl=this.flavour,evt=window.onmouseenter===null?&quot;onmouseenter&quot;:&quot;onmouseover&quot;;m[evt]=function(){var done=!revise(&quot;revise&quot;,this);if(done)this[evt]=null};m=null}function linkSetup(m,g,e,f){var fl=this.flavour,l=Wikifier.createInternalLink(),\np=m.parentNode;l.className=&quot;link-internal replaceLink&quot;;p.insertBefore(l,m);l.insertBefore(m,null);l.onclick=function(){var p,done=false;if(m&&m.parentNode==this){done=!revise(&quot;revise&quot;,m);scrollWindowTo(m)}if(done){this.parentNode.insertBefore(m,this);this.parentNode.removeChild(this)}};l=null}function visitedSetup(m,g,e,f){var done,sav=state.active.variables,os=&quot;once seen&quot;,d=m.firstChild&&(this.flavour===&quot;insert&quot;?m.firstChild.nextSibling:m.firstChild).tweecode;sav[os]=sav[os]||{};if(d&&!sav[os].hasOwnProperty(d))sav[os][d]=\n1;else{for(var i=sav[os][d];i&gt;0&&!done;i--)done=!revise(&quot;revise&quot;,m,true);if(sav[os].hasOwnProperty(d))sav[os][d]+=1}}function insideDepartingSpan(elem){var r=elem.parentNode;while(!r.classList.contains(&quot;passage&quot;)){if(r.classList.contains(&quot;revision-span-out&quot;))return true;r=r.parentNode}}function reviseAll(rt,rname){var rall=document.querySelectorAll(&quot;.passage .&quot;+rname),ret=false;for(var i=0;i&lt;rall.length;i++)if(!insideDepartingSpan(rall[i]))ret=revise(rt,rall[i])||ret;return ret}function revise(rt,\nr,notrans){function doToGainerSpans(n,fn){for(var k=n-1;k&gt;=0;k--)if(rc[k+1].classList.contains(&quot;gains&quot;))fn(rc[k],notrans);else break}var ind2,curr,next,ind=-1,rev=rt===&quot;revert&quot;,rnd=rt.indexOf(&quot;random&quot;)&gt;-1,fl=r.getAttribute(&quot;data-flavour&quot;),rc=r.childNodes,cyc=fl===&quot;cycle&quot;,rcl=rc.length-1;for(var k=0;k&lt;=rcl;k++)if(rc[k].getAttribute(&quot;data-enabled&quot;)===&quot;true&quot;)ind=k;if(rev)ind-=1;curr=ind&gt;=0?rc[ind]:cyc?rc[rcl]:null;ind2=ind;if(rnd)ind2=(ind+Math.floor(Math.random()*rcl))%rcl;next=ind2&lt;rcl?rc[ind2+1]:\ncyc?rc[0]:null;var docurr=rev?showVer:hideVer;var donext=rev?hideVer:showVer;var currfn=function(){if(!(next&&next.classList.contains(&quot;gains&quot;))||rnd){docurr(curr,notrans);doToGainerSpans(ind,docurr,notrans)}};var nextfn=function(){donext(next,notrans);if(rnd)doToGainerSpans(ind2+1,donext,notrans)};if(!rev){currfn();nextfn()}else{nextfn();currfn()}return cyc?true:rev?ind&gt;0:ind2&lt;rcl-1}var begintags=[],endtags=[];[{name:&quot;insertlink&quot;,flavour:&quot;insert&quot;,trigger:&quot;link&quot;,setup:linkSetup},{name:&quot;timedinsert&quot;,\nflavour:&quot;insert&quot;,trigger:&quot;time&quot;,setup:timeSetup},{name:&quot;insertion&quot;,flavour:&quot;insert&quot;,trigger:&quot;revisemacro&quot;,setup:revisionSetup},{name:&quot;later&quot;,flavour:&quot;insert&quot;,trigger:&quot;visited&quot;,setup:visitedSetup},{name:&quot;keyinsert&quot;,flavour:&quot;insert&quot;,trigger:&quot;key&quot;,setup:keySetup},{name:&quot;replacelink&quot;,flavour:&quot;replace&quot;,trigger:&quot;link&quot;,setup:linkSetup},{name:&quot;timedreplace&quot;,flavour:&quot;replace&quot;,trigger:&quot;time&quot;,setup:timeSetup},{name:&quot;mousereplace&quot;,flavour:&quot;replace&quot;,trigger:&quot;mouse&quot;,setup:mouseSetup},{name:&quot;hoverreplace&quot;,flavour:&quot;replace&quot;,\ntrigger:&quot;hover&quot;,setup:hoverSetup},{name:&quot;revision&quot;,flavour:&quot;replace&quot;,trigger:&quot;revisemacro&quot;,setup:revisionSetup},{name:&quot;keyreplace&quot;,flavour:&quot;replace&quot;,trigger:&quot;key&quot;,setup:keySetup},{name:&quot;timedremove&quot;,flavour:&quot;remove&quot;,trigger:&quot;time&quot;,setup:timeSetup},{name:&quot;mouseremove&quot;,flavour:&quot;remove&quot;,trigger:&quot;mouse&quot;,setup:mouseSetup},{name:&quot;hoverremove&quot;,flavour:&quot;remove&quot;,trigger:&quot;hover&quot;,setup:hoverSetup},{name:&quot;removal&quot;,flavour:&quot;remove&quot;,trigger:&quot;revisemacro&quot;,setup:revisionSetup},{name:&quot;once&quot;,flavour:&quot;remove&quot;,trigger:&quot;visited&quot;,\nsetup:visitedSetup},{name:&quot;keyremove&quot;,flavour:&quot;remove&quot;,trigger:&quot;key&quot;,setup:keySetup},{name:&quot;continuelink&quot;,flavour:&quot;continue&quot;,trigger:&quot;link&quot;,setup:linkSetup},{name:&quot;timedcontinue&quot;,flavour:&quot;continue&quot;,trigger:&quot;time&quot;,setup:timeSetup},{name:&quot;mousecontinue&quot;,flavour:&quot;continue&quot;,trigger:&quot;mouse&quot;,setup:mouseSetup},{name:&quot;keycontinue&quot;,flavour:&quot;continue&quot;,trigger:&quot;key&quot;,setup:keySetup},{name:&quot;cycle&quot;,flavour:&quot;cycle&quot;,trigger:&quot;revisemacro&quot;,setup:revisionSetup},{name:&quot;mousecycle&quot;,flavour:&quot;cycle&quot;,trigger:&quot;mouse&quot;,setup:mouseSetup},\n{name:&quot;timedcycle&quot;,flavour:&quot;cycle&quot;,trigger:&quot;time&quot;,setup:timeSetup},{name:&quot;keycycle&quot;,flavour:&quot;replace&quot;,trigger:&quot;key&quot;,setup:keySetup}].forEach(function(e){e.handler=revisionSpanHandler;e.shorthand=[&quot;link&quot;,&quot;mouse&quot;,&quot;hover&quot;].indexOf(e.trigger)&gt;-1;macros[e.name]=e;macros.registerTags(e.name);begintags.push(e.name);endtags.push(&quot;/&quot;+e.name,&quot;end&quot;+e.name)});macros[&quot;revertlink&quot;]=macros[&quot;reviselink&quot;]=macros[&quot;randomiselink&quot;]=macros[&quot;randomizelink&quot;]={handler:function(a,b,c){function disableLink(l){l.style.display=\n&quot;none&quot;}function enableLink(l){l.style.display=&quot;inline&quot;}function updateLink(l){if(l.className.indexOf(&quot;random&quot;)&gt;-1){enableLink(l);return}var rall=document.querySelectorAll(&quot;.passage .&quot;+rname),cannext,canprev,ind,r,fl;for(var i=0;i&lt;rall.length;i++){r=rall[i],fl=r.getAttribute(&quot;data-flavour&quot;);if(insideDepartingSpan(r))continue;if(fl===&quot;cycle&quot;)cannext=canprev=true;else{if(r.firstChild.getAttribute(&quot;data-enabled&quot;)===&quot;false&quot;)canprev=true;if(r.lastChild.getAttribute(&quot;data-enabled&quot;)===&quot;false&quot;)cannext=true}}var can=\nl.classList.contains(&quot;revert&quot;)?canprev:cannext;(can?enableLink:disableLink)(l)}function toggleText(w){w.classList.toggle(rl+&quot;Enabled&quot;);w.classList.toggle(rl+&quot;Disabled&quot;);w.style.display=w.style.display===&quot;none&quot;?&quot;inline&quot;:&quot;none&quot;}if(c.length&lt;2){throwError(a,&quot;&lt;&lt;&quot;+b+&quot;&gt;&gt;: insufficient arguments (requires at least 2)&quot;);return}var l,rev,rname,rl=&quot;reviseLink&quot;,v=&quot;&quot;,end=false,out=false;rname=c.shift().replace(&quot; &quot;,&quot;_&quot;);l=Wikifier.createInternalLink(a,null);l.className=&quot;link-internal &quot;+rl+&quot; &quot;+rl+&quot;_&quot;+rname+&quot; &quot;+\nb;if(c.length&gt;1&&c[0][0]===&quot;$&quot;){v=c[0].slice(1);c.shift()}switch(c[c.length-1]){case &quot;end&quot;:end=true;c.pop();break;case &quot;out&quot;:out=true;c.pop();break}var h=state.active.variables;for(var i=0;i&lt;c.length;i++){var on=i===Math.max(c.indexOf(h[v]),0),d=insertElement(null,&quot;span&quot;,null,rl+(on?&quot;En&quot;:&quot;Dis&quot;)+&quot;abled&quot;);if(on){h[v]=c[i];l.setAttribute(&quot;data-cycle&quot;,i)}else d.style.display=&quot;none&quot;;insertText(d,c[i]);l.appendChild(d)}l.onclick=function(){reviseAll(b,rname);var t=this.childNodes,u=this.getAttribute(&quot;data-cycle&quot;)-\n0,m=t.length,lall;if((end||out)&&u===m-(end?2:1))if(end){var n=this.removeChild(t[u+1]);n.className=rl+&quot;End&quot;;n.style.display=&quot;inline&quot;;this.parentNode.replaceChild(n,this)}else{this.parentNode.removeChild(this);return}else{toggleText(t[u]);u=(u+1)%m;if(v)h[v]=c[u];toggleText(t[u]);this.setAttribute(&quot;data-cycle&quot;,u)}lall=document.getElementsByClassName(rl+&quot;_&quot;+rname);for(var i=0;i&lt;lall.length;i++)updateLink(lall[i])};l=null}};macros[&quot;mouserevise&quot;]=macros[&quot;hoverrevise&quot;]={handler:function(a,b,c,d){var endtags=\n[&quot;/&quot;+b,&quot;end&quot;+b],evt=window.onmouseenter===null?&quot;onmouseenter&quot;:&quot;onmouseover&quot;,t=tagcontents(d,[b],endtags,endtags,d.source.indexOf(&quot;&gt;&gt;&quot;,d.matchStart)+2);if(t){var rname=c[0].replace(&quot; &quot;,&quot;_&quot;),h=insertElement(a,&quot;span&quot;,null,&quot;hoverrevise hoverrevise_&quot;+rname),f=function(){var done=!reviseAll(&quot;revise&quot;,rname);if(b!=&quot;hoverrevise&quot;&&done)this[evt]=null};new Wikifier(h,t[0]);if(b===&quot;hoverrevise&quot;){h.onmouseover=f;h.onmouseout=function(){reviseAll(&quot;revert&quot;,rname)}}else h[evt]=f;h=null}}};macros.registerTags(&quot;mouserevise&quot;);\nmacros.registerTags(&quot;hoverrevise&quot;);macros[&quot;instantrevise&quot;]={handler:function(a,b,c,d){reviseAll(&quot;revise&quot;,c[0].replace(&quot; &quot;,&quot;_&quot;))}}})();</div><div tiddler="Culture shock and coping" tags="health" modified="201403051449" created="201403051449" modifier="twee">!Culture shock and coping\n!!!!Subhead goes here\n   * Very brief, basic characteristics of &quot;culture shock&quot;\n   * Managing networks abroad (balance new social networks with a relatively small amount of contact back home)\n   * Links to info on culture shock\n\n&lt;&lt;continue &quot;Illness abroad&quot;&gt;&gt;</div><div tiddler="Who to Contact" tags="safety" modified="201403051449" created="201403051449" modifier="twee">!Who to Contact\n!!!!Subhead goes here\n   * Know local emergency numbers and have them on your cell phone\n   * Contact resident staff before calling home to parents\n   * Contact GEO if you don't feel comfortable talking to resident staff\n\n&lt;&lt;continue &quot;Emergencies&quot;&gt;&gt;</div><div tiddler="Go To Link On Timer" tags="script" modified="201403051449" created="201403051449" modifier="twee">(function () {\n    version.extensions.timedgotoMacro = {\n        major: 1,\n        minor: 2,\n        revision: 0\n    };\n    macros[&quot;goto&quot;] = macros.timedgoto = {\n        timer: null,\n        handler: function (a, b, c, d) {\n            function cssTimeUnit(s) {\n                if (typeof s == &quot;string&quot;) {\n                    if (s.slice(-2).toLowerCase() == &quot;ms&quot;) {\n                        return +(s.slice(0, -2)) || 0\n                    } else {\n                        if (s.slice(-1).toLowerCase() == &quot;s&quot;) {\n                            return +(s.slice(0, -1)) * 1000 || 0\n                        }\n                    }\n                }\n                throwError(a, s + &quot; isn't a CSS time unit&quot;);\n                return 0\n            }\n            var t, d, m, s;\n            t = c[c.length - 1];\n            d = d.fullArgs();\n            m = 0;\n            if (b != &quot;goto&quot;) {\n                d = d.slice(0, d.lastIndexOf(t));\n                m = cssTimeUnit(t)\n            }\n            d = eval(Wikifier.parse(d));\n            if (d + &quot;&quot; && state && state.init) {\n                if (macros[&quot;goto&quot;].timer) {\n                    clearTimeout(macros[&quot;goto&quot;].timer)\n                }\n                //s = state.history[0].passage.title;\n                macros[&quot;goto&quot;].timer = setTimeout(function () {\n                    state.display(d, a);\n                }, m)\n            }\n        }\n    };\n}());</div><div tiddler="Stop All Sounds" tags="script" modified="201403051449" created="201403051449" modifier="twee">//based on http://www.glorioustrainwrecks.com/node/5061\n(function () {\n    macros.add([&quot;stopAllSounds&quot;, &quot;pauseAllSounds&quot;], {\n        version: {\n            major: 1,\n            minor: 0,\n            revision: 0\n        },\n        handler: function () {\n            var sounds = macros.get(&quot;playSound&quot;).soundtracks;\n            for (var i in sounds) {\n                if (sounds.hasOwnProperty(i)) {\n                    sounds[i].pause();\n                    if (this.name == &quot;stopAllSounds&quot; && sounds[i].currentTime) {\n                        sounds[i].currentTime = 0;\n                    }\n                }\n            }\n        }\n    });\n}());</div><div tiddler="Avoid risky behaviors" tags="safety" modified="201403051449" created="201403051449" modifier="twee">!Avoid risky behaviors\n!!!!Subhead goes here\n   * Driving and road safety are the primary cause of injury\n   * AIDS/STDs - avoid unprotected sex\n   * Alcohol/drugs\n   \n&lt;&lt;sidebar-box&gt;&gt;\n   [[Give me some tips on road safety|Road safety]]\n   [[Are there special dangers in using drugs abroad?|Drug use abroad]]\n   [[What should I know about street safety?|Street safety]]\n&lt;&lt;/sidebar-box&gt;&gt;\n\n&lt;&lt;continue &quot;LGBQTI issues&quot;&gt;&gt;</div><div tiddler="About the Presentation" tags="nosave" modified="201403051449" created="201403051449" modifier="twee">!About This Presentation\n!!!!Choose mode to continue\nThis presentation can be viewed in Automatic Mode, with a narrator speaking the text, or in Manual Mode. You can turn Automatic Mode on or off at any time using the button in the upper right.\n\nYou can always hit the &lt;span class='continue-button' style=&quot;clear:both;&quot;&gt;&lt;&lt;click &quot;Continue&quot; $first&gt;&gt;&lt;&lt;set options.autoplay to true&gt;&gt;&lt;&lt;updateAutoplay&gt;&gt;&lt;&lt;saveoptions&gt;&gt;&lt;&lt;/click&gt;&gt;&lt;span class=&quot;anim-wrapper&quot;&gt;&lt;span class='onward-arrow fade-bounce'&gt;&raquo;&lt;/span&gt;&lt;/span&gt;&ensp;&lt;/span&gt; button at any time to advance.\n\n&lt;&lt;click &quot;Continue in Automatic Mode&quot; $first&gt;&gt;\s\n    &lt;&lt;set options.autoplay to true&gt;&gt;\s\n    &lt;&lt;updateAutoplay&gt;&gt;\s\n    &lt;&lt;saveoptions&gt;&gt;\s\n&lt;&lt;/click&gt;&gt;\n&lt;&lt;click &quot;Continue in Manual Mode&quot; $first&gt;&gt;\s\n    &lt;&lt;set options.autoplay to false&gt;&gt;\s\n    &lt;&lt;updateAutoplay&gt;&gt;\s\n    &lt;&lt;saveoptions&gt;&gt;\s\n&lt;&lt;/click&gt;&gt;\s\n&lt;&lt;stopAllSounds&gt;&gt;\s\n&lt;&lt;set options.autoplaydelay to 1000 &gt;&gt;\s</div><div tiddler="Customs" tags="sidebar travel" modified="201403051449" created="201403051449" modifier="twee">&lt;&lt;sidebar &quot;Customs: What It Is and How to Navigate It&quot;&gt;&gt;\n\nText goes here!\n\n&lt;&lt;continue &quot;Tips for packing&quot;&gt;&gt;</div><div tiddler="PassageDone" tags="nobr" modified="201403051449" created="201403051449" modifier="twee">/% Runs once the passage has completely rendered. %/\n&lt;&lt;if options.autoplay&gt;&gt;\n    &lt;&lt;autoplay $autoplaySound $autoplayDestination&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n&lt;&lt;script&gt;&gt;\n    var index = state.active.variables.index;\n    var passage = state.active.title;\n    var currentPassage = index[passage];\n    var tags = state.active.variables.tags;\n    var sections = state.active.variables.backgrounds;\n    var bookmarks = state.active.variables.bookmarks;\n    var currentTag = tags.indexOf(currentPassage.tag);\n    \n    var totalPassages = state.active.variables.totalPassages;\n    console.log(&quot;current tag: &quot; + currentTag + &quot;, no. &quot; + currentPassage.tag);\n\n    if (currentPassage.hasOwnProperty(&quot;enumeration&quot;)) {\n        //The progress marker will appear halfway through the imaginary rectangle\n        //of each passage on the progress meter, except for the last, where we\n        //show it completely filling the bar.\n        var progress = currentPassage.enumeration;\n        if (progress !== totalPassages) { progress = progress - 0.5 }\n    }\n    else if (currentTag &lt; 1) {\n        var progress = 0;\n    }\n    console.log(&quot;Current passage: &quot; + progress + &quot; of &quot; + totalPassages);\n    var progressPercent = (progress / totalPassages)* 100;\n    $(&quot;#pb-complete&quot;).css(&quot;right&quot;, 100 - progressPercent + &quot;%&quot;);\n    if (state.active.variables.csscalc === true) {\n        $(&quot;#pb-position&quot;).css(&quot;left&quot;, &quot;calc(&quot; + progressPercent + &quot;% - 2px)&quot;);\n    }\n    else { //if CSS calc() isn't supported, we don't try to be as exact\n        $(&quot;#pb-position&quot;).css(&quot;left&quot;, progressPercent + &quot;%&quot;);\n    }\n    console.log(&quot;Set #pb-complete right to: &quot; + (100 - (progress / totalPassages)* 100) + &quot;%&quot;);\n    console.log(&quot;Set #pb-position left to: &quot; + (progress / totalPassages)* 100 + &quot;%&quot;);\n\n    if (currentTag &gt; 0) { //the user has read enough to need to see the chapter button\n        if (currentTag &gt; options.chapterprogress) {\n                options.chapterprogress = currentTag;\n                //macros.get(&quot;saveoptions&quot;).handler();\n                $(&quot;#story-rewind, a#rewind-icon&quot;).addClass(&quot;hilight&quot;);\n                setTimeout(function() {\n                    $(&quot;#story-rewind, a#rewind-icon&quot;).removeClass(&quot;hilight&quot;);\n                }, 1100);\n            }\n        console.log(&quot;current tag: &quot; + currentTag);\n        $(&quot;#story-rewind&quot;).empty().append(function(){\n            var html = &quot;Navigate&lt;div&gt;&lt;a id='rewind-icon'&gt;&lt;/a&gt;&lt;ul&gt;&lt;li class='sep'&gt;Jump to Section&lt;/li&gt;&quot;;\n            for (var i = 1; i &lt; (options.chapterprogress + 1); i++) {\n                if (bookmarks[tags[i]] === passage) {\n                    html += &quot;&lt;li class='disable'&gt;&quot; + sections[tags[i]].section + &quot;&lt;/li&gt;&quot;;\n                }\n                else {\n                    html += &quot;&lt;li&gt;&lt;a class='chapter-list' data='&quot; + bookmarks[tags[i]] + &quot;'&gt;&quot; + sections[tags[i]].section + &quot;&lt;/a&gt;&lt;/li&gt;&quot;;\n                }\n            }\n            html+=&quot;&lt;/ul&gt;&lt;/div&gt;&quot;;\n            return html;\n        });\n        $(&quot;.chapter-list&quot;).click(function(){\n            var $this = $(this);\n            console.log($this);\n            console.log(&quot;You clicked on &quot; + $this.attr(&quot;data&quot;) + &quot;. You are on &quot; + state.active.title + &quot;.&quot;);\n            if ($this.attr(&quot;data&quot;) !== state.active.title) {\n                state.display($this.attr(&quot;data&quot;));\n            }\n            return false;\n        });\n        $(&quot;#story-rewind&quot;).show();\n    }\n\n\n\n    if (index.hasOwnProperty(passage)) { //skip this for passages that aren't in the index\n        //update image if necessary\n        var currentImage = getBackgroundImage(&quot;.img-anchor&quot;);\n        var url = currentPassage.url;\n        url = url.substring(url.lastIndexOf('/', url.lastIndexOf('/') - 1) + 1);\n        if (url !== currentImage) { //Background image changing is proxy for section change\n            // First, animate the section name change\n            $(&quot;#section-name&quot;).html(currentPassage.section).addClass(&quot;hilight&quot;);\n            setTimeout(function() {\n                $(&quot;#section-name&quot;).removeClass(&quot;hilight&quot;);\n            }, 1100);\n\n            // Next, change the background image\n            var $active = $(&quot;.img-anchor&quot;);\n            var $passive = $(&quot;.img-fader&quot;);\n            $(&quot;.img-container&quot;).toggleClass('img-anchor img-fader');\n            $passive.css(&quot;background-image&quot;, &quot;url(&quot; + url + &quot;)&quot;);\n            $passive.removeClass('background-fade');\n            $active.addClass(&quot;background-fade&quot;);\n            //look for next tag: if there is one, cache its background image\n            var nextTag = tags.indexOf(currentTag) + 1;\n            if (nextTag &lt; tags.length) {\n                setTimeout(function() {\n                    var nextUrl = sections[tags[nextTag]].url;\n                    $active.css(&quot;background-image&quot;, &quot;url(&quot; + nextUrl + &quot;)&quot;);\n                }, 1100);\n            }\n        }\n    }\n\n    var passage = tale.get(state.active.title);\n    if (passage.tags.indexOf(&quot;sidebar&quot;) === -1 && $(&quot;#passages&quot;).hasClass(&quot;sidebar&quot;)) {\n        //we are going from a sidebar to the main flow of the presentation\n        passage.classes.purge(&quot;flip&quot;);\n        $(&quot;#passages&quot;).removeClass(&quot;sidebar&quot;);\n    }\n    else if (!$(&quot;#passages&quot;).hasClass(&quot;sidebar&quot;)) {\n        $(&quot;.passage&quot;).removeClass(&quot;flip&quot;);\n    }\n    // Display for controls\n    if (tale.get(state.active.title).tags.indexOf(&quot;nosave&quot;) === -1 && $(&quot;#custom&quot;).is(&quot;:hidden&quot;)) {\n        $(&quot;#custom&quot;).slideDown(&quot;fast&quot;);\n    }\n    else if (tale.get(state.active.title).tags.indexOf(&quot;nosave&quot;) !== -1) {\n        $(&quot;#custom&quot;).slideUp(&quot;fast&quot;);\n    }\n&lt;&lt;/script&gt;&gt;</div><div tiddler="Drug use abroad" tags="safety sidebar" modified="201403051449" created="201403051449" modifier="twee">&lt;&lt;sidebar &quot;Legal Dangers of Drug Use Abroad&quot;&gt;&gt;\n\nLegal dangers of using drugs abroad.\n\n&lt;&lt;continue &quot;LGBQTI issues&quot;&gt;&gt;</div><div tiddler="CSS for circle graphs" tags="stylesheet" modified="201403051449" created="201403051449" modifier="twee">.circle-graph {\n  width: 30px;\n  height: 30px;\n  -moz-border-radius: 50%;\n  -webkit-border-radius: 50%;\n  border-radius: 50%;\n  display:inline-block;\n}\n\n.circle-graph-full {\n    background: #0688fa;\n}\n\n.circle-graph-empty {\n    background: #bdbdbd;\n}\n\n.circle-graph-clip-container {\n    position:relative;\n    width:30px;\n    height:30px;\n    display:inline-block;\n}\n\n.circle-graph-clip {\n    position:absolute;\n    top:0;\n    left:0;\n}</div><div tiddler="CSS for Sidebars" tags="stylesheet" modified="201403051449" created="201403051449" modifier="twee">#passages.sidebar {\n    background-color: #FAF3E8;\n}\n\n.passage h1.sidebar {\n    color:black;\n}\n\n.passage h4.sidebar {\n    margin-bottom:0;\n}\n\n.passage h6.sidebar {\n    margin:-0.4em 0 0 0;\n}\n\n.passage h6.sidebar a {\n    color:#a8a8a8;\n}\n\n.passage hr.sidebar {\n    background-color:black;\n}\n\n\n.sidebar-box {\n  display:table;  \n}\n\n.sidebar-head {\n    background-color:#dd3b2a;\n    border:1px solid #dd3b2a;\n    border-radius:5px 0 0 5px;\n    color:white;\n    padding:3px 10px;\n    display:table-cell;\n    vertical-align:middle;\n    text-align:center;\n    width:4em;\n    line-height:140%;\n}\n\n.sidebar-container {\n  margin:0;\n}\n\nul.sidebar-links {\n    border:1px solid #dd3b2a;\n    border-radius:0 5px 5px 0;\n    padding:3px 10px 3px 8px;\n    line-height:100%;\n    display:table-cell;\n    vertical-align:middle;\n    list-style-type: none;\n}\n\n.sidebar-links li {\n  margin:9px 0;\n}\n\n.sidebar-links a, sidebar-link a:hover {\n    text-decoration:underline;\n    color:#dd3b2a;\n}</div><div tiddler="MenuOptions" tags="" modified="201403051449" created="201403051449" modifier="twee">&lt;&lt;optiontoggle &quot;autoplay&quot;&gt;&gt;Autoplay&lt;&lt;/optiontoggle&gt;&gt;</div><div tiddler="Configuration" tags="script" modified="201403051449" created="201403051449" modifier="twee">config.saves.autosave = true;\nconfig.saves.slots = 0;\nconfig.errorName = &quot;presentation&quot;;\n//config.disableHistoryControls = true;\n\nconfig.saves.isAllowed = function () {\n    if (tale.get(state.active.title).tags.indexOf(&quot;nosave&quot;) === -1) { \n       return true; \n    }\n    return false; \n};</div><div tiddler="Outgoing Passage Transition Config" tags="script" modified="201403051449" created="201403051449" modifier="twee">// # of milliseconds before outgoing elements are removed\nconfig.passageTransitionOut = 780; // it's probably best if it's just slightly longer (say 10ms or so) than your outgoing transition delay</div><div tiddler="Things you need to know about traveling" tags="travel" modified="201403051449" created="201403051449" modifier="twee">!Traveling while abroad\n!!!!Important things to keep in mind when planning travel\nFirst, always ''keep your Resident Director or staff informed'' of your travel. Also keep your family in the loop; if there is an emergency back home, they will want to know how get in touch with you!\n\nSome countries that you plan to visit may have different entry requirements than your primary host country. ''Investigate all the countries you're interested in'' before you leave the US. If any require a visa, it will probably be easier to get the visa while you're in the US (this applies to both international students and US citizens)!\n\nIn every country you visit, make a point of knowing where your ''home country's nearest embassy or consulate'' is. You want to know where you can find support if you get into real trouble. (If you're a US citizen, you should bookmark the [[list of US embassies around the world|http://www.usembassy.gov/]].)\n\nFinally, independent travel is one of the ''most expensive activities'' you can undertake abroad. Be sure to budget appropriately, and remember to consider safety while you're on the lookout for ways to travel on the cheap!\n&lt;div class=&quot;talkbox&quot;&gt;\s\n|box|k\n|!Wisdom from alums|\n|Every year, students tell us that while they loved the traveling they did abroad, they also regretted not getting to know their host city better. Consider staying the value of staying put sometimes rather than striking out.|\n&lt;/div&gt;\n&lt;&lt;continue &quot;Documents&quot;&gt;&gt;\s</div><div tiddler="Avoiding unwanted attention" tags="safety sidebar" modified="201403051449" created="201403051449" modifier="twee">&lt;&lt;sidebar &quot;Tips For Avoiding Unwanted Attention&quot;&gt;&gt;\n\nText will go here one day!\n\n&lt;&lt;continue &quot;Who to Contact&quot;&gt;&gt;</div><div tiddler="StoryMenu" tags="" modified="201403051449" created="201403051449" modifier="twee">/% &lt;a id=&quot;audio-control&quot; href=&quot;#&quot;&gt;[ &gt; ]&lt;/a&gt; %/</div><div tiddler="Course equivalency evaluations" tags="academics" modified="201403051449" created="201403051449" modifier="twee">!Course equivalency evaluations\n!!!!Subhead goes here. If possible, we should also give the voiceover artist an alternate script for this one!\n   * Course equivalencies and credits are determined by VU faculty\n   * Very simple precis of the process, _linking out_ to detailed explanations.\n\n&lt;&lt;continue &quot;Things you need to know about traveling&quot;&gt;&gt;</div><div tiddler="Budgeting" tags="sidebar living" modified="201403051449" created="201403051449" modifier="twee">&lt;&lt;sidebar &quot;Basics of Budgeting&quot;&gt;&gt;\n\nText goes here!\n\n&lt;&lt;continue &quot;Where will you live?&quot;&gt;&gt;</div><div tiddler="Being out" tags="safety sidebar" modified="201403051449" created="201403051449" modifier="twee">&lt;&lt;sidebar &quot;Countries Where It Is Particularly Dangerous to Be Out&quot;&gt;&gt;\n\nCountries where being out is illegal or particularly dangerous, and/or where speech is legally restricted\n\n&lt;&lt;continue &quot;Sexual harassment and sexual assault&quot;&gt;&gt;</div><div tiddler="Sidebar Stack" tags="script" modified="201403051449" created="201403051449" modifier="twee">/* Syntax:\n    &lt;&lt;sidebar-box [optional:text to replace &quot;More&quot;]&gt;&gt;\n        [[Link text|Passage Name]]\n        ...\n    &lt;&lt;/sidebar-box&gt;&gt; */\nmacros.add(&quot;sidebar-box&quot;, {\n    version: { major: 1, minor: 0, revision: 0 },\n    tags: null,\n    handler: function ()\n    {\n        if (this.payload.length !== 0)\n        {\n            // create the basic elements\n            var   sidebar = document.createElement(&quot;div&quot;)\n                , header  = document.createElement(&quot;div&quot;)\n                , links   = document.createElement(&quot;ul&quot;);\n\n            // setup the basic elements\n            sidebar.className = this.name;\n            header.className  = &quot;sidebar-head&quot;;\n            header.innerHTML  = this.args.length !== 0 ? this.args[0] : &quot;More&quot;;\n            links.className   = &quot;sidebar-links&quot;;\n            sidebar.appendChild(header);\n            sidebar.appendChild(links);\n\n            // process the payload\n            var wikitext = this.payload[0].contents.trim().split(/\ss*\sn\ss*/);\n            for (var i = 0; i &lt; wikitext.length; i++)\n            {\n                var linkEl = document.createElement(&quot;li&quot;);  // use &quot;p&quot; for paragraph elements\n                new Wikifier(linkEl, wikitext[i]);\n                links.appendChild(linkEl);\n            }\n\n            // append the sidebar to the output buffer\n            this.output.appendChild(sidebar);\n        }\n    }\n});</div><div tiddler="Copying Documents" tags="" modified="201403051449" created="201403051449" modifier="twee">!Copying Documents\n!!!!A &quot;Plan B&quot; for when you lose your passport or other important documents\nYou will be taking every precaution to keep your important documents safe, but also make sure you have a Plan B to fall back on.\n\nIt is much easier to replace a lost passport if you can show a photocopy of your missing document. So keep ''multiple copies'' of your passport and other key documents (visa or residence permit, credit cards, insurance cards, trip itineraries). Never keep a copy in the same place as the original--if one gets stolen, they both will!\n\nGEO recommends that you:\n#Scan your documents and email them to yourself, or store them in the cloud.\n#Leave a photocopy at home with your family.\n#Keep a photocopy in your luggage, in a //different bag// from the original.\n#Leave your original passport in a safe place when you're out and about; carry a photocopy!\n\nIf you do lose your passport while abroad, you will need to ''get in touch with the nearest embassy'' or consulate (you may want to program the contact info into your phone). You should also ''notify your resident director'' or designated contact person.</div><div tiddler="GEO Photo Contest" tags="home" modified="201403051449" created="201403051449" modifier="twee">!GEO's Annual Photo Contest\n!!!!Keep the contest in mind as you decide what to photograph!\nEvery year, GEO conducts a photo contest. We solicit photos from students who went abroad in the 12 months previous and choose the best images to feature.\n\nWe will contact you via email, usually in the summer, to request your entries in the contest. \nThere are prizes, but we also invite the entire Vanderbilt campus and alumni community to take part in the judging process. If you're a winner, your photo will be seen by tens of thousands of people! We put the winning photos on live exhibit in the Student Life Center, and they tend to show up in campus publications as well, including //Vanderbilt Magazine.//\n\nPhotos can be of any subject (scenery, activities, cultures, etc.) but please be tasteful and respectful as you snap your pics.\n\nIf you just want to share photos of your experiences without entering the contest, we have an outlet for that, too!\n\nGEO is particularly keen on photos that show Vanderbilt students participating in academic and cultural endeavors. Scenery is beautiful, but action shots with Vandy representatives (such as yourself) tell interesting stories!\n\n&lt;&lt;sidebar-box&gt;&gt;\n   [[Quick guidelines for ethical photography|Ethical photography]]\n&lt;&lt;/sidebar-box&gt;&gt;\n\n&lt;&lt;continue &quot;What to do next&quot;&gt;&gt;\s</div><div tiddler="Image Utilities" tags="script" modified="201403051449" created="201403051449" modifier="twee">window.getBackgroundImage = function (element) {\n	var url = $(element).css('background-image');\n	if (url == &quot;&quot; || url == &quot;none&quot;) return url;\n	url = /^url\s((['&quot;]?)(.*)\s1\s)$/.exec(url);\n	url = url[2];//continue with only the filepath portion\n	var filename = url.substring(url.lastIndexOf('/', url.lastIndexOf('/') - 1) + 1);\n	filename = filename ? filename : &quot;&quot;;\n	return filename;\n};</div><div tiddler="CSS" tags="stylesheet" modified="201403051449" created="201403051449" modifier="twee">/* Change box-sizing model for all elements */\n/*\n*, *:before, *:after {\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    box-sizing:border-box;\n}\n*/\n/* Override SugarCube button animations & styles\nbutton\n{\n    -webkit-transition-duration: 0s;\n    -moz-transition-duration: 0s;\n    transition-duration: 0s;\n}\nbutton:hover {\n    background-color: #58e;\n    border: 1px solid #7af;\n}\nbutton:active {\n    background-color: #f70;\n    border: 1px solid #f92;\n}\n*/\n\n/* CSS3 calc() support check */\n#css3-calc {\n    width: 10px;\n    width: calc(10px + 10px);\n    display: none;\n}\n\nhtml {\n  height:100%;\n}\nfigcaption {\n    font-size:80%;\n    font-style:italic;\n}\n.inline {\n    display: inline-block;\n}\n.inline-head {\n    font-weight:bold;\n}\n.left {\n    float: left;\n}\n.right {\n    float:right;\n}\n.talkbox {\n  width:85%;\n  margin:auto;\n}\nbody {\n    color: #000;\n    font-family: 'Open Sans',serif;\n    margin:0;\n    height:100%;\n    overflow:auto;\n    position:relative;\n    z-index: 3;\n}\nh1 {\n    font-family: 'Arvo',serif;\n    font-weight:700;\n    font-size: 36px;\n    line-height: 38px;\n    margin: 0 0 10px 0;\n    color: #dd3b2a;\n}\nh4 {\n    font-family: 'Arvo',serif;\n    font-weight:700;\n    font-size:18px;\n    margin-top:0;\n}\nh6 {\n    font-family: 'Arvo',serif;\n    font-weight:700;\n    font-size:14px;\n    margin:0;\n}\n.img-container {\n    position:fixed;\n    top:0;\n    left:0;\n    background-repeat: no-repeat;\n    background-position: center;\n    background-attachment: fixed; \n    -webkit-background-size: cover;\n    -moz-background-size: cover;\n    -o-background-size: cover;\n    background-size: cover;\n    height:100%;\n    width:100%;\n    -webkit-transition: opacity 1s ease-in-out;\n    -moz-transition: opacity 1s ease-in-out;\n    -o-transition: opacity 1s ease-in-out;\n    transition: opacity 1s ease-in-out;\n}\n.img-anchor {\n    background-image: url(images/Wheelock_Elizabeth_Rose_Tulips_at_Keukenhof_Gardens_outside_Amsterdam.jpg);\n    opacity:1;\n    z-index:1;\n}\n.img-fader {\n    z-index:2;\n    \n}\n.background-fade {\n    opacity:0;\n}\n\n\n/* Make link font slightly smaller to compensate for boldface */\n.content a.link-internal,\n.content a.link-external,\n.content a.link-back,\n.content a.link-return {\n    font-size: 90%;\n}\n.content strong {\n    font-size: 90%;\n}\n\n/* Basic passage styles */\n#passages {\n    color: #000;\n    font-size:15px;\n    background-color:#fefefe;\n    width:60%;\n    min-height:100%;\n    margin: 0 auto;\n    border-left:none;\n    padding: 55px 2em 3em 2em;\n    -moz-box-shadow: 0 0 20px black;\n    -webkit-box-shadow: 0 0 20px black;\n    box-shadow: 0 0 20px black;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    box-sizing:border-box;\n    position:relative;\n}\n.passage {\n    line-height: 1.75;\n    margin-bottom: 0;\n    text-align: left;\n    height:100%;\n}\n#ui-bar {\n    display:none;\n}\n#passages table.alternating-rows tr:nth-child(odd) {\n    background-color:#EEEEEE;/*Fallback*/\n    background-color:rgba(221,221,221,0.5);\n}\n#passages table.alternating-rows tr:nth-child(even) {\n    background-color:#DDDDDD;/*Fallback*/\n    background-color:rgba(204,204,204,0.5);\n}\n#passages table.box {\n    background-color:#EEEEEE;/*Fallback*/\n    background-color:rgba(221,221,221,0.5);\n}\n#passages table.box th {\n    background-color:#DDDDDD;/*Fallback*/\n    background-color:rgba(204,204,204,0.5);\n}\n#passages table.box tr:first-child td,\n#passages table.box tr:first-child th {\n    padding-top:10px;\n}\n#passages table.box tr:last-child td {\n    padding-bottom:10px;\n}\n#passages table {\n    font-size: 80%;\n    border-collapse: collapse;\n    line-height:145%;\n}\n#passages th, #passages td {\n    padding: 0.5em 1em;\n}\ntable a.link-internal, a.link-external, a.link-back, a.link-return {\n    font-size: 100%!important;\n}\n\n\n/* Figures */\nfigure {\n  margin-left:auto;\n  margin-right:auto;\n  display:table;\n}</div><div tiddler="Tips for packing" tags="travel" modified="201403051449" created="201403051449" modifier="twee">!Tips for packing\n!!!!Subhead goes here\n   * Very brief tips\n   * _Link out_ to power converter info\n\n&lt;&lt;sidebar-box&gt;&gt;\n   [[More packing tips!|Further packing tips]]\n&lt;&lt;/sidebar-box&gt;&gt;\n\n&lt;&lt;continue &quot;Contacts and communications&quot;&gt;&gt;</div><div tiddler="Visa Acquisition" tags="sidebar travel" modified="201403051449" created="201403051449" modifier="twee">&lt;&lt;sidebar &quot;How to Get a Travel Visa&quot;&gt;&gt;\nA ''travel visa'' is not a credit card! It's a stamp or sticker placed in your passport that allows you to visit a foreign country. Depending on your own nationality and your reasons for traveling, ''you may or may not need a visa'' to enter a given country.\n\nIf you will be taking classes from an institution based in your host country, you will usually need a student-class visa to enter. Entry requirements are often lower when you are simply visiting as a tourist. \n\nRequirements to get a visa may include photographs, financial information, a letter from your host university, a criminal background check, or even a personal appearance at the foreign consulate. Your own nationality may have a major impact on the requirements you face in getting a visa. For example, US citizens typically face lower barriers than students of other nationalities. \n\nIn certain cases, students may be able to enter a country without a visa, but will need to obtain a ''residence permit'' after entering.\n\nYour study abroad provider will inform you about your visa requirements. If you are uncertain or have general questions, please contact GEO! \n\n|box|k\n|&gt;|!Further information|\n|[[Travisa|http://www.travisa.com/]]|Easy access to visa requirements for all countries and most nationalities|\n|[[Visa @Wikipedia|https://en.wikipedia.org/wiki/Visa_(document)]]|Article providing information about visa policies around the world|\n\n&lt;&lt;continue &quot;Traveling with medications&quot;&gt;&gt;\s</div><div tiddler="Money" tags="living" modified="201403051449" created="201403051449" modifier="twee">!Money\n!!!!Subhead goes here\n   * Credit cards, debit cards, ATM (in brief)\n   * _Sidebar_: Budgeting (w/link to existing budgeting materials)\n\n&lt;&lt;sidebar-box&gt;&gt;\n   [[How do I budget for myself?|Budgeting]]\n&lt;&lt;/sidebar-box&gt;&gt;\n\n&lt;&lt;continue &quot;Where will you live?&quot;&gt;&gt;</div><div tiddler="What to do next" tags="finish" modified="201403051449" created="201403051449" modifier="twee">!What to do next\n!!!!Subhead goes here\n   * Link to checklist of responsibilities\n   * Visa/Passport\n\n&lt;&lt;continue &quot;Index&quot;&gt;&gt;</div><div tiddler="Your status as a Vanderbilt student" tags="policies" modified="201403051449" created="201403051449" modifier="twee">!Student status and billing\n!!!!You remain a Vanderbilt student while abroad!\nWhile studying abroad, you ''remain registered as a Vanderbilt student'' and you retain access to on-campus resources. You can register for classes, log in to YES and other campus applications, and make use of services (including [[counseling|https://medschool.vanderbilt.edu/pcc/]]).\n&lt;&lt;if $facultyled neq &quot;true&quot;&gt;&gt; \nTo make this possible, GEO enrolls you in a study abroad &ldquo;''placeholder course''.&rdquo; The placeholder will appear on your YES account before you go abroad. The actual courses you take abroad, as well as the grades you earned, will eventually replace the placeholder. This will occur only after your transcript arrives from abroad and both GEO and the University Registrar have processed it. ''It may take 2 to 6 months'' from the end of your program for your transcript to arrive, depending on individual circumstances.&lt;&lt;/if&gt;&gt;\s\n\n''Billing'' works just as it does for on-campus students. Vanderbilt Student Accounts will bill you, and your bill will arrive at the same time as usual, with the same payment terms. You can find the fees for your program in GEO's [[Cost Calculator|https://webapp.mis.vanderbilt.edu/studioabroad/index.cfm?FuseAction=Abroad.ViewLink&Parent_ID=B6A18B3E-FF30-D2BF-DB945C58C1748491&Link_ID=A02DB6D2-A969-AD00-E852344EC0D31EA1&pID=5&lID=33]].\n\n|box|k\n|!What's in my bill?|\n|Regular Vanderbilt tuition|\n|Study-abroad program fee (different for each program)|\n|(Reduced) activity fee|\n|&lt;hr /&gt;//More information:// [[Billing policies and procedures|https://webapp.mis.vanderbilt.edu/studioabroad/index.cfm?FuseAction=Abroad.ViewLink&Parent_ID=1B2BA4C0-FC49-E73B-80E95C6B35878D81&Link_ID=1B4B6ADC-B154-3B65-716254775A4B2E6D&pID=11&lID=64#billing]]|\n\n&lt;&lt;sidebar-box&gt;&gt;\n	[[What about financial aid?|Financial Aid]]\n&lt;&lt;/sidebar-box&gt;&gt;\n&lt;&lt;continue &quot;Conduct and law&quot;&gt;&gt;\s</div><div tiddler="Todo" tags="" modified="201403051449" created="201403051449" modifier="twee">/%%%%%%%%%%%%%%%%%%%%%%%%%%\n* Set up config that allows &quot;story&quot; to be renamed.\n* Put header on About this Presentation as well--?\n* tag property is used on something undefined in PassageDone when the user continues a previous session and attempts to use the navigation menu to jump back to material covered in the previous section. Worse, the passage gone to then is said not to exist. This seems to be due to $index not being properly filled in.\n* Doesn't work in Safari 5.1\n* Doesn't work in IE 9\n* Make it so that Continue button is fully clickable, not just on &quot;Continue&quot;\n* Refactor Chapters button so that it must be pressed and blurred, rather than hovered, and so that past slides are shown in a second level\n* Fix nav=[passage name] url handler; currently doesn't load sidebars properly\n* Add ?faculty-led=true url handler\n* Add ?summer=true url handler\n* Add ?insurance=true url handler\n* Remove all console.log references (needed for IE9)\n* Uncomment save options code in specials.tw (macros.get(&quot;saveoptions&quot;).handler();)\n* Resize all background images to 1440x900 (http://www.webmalama.com/the-best-full-screen-background-image-sizes-for-web-design/)\n* Use smaller images with an overlay to mask image degradation: http://solemone.de/demos/fullsize-background-image-with-css3-background-size/\n* iOS resolutions: http://www.iosres.com/\n* Consider conversion of some resources to data URIs: http://css-tricks.com/data-uris/\n* Credits page for all images used (final passage?)\n\n\n//The URL customizations available are as follows:\nnav : go directly to a given passage in the ePDO, ex.: http://...index.html?nav=Passport Acquisition\nfacultyled: sets $facultyled, used for Maymesters etc., ex.: http://...index.html?facultyled=true\nvanderbilt: sets $vanderbilt, used for Vanderbilt In's, ex.: http://...index.html?vanderbilt=true\nsummer: sets $summer, used for summer and Maymester programs, ex.: http://...index.html?summer=true\ninsurance: sets $insurance, used for programs that include HTH insurance, ex.: http://...index.html?insurance=true\n\nImages\nhttps://farm8.staticflickr.com/7381/9729745463_1386659d7d_b.jpg\nJonathan C Williams - Beautiful clear beaches of Tarifa, Spain\n\nhttps://farm8.staticflickr.com/7365/9732663006_b3b2ea7a2a_h.jpg\nMartha Ann Babbitt - Looking out onto Lake Como, Italy\n\nhttps://farm6.staticflickr.com/5343/9732659004_da85071c30_h.jpg\nSushma Boppana - Hillside Door in Budapest, Hungary\n\nhttps://farm8.staticflickr.com/7361/9732971090_eaa34a3faf_h.jpg\nCaleb Pike Umlauf - Bridge to Giant's Eye, N. Ireland\n\nhttps://farm6.staticflickr.com/5459/9729744099_32bf049d97_h.jpg\nJohn Franklin Sims-Jones - Fields and mountains near the Incan ruins of Moray\n\nhttps://farm8.staticflickr.com/7434/9729769853_d1b836868f_h.jpg\nAbby Marie Pribish - Lake Geneva Through the Foliage, Switzerland\n\nhttps://farm3.staticflickr.com/2820/9732971742_371e8d78c9_h.jpg\nDanielle Antoinette Morrison - Rooftop View, Segovia, Spain\n\nhttps://farm4.staticflickr.com/3760/9732827666_cb167630e2_b.jpg\nCourtney Elizabeth Hyland - Heliconia flowers in Costa Rica.\n\nhttps://farm3.staticflickr.com/2856/9732986242_3b2842448e_h.jpg\nChristina Anne Helena Snider - Apartment Buildings in San Telmo Neighborhood, Buenos Aires, Argentina\n\nhttps://farm4.staticflickr.com/3671/9732835282_7235344936_h.jpg\nJoshua LouAllen Grubb - Checkered Lawn - Jardn Japons (Japanese Garden), Buenos Aires (Argentina)\n\n%%%%%%%%%%%%%%%%%%%%%%%%%%/</div><div tiddler="Extended icon font" tags="stylesheet" modified="201403051449" created="201403051449" modifier="twee">@font-face\n{\n    font-family: 'icomoon-sugarcube-extended';\n    src: url(data:application/font-woff;charset=utf-8;base64,d09GRk9UVE8AAAckAAoAAAAABtwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABDRkYgAAAA9AAAAwAAAAMAsb/8qk9TLzIAAAP0AAAAYAAAAGAOsgMuY21hcAAABFQAAABEAAAAROYWAIdnYXNwAAAEmAAAAAgAAAAIAAAAEGhlYWQAAASgAAAANgAAADYBKuITaGhlYQAABNgAAAAkAAAAJAfCA8hobXR4AAAE/AAAABwAAAAcFgAAwG1heHAAAAUYAAAABgAAAAYAB1AAbmFtZQAABSAAAAHkAAAB5CE/yNRwb3N0AAAHBAAAACAAAAAgAAMAAAEABAQAAQEBG2ljb21vb24tc3VnYXJjdWJlLWV4dGVuZGVkAAECAAEAPvgcAvgbA/gYBB4KAAl2ViX/i4seCgAJdlYl/4uLDAeLS/qU+lQFHQAAAMUPHQAAAMoRHQAAAAkdAAAC9xIACAEBGzU4PUJHTFFpY29tb29uLXN1Z2FyY3ViZS1leHRlbmRlZGljb21vb24tc3VnYXJjdWJlLWV4dGVuZGVkdTIwdUU2MDB1RTYwMXVFNjAydUU2MDN1RTYwNAAAAgGJAAUABwIAAQAEAAcAXAEQAXYBpQIb/pQO/JQO+hT51BWL/dQF/TSLBVaLYLaLwAiLwLa2wIsI+PSLBYv5lAX9FIsFRYtRUYtFCIv9lAWLRcVR0YsI+ZSLBYv6FAVLiwX9FP1UFfjUiwWLSwX81IsFDvoQ+ZgV+wz3DAVmsEGqVosI/FSLBVaLYGCLVgiL/dQFi1a2YMCLCPlUiwXAi7a2i8AIi/jUBYvAbNVmsAj7kMAVjYqNio2KCJ2EmIKPhwj3DPsMBY+HlH6SeQiMiYyJjIkI+0yLBYv3TAX3VP2MFf0UiwWL+ZQF+BSLBYv7lAX3lIsFi/yUBfzU+BQV+JSLBYtLBfyUiwWLSxX4lIsFi0sF/JSLBYtLFfiUiwWLSwX8lIsFDov6VBX3lIsFi/uUBfuUiwX4FPdUFfkUiwWL+xQF/RSLBfwU+1QV95SLBYv7lAX7lIsF+BT3VBX5FIsFi/sUBf0UiwX8FPtUFfeUiwWL+5QF+5SLBfgU91QV+RSLBYv7FAX9FIsFDsv5lBX6FIsFi/tUBf4UiwWLSxX6FIsFi/tUBf4UiwWLSxX6FIsFi/tUBf4UiwUOi/jUFflUiwWL+xQF/VSLBYv3FAWL91QV+VSLBYv7FAX9VIsFi/cUBYv8FBX5VIsFi/sUBf1UiwWL9xQFi/tUFflUiwWL+xQF/VSLBYv3FAX5lPdUFfcU+1QF9xT3VAX7lIsF95TLFfsU91QF+xT7VAX3lIsFDvqUFPqUFYsMCgADBAABkAAFAAACmQLMAAAAjwKZAswAAAHrADMBCQAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAAAAAAAEAAIOYEA8D/wP/AA8AAQAAAAAEAAAAAAAAAAAAAACAAAAAAAAIAAAADAAAAFAADAAEAAAAUAAQAMAAAAAgACAACAAAAIOYE//3//wAAACDmAP/9////4RoCAAMAAQAAAAAAAAAAAAEAAf//AA8AAQAAAAEAALH7S3dfDzz1AAsEAAAAAADPBc7LAAAAAM8FzssAAP/ABAADwAAAAAgAAgAAAAAAAAABAAADwP/AAAAEAAAAAAAEAAABAAAAAAAAAAAAAAAAAAAABwAAAAACAAAABAAAQAQAAEAEAAAABAAAQAQAAAAAAFAAAAcAAAAAAA4ArgABAAAAAAABADQAAAABAAAAAAACAA4AzAABAAAAAAADADQASgABAAAAAAAEADQA2gABAAAAAAAFABYANAABAAAAAAAGABoAfgABAAAAAAAKACgBDgADAAEECQABADQAAAADAAEECQACAA4AzAADAAEECQADADQASgADAAEECQAEADQA2gADAAEECQAFABYANAADAAEECQAGADQAmAADAAEECQAKACgBDgBpAGMAbwBtAG8AbwBuAC0AcwB1AGcAYQByAGMAdQBiAGUALQBlAHgAdABlAG4AZABlAGQAVgBlAHIAcwBpAG8AbgAgADAALgAwAGkAYwBvAG0AbwBvAG4ALQBzAHUAZwBhAHIAYwB1AGIAZQAtAGUAeAB0AGUAbgBkAGUAZGljb21vb24tc3VnYXJjdWJlLWV4dGVuZGVkAGkAYwBvAG0AbwBvAG4ALQBzAHUAZwBhAHIAYwB1AGIAZQAtAGUAeAB0AGUAbgBkAGUAZABSAGUAZwB1AGwAYQByAGkAYwBvAG0AbwBvAG4ALQBzAHUAZwBhAHIAYwB1AGIAZQAtAGUAeAB0AGUAbgBkAGUAZABHAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4AAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==) format('woff');\n    font-weight: normal;\n    font-style: normal;\n}</div><div tiddler="Sidebar Title" tags="widget" modified="201403051449" created="201403051449" modifier="twee">/% Syntax:\n    &lt;&lt;sidebar [text]&gt;&gt; %/\s\n&lt;&lt;widget &quot;sidebar&quot;&gt;&gt;\s\n    &lt;hr class=&quot;sidebar&quot;&gt;\s\n    &lt;h4 class=&quot;sidebar&quot;&gt;Additional Information&lt;/h4&gt;\s\n    &lt;h1 class=&quot;sidebar&quot;&gt;&lt;&lt;print $args[0]&gt;&gt;&lt;/h1&gt;\s\n    &lt;hr class=&quot;sidebar&quot;&gt;\s\n    &lt;&lt;if state.length gt 1&gt;&gt;\s\n        &lt;h6 class=&quot;sidebar&quot;&gt;&lt;&lt;back &quot;Back&quot;&gt;&gt;&lt;/h6&gt;\s\n    &lt;&lt;/if&gt;&gt;\s\n&lt;&lt;/widget&gt;&gt;\s</div><div tiddler="Vanderbilt conduct policies" tags="policies" modified="201403051449" created="201403051449" modifier="twee">!Vanderbilt conduct policies\n!!!!Vanderbilt policies apply abroad as well as on campus\n&lt;&lt;if ($vanderbilt eq &quot;true&quot;) or ($facultyled eq &quot;true&quot;)&gt;&gt;Your ''trip leader or resident director has sole discretion over all discipline decisions''. They will hold you accountable for the standards of behavior described in the VU [[Student Handbook|http://www.vanderbilt.edu/student_handbook/]] and [[Honor System|http://www.vanderbilt.edu/student_handbook/the-honor-system/]], and they may also dictate other rules as needed. Your Vanderbilt trip leader may impose any disciplinary sanction, up to and including dismissal from the program. You also may face further consequences when you return to Vanderbilt.\n&lt;&lt;else&gt;&gt;You are subject to your abroad institution's rules, but you //also// need to abide by Vanderbilt's conduct policies. The standards of behavior described in the VU [[Student Handbook|http://www.vanderbilt.edu/student_handbook/]] and [[Honor System|http://www.vanderbilt.edu/student_handbook/the-honor-system/]] apply while you are abroad. Conduct that violates these codes may result in sanctions when you return to Vanderbilt, //even if you received sanctions from your program abroad.//&lt;&lt;/if&gt;&gt;\n\nBe sure to read the section in the Student Handbook on [[conduct in study abroad programs|http://www.vanderbilt.edu/student_handbook/student-accountability/#conduct-in-study-abroad-programs]].\n\n&lt;&lt;sidebar-box&gt;&gt;\n	[[Is Vanderbilt's alcohol policy different abroad?|Alcohol Policy]]\n&lt;&lt;/sidebar-box&gt;&gt;\n&lt;&lt;continue &quot;Grades and credits&quot;&gt;&gt;\s</div><div tiddler="Start" tags="nosave" modified="201403051449" created="201403051449" modifier="twee">&lt;&lt;if \n    SaveSystem.autosaveOK \n    && storage.getItem(&quot;saves&quot;).autosave !== null \n&gt;&gt;\s\nYou have a session already in progress. Continue where you left off? \n&lt;&lt;script&gt;&gt; \n    var resumeBtn = insertElement( \n        output, \n        &quot;button&quot;, \n        &quot;resume-button&quot;, \n        &quot;ui-autostart-button&quot;, \n        &quot;Resume where I left off&quot; \n    ); \n    var restartBtn = insertElement( \n        output, \n        &quot;button&quot;, \n        &quot;restart-button&quot;, \n        &quot;ui-autostart-button&quot;, \n        &quot;Start over&quot; \n    ); \n    $(resumeBtn).click(function() {\n        SaveSystem.loadAuto();\n    }); \n    $(restartBtn).click(function() { \n        SaveSystem.deleteAuto();\n        state.display(&quot;About the Presentation&quot;);\n    });\n&lt;&lt;/script&gt;&gt;\s\n&lt;&lt;else&gt;&gt;\s\n	&lt;&lt;display &quot;About the Presentation&quot;&gt;&gt;\s\n&lt;&lt;/if&gt;&gt;\s</div><div tiddler="Medications" tags="sidebar health" modified="201403051449" created="201403051449" modifier="twee">&lt;&lt;sidebar &quot;Where to Find Crucial Information About Your Medications&quot;&gt;&gt;\n\nIf possible, try to guide students to generic names/legal status info\n\n&lt;&lt;continue &quot;Medical insurance&quot;&gt;&gt;</div><div tiddler="Traveling with medications" tags="travel" modified="201403051449" created="201403051449" modifier="twee">!Traveling with medications\n!!!!Subhead goes here\n   * Keep in original packaging\n   * Carry a full supply if possible\n   * Have a doctor's letter to accompany your prescription\n\n&lt;&lt;sidebar-box &quot;More Info&quot;&gt;&gt;\n   [[What is customs anyway?|Customs]]\n   [[What dangers should I look out for at the airport?|Airport Dangers]]\n&lt;&lt;/sidebar-box&gt;&gt;\n\n&lt;&lt;continue &quot;Tips for packing&quot;&gt;&gt;</div><div tiddler="Where will you live?" tags="living" modified="201403051449" created="201403051449" modifier="twee">!Where will you live?\n!!!!What choices do you have in your housing abroad?\nSome programs offer you the opportunity to select from multiple housing options. Which should you choose? (If you're not sure about your housing options, talk to the GEO advisor for your program.)\n\nThe answer, of course, depends on what you are hoping to get out of your time overseas. \n\nBut we want to share with you what alumni of Vanderbilt study abroad tell us in their program evaluations: Students who live with natives of their host country typically report greater satisfaction with their housing and integration into the local culture than students who live with Americans. This is true whether students lived with a homestay family or with native roommates of their own age.\n&lt;&lt;display &quot;Housing chart&quot;&gt;&gt;\s\nPlease note that [[Vanderbilt University policy|https://webapp.mis.vanderbilt.edu/studioabroad/index.cfm?FuseAction=Abroad.ViewLink&Parent_ID=1B2BA4C0-FC49-E73B-80E95C6B35878D81&Link_ID=1B4B6ADC-B154-3B65-716254775A4B2E6D&pID=11&lID=65#housing]] does not allow you to find your own housing, //unless// your program doesn't offer prearranged housing.\n   \n&lt;&lt;continue &quot;Before you leave&quot;&gt;&gt;\s</div><div tiddler="Opportunities for returned students" tags="home" modified="201403051449" created="201403051449" modifier="twee">!Opportunities for returned students\n!!!!There's sooooo much you can do when you get home!\nYour study abroad experience doesn't have to end when you return to the US! In fact, our goal is to ensure that you can extend and process your experience when you return home.\n\nGEO offers programming specifically created for returning students. We sponsor a ''student organization,'' the Study Abroad Alumni Group, which hosts social dinners and workshops. Our [[annual conference|http://vanderbi.lt/icgrsa]] helps you unpack your experience and/or share your newfound insights about the world with fellow students.\n\nWhen you return, you can also ''volunteer with or work for GEO''; it's a great way to share your experience with other students. You can also get involved in our own local community: you may be surprised how international Nashville really is!\n\nStudying abroad can make you a great candidate for ''prestigious honors scholarships'' when you return home. Some of these, such as the Fulbright Fellowship or Critical Language Summer Institutes, may even send you abroad again! These opportunities may require advance planning, though, so we encourage you to study the offerings and discuss your interests with the [[Office of Honor Scholarships|http://ohs.vanderbilt.edu]] //before you leave//.\n\n&lt;&lt;sidebar-box&gt;&gt;\n   [[More ideas and resources for getting involved after you return!|Returnee resources]]\n   [[What possibilities exist for me to go abroad again after I return?|Going abroad again]]\n&lt;&lt;/sidebar-box&gt;&gt;\n\n&lt;&lt;continue &quot;GEO Photo Contest&quot;&gt;&gt;\s</div><div tiddler="Goto Passage" tags="script" modified="201403051449" created="201403051449" modifier="twee">/* Syntax:\n    &lt;&lt;goto [passage name]&gt;&gt;  */\n(function () {\n    macros.add(&quot;goto&quot;, {\n        version: {\n            major: 1,\n            minor: 0,\n            revision: 0\n        },\n        handler: function () {\n            try {\n                state.display(this.args[0]); \n            } \n            catch (e) {\n                return this.error(&quot;Go to passage: &quot; + e.message);\n            }\n        }\n    });\n}());</div><div tiddler="Host families" tags="sidebar living" modified="201403051449" created="201403051449" modifier="twee">&lt;&lt;sidebar &quot;Making the most of your host family&quot;&gt;&gt;\n\nText to go here!\n\n&lt;&lt;continue &quot;Money&quot;&gt;&gt;</div><div tiddler="Going abroad again" tags="home sidebar" modified="201403051449" created="201403051449" modifier="twee">&lt;&lt;sidebar &quot;Going Abroad...Again!&quot;&gt;&gt;\nStudents who return from abroad often feel they need to go abroad again!\n\nIf you are not graduating and you have room in your academic schedule, you are welcome to ''apply for another GEO study abroad program''--there is no rule that says you can only go once! Or, if you are more strapped for time, consider ''volunteering abroad''! You can go over break either with OACS or on your own. You may even be able to find funding (ask OACS about the Nichols Humanitarian Fund!).\n\nOr consider ''graduate studies abroad''. Several universities around the world welcome international students for graduate degrees. Many have more reasonable tuition fees than you will find in the US, yet with a comparable quality of education. It is often possible to apply US federal financial aid toward studies at recognized institutions. Some countries, like the United Kingdom, will even give you a 1- or 2-year work visa upon completion of an advanced degree in their country.\n\nAnother option might be ''working or interning abroad'', including teaching English abroad. Visit GEO's [[Career page|https://webapp.mis.vanderbilt.edu/studioabroad/index.cfm?FuseAction=Abroad.ViewLink&Parent_ID=1B2A18AE-0A6B-2220-EA57131A558B072C&Link_ID=1B3AFB7F-CCFB-5B8C-F4E22E5CBC34F1E5&pID=2&lID=21]] for resources and tips for finding an international job!\n\n&lt;&lt;continue &quot;GEO Photo Contest&quot;&gt;&gt;\s</div><div tiddler="Change background image" tags="script" modified="201403051449" created="201403051449" modifier="twee">(function () {\n    macros.add([&quot;imageRotate&quot;],  {\n        version: {\n            major: 1,\n            minor: 0,\n            revision: 0\n        },\n        handler: function() {\n        	try {\n                var imageName = &quot;&quot;;\n                imageName = state.active.variables.backgrounds[state.active.title];\n                if (imageName) {\n                	$(&quot;#img-occluder&quot;).fadeIn(&quot;fast&quot;, function() {\n                		$(&quot;body&quot;).css(&quot;background-image&quot;, &quot;url(&quot; + imageName +&quot;)&quot;);\n                		$(&quot;#img-occluder&quot;).fadeOut(&quot;slow&quot;);\n                	});                   \n                }\n            } catch (e) {\n                return this.error(&quot;Error: &quot; + e.message);\n            }\n        }\n    });\n\n    //Preload images, from http://www.glorioustrainwrecks.com/node/4982\n    var r = &quot;&quot;;\n    var s = Wikifier.formatters;\n    for (var j = 0; j &lt; s.length; j++) {\n        if (s[j].name == &quot;image&quot;) {\n            r = s[j].lookahead;\n            break;\n        }\n    }\n    var div = document.getElementById(&quot;store-area&quot;).firstChild.nextSibling;\n    while (div) {\n        if (r) {\n            k(new RegExp(r, &quot;mg&quot;), 4);\n        }\n        var b = String.fromCharCode(92);\n        var u = b + &quot;s*?['&quot; + '&quot;]?([^&quot;' + &quot;']+?(jpe?g|a?png|gif|bmp))['&quot; + '&quot;]?' + b + &quot;s*&quot;;\n        k(/['&quot;]([^&quot;']*\s.(jpe?g|a?png|gif|bmp))['&quot;]/mig, 1);\n        k(new RegExp(&quot;url&quot; + b + &quot;(&quot; + u + b + &quot;)&quot;, &quot;mig&quot;), 1);\n        //k(new RegExp(&quot;src&quot; + b + &quot;s*=&quot; + u, &quot;mig&quot;), 1);\n        div = div.nextSibling;\n    }\n\n    function k(c, e) {\n        \n        do {\n            var d = c.exec(div.innerHTML);\n            if (d) {\n                var i = new Image();\n                i.src = d[e];\n                console.log(&quot;Preloaded &quot; + i.src);\n            }\n        } while (d);\n    }\n}());\n\n\njQuery.preloadCssImages = function(){\n    var allImgs = [];//new array for all the image urls  \n    var k = 0; //iterator for adding images\n    var sheets = document.styleSheets;//array of stylesheets\n    \n    for(var i = 0; i&lt;sheets .length; i++){//loop through each stylesheet\n        var cssPile = '';//create large string of all css rules in sheet\n        var csshref = (sheets[i].href) ? sheets[i].href : 'window.location.href';\n        var baseURLarr = csshref.split('/');//split href at / to make array\n        baseURLarr.pop();//remove file path from baseURL array\n        var baseURL = baseURLarr.join('/');//create base url for the images in this sheet (css file's dir)\n        if(baseURL!=&quot;&quot;) baseURL+='/'; //tack on a / if needed\n        if(document.styleSheets[i].cssRules){//w3\n            var thisSheetRules = document.styleSheets[i].cssRules; //w3\n            for(var j = 0; j&lt;thisSheetRules.length; j++){\n                cssPile+= thisSheetRules[j].cssText;\n            }\n        }\n        else {\n            cssPile+= document.styleSheets[i].cssText;\n        }\n        \n        //parse cssPile for image urls and load them into the DOM\n        var imgUrls = cssPile.match(/[^\s(]+\s.(gif|jpg|jpeg|png)/g);//reg ex to get a string of between a &quot;(&quot; and a &quot;.filename&quot;\n        if(imgUrls != null && imgUrls.length&gt;0 && imgUrls != ''){//loop array\n            var arr = jQuery.makeArray(imgUrls);//create array from regex obj    \n            jQuery(arr).each(function(){\n                allImgs[k] = new Image(); //new img obj\n                allImgs[k].src = (this[0] == '/' || this.match('http://')) ? this : baseURL + this; //set src either absolute or rel to css dir\n                k++;\n            });\n        }\n    }//loop\n    return allImgs;\n}</div><div tiddler="Fonts" tags="stylesheet" modified="201403051449" created="201403051449" modifier="twee">/*@import url(http://fonts.googleapis.com/css?family=Bevan);*/\n@import url(https://fonts.googleapis.com/css?family=Arvo:400,700);\n@import url(https://fonts.googleapis.com/css?family=Open+Sans:400italic,400,600,700);</div><div tiddler="Housing chart" tags="nobr" modified="201403051449" created="201403051449" modifier="twee">&lt;figure&gt;\n	&lt;table class=&quot;box&quot;&gt;\n		&lt;thead&gt;\n			&lt;tr&gt;&lt;th colspan=2&gt;Overall Satisfaction with Housing and Cultural Immersion&lt;/th&gt;&lt;/tr&gt;\n		&lt;/thead&gt;\n		&lt;tbody&gt;\n			&lt;tr&gt;\n				&lt;td style=&quot;text-align:right;&quot;&gt;&lt;strong&gt;Lived with natives of host country&lt;/strong&gt;&lt;/td&gt;\n				&lt;td&gt;\n					&lt;div class=&quot;circle-graph circle-graph-full&quot;&gt;&lt;/div&gt;\n					&lt;div class=&quot;circle-graph circle-graph-full&quot;&gt;&lt;/div&gt;\n					&lt;div class=&quot;circle-graph circle-graph-full&quot;&gt;&lt;/div&gt;\n					&lt;div class=&quot;circle-graph circle-graph-full&quot;&gt;&lt;/div&gt;\n					&lt;div class=&quot;circle-graph-clip-container&quot;&gt;\n						&lt;div class=&quot;circle-graph circle-graph-empty&quot;&gt;&lt;/div&gt;\n						&lt;div class=&quot;circle-graph circle-graph-clip circle-graph-full&quot; style=&quot;clip:rect(0px, 14px, 30px, 0px);&quot;&gt;&lt;/div&gt;\n					&lt;/div&gt;\n				&lt;/td&gt;\n			&lt;/tr&gt;\n			&lt;tr&gt;\n				&lt;td style=&quot;text-align:right;&quot;&gt;&lt;strong&gt;Lived with Americans&lt;/strong&gt;&lt;/td&gt;\n				&lt;td&gt;\n					&lt;div class=&quot;circle-graph circle-graph-full&quot;&gt;&lt;/div&gt;\n					&lt;div class=&quot;circle-graph circle-graph-full&quot;&gt;&lt;/div&gt;\n					&lt;div class=&quot;circle-graph-clip-container&quot;&gt;\n						&lt;div class=&quot;circle-graph circle-graph-empty circle-graph-clip&quot;&gt;&lt;/div&gt;\n						&lt;div class=&quot;circle-graph circle-graph-clip circle-graph-full&quot; style=&quot;clip:rect(0px, 28px, 30px, 0px);&quot;&gt;&lt;/div&gt;\n					&lt;/div&gt;\n					&lt;div class=&quot;circle-graph circle-graph-empty&quot;&gt;&lt;/div&gt;\n					&lt;div class=&quot;circle-graph circle-graph-empty&quot;&gt;&lt;/div&gt;\n				&lt;/td&gt;\n			&lt;/tr&gt;\n			&lt;tr&gt;&lt;td colspan=2&gt;&lt;hr&gt;&lt;em&gt;Results from recent GEO program evaluation survey responses&lt;/em&gt;&lt;/td&gt;&lt;/tr&gt;\n		&lt;/tbody&gt;\n	&lt;/table&gt;\n&lt;/figure&gt;\n/% Results from Spring 2013 survey, combining answers to three questions: #s 14, 15, and 16 %/</div><div tiddler="Passport Acquisition" tags="sidebar travel" modified="201403051449" created="201403051449" modifier="twee">&lt;&lt;sidebar &quot;Getting or Renewing a Passport&quot;&gt;&gt;\nTo get a new passport, or to renew an old one, you will need to contact the proper issuing authority for your home country.\n\nUS citizens should visit the State Department's website for [[passport services|http://travel.state.gov/content/passports/english/passports.html]] to view requirements and to check on [[current processing times|http://travel.state.gov/content/passports/english/passports/information/processing-times.html]]. Be sure that you will receive your new passport in time to complete any visa or resident permit applications!\n\nIn Nashville, locations near Vanderbilt where you can apply for a passport include:\n\n|alternating-rows|k\n|!Church Street Post Office|Midtown&lt;br /&gt;1718 Church Street|(615) 321-0172|\n|!Acklen Post Office|Hillsboro Village&lt;br /&gt;2006 Acklen Ave|(615) 383-5396|\n|!Broadway Post Office|Downtown&lt;br /&gt;901 Broadway|(615) 255-3613|\n|![[Davidson County Clerk|http://www.nashvilleclerk.com/living/passports/]]|Downtown &lt;br /&gt;700 2nd Ave South, Suite 101|(615) 862-6223|\n\nYou may need to ''call in advance'' for an appointment!\n\nYou'll also need to get ''passport photos'' taken before you can apply. FedEx Kinko's, Walgreens, and CVS are locations near Vandy that can take passport photos.\n\n&lt;&lt;continue &quot;Traveling with medications&quot;&gt;&gt;\s</div><div tiddler="Array Utilities" tags="script" modified="201403051449" created="201403051449" modifier="twee">Array.prototype.purge = function (element) {\n	var i = this.indexOf(element);\n	while (i &gt; -1) {\n		this.splice(i);\n		i = this.indexOf(element);\n	}\n	return this;\n};\n\nArray.prototype.add = function (element) {\n	if (this.indexOf(element) === -1) {\n		this.push(element);\n	}\n	return this;\n};</div><div tiddler="Inline head" tags="widget" modified="201403051449" created="201403051449" modifier="twee">/% Syntax:\n    &lt;&lt;$- [text] [optional: ending punctuation]&gt;&gt;%/\s\n&lt;&lt;widget &quot;$-&quot;&gt;&gt;\s\n    &lt;span class='inline-head'&gt;&lt;&lt;print $args[0]&gt;&gt;&lt;&lt;if $args.length &gt; 1&gt;&gt;&lt;&lt;print $args[1]&gt;&gt;&lt;&lt;else&gt;&gt;.&lt;&lt;endif&gt;&gt;&lt;/span&gt;\s\n&lt;&lt;/widget&gt;&gt;\s</div><div tiddler="What we will cover in this presentation" tags="intro" modified="201403051449" created="201403051449" modifier="twee">!Your PDO guidebook\n!!!!What to expect from this Predeparture Orientation\nOver the next ****half-hour****, you will learn a lot about what to expect during your study abroad experience and how to prepare for it. It is a lot of information, but you can access it at any time, even while you're overseas! The chart below shows how your time in this Predeparture Orientation (PDO) will be spent. Keep an eye on the progress meter at the top of the screen to track how far you've come!\n|box|k\n|!Topic|!Description|!Time|\n|''Basic Policy Information''|Everything you need to know about being a Vanderbilt student abroad, conduct, and the law!|X&nbsp;minutes|\n|''Academic Policies''|How credits work, rules for determining credit, and how study abroad will impact your Vanderbilt transcript|X minutes|\n|''Travel''|What you need to know before you get on the plane and preparing for your journey in a practical sense|X minutes|\n|''Living and Learning Abroad''|Answers to questions about on-the-ground logistics|X minutes|\n|''Health and Wellness''|How to have a healthy study abroad experience and what to do when you are not so healthy|X minutes|\n|''Safety and Security''|Information on staying safe abroad and protecting yourself|X minutes|\n|''Returning Home''|An introduction to how your study abroad experience will impact you when you return to Vanderbilt|X minutes|\n|''Finishing Up''|Your next steps, a brief recap, and verifying with GEO that you completed this required module|X minutes|\n\n&lt;&lt;continue &quot;Your status as a Vanderbilt student&quot;&gt;&gt;\s</div><div tiddler="PassageReady" tags="nobr" modified="201403051449" created="201403051449" modifier="twee">/% Runs just before each passage is rendered. %/\n&lt;&lt;set $autoplaySound to &quot;&quot;&gt;&gt;\n&lt;&lt;set $autoplayDestination to &quot;&quot;&gt;&gt;\n&lt;&lt;stopAllSounds&gt;&gt;\n&lt;&lt;script&gt;&gt;\n    var passage = tale.get(state.active.title);\n    if (passage.tags.indexOf(&quot;sidebar&quot;) &gt; -1) {\n        //we are going from main flow to a sidebar\n        $(&quot;#passages&quot;).addClass(&quot;sidebar&quot;);\n        $(&quot;.passage&quot;).addClass(&quot;flip&quot;);//add class to outgoing passage\n        passage.classes.add(&quot;flip&quot;);//add class to incoming passage\n    }\n    else if ($(&quot;#passages&quot;).hasClass(&quot;sidebar&quot;)) {\n        //we are transitioning from a sidebar to the main flow\n        passage.classes.add(&quot;flip&quot;);//add class to incoming passage\n        $(&quot;.passage&quot;).addClass(&quot;flip&quot;);//add class to outgoing passage\n    }\n&lt;&lt;/script&gt;&gt;</div><div tiddler="Medical insurance" tags="health" modified="201403051449" created="201403051449" modifier="twee">!Medical Insurance\n!!!!Subhead goes here\n   * Most domestic insurance does not provide comprehensive international coverage.\n   * You may be enrolled in international health insurance by Vandy, your provider, or both.\n   * Be sure to maintain domestic coverage while you're abroad!\n\n&lt;&lt;continue &quot;Culture shock and coping&quot;&gt;&gt;</div><div tiddler="Grades and credits" tags="academics" modified="201403051449" created="201403051449" modifier="twee">!Grades and Credits\n!!!!Subhead goes here\n   * All grades earned abroad count toward GPA, no pass/fail, no retaking, etc.\n   * Grades you receive abroad cannot be changed by Vanderbilt; what is on the transcript from abroad is what will be recorded here.\n\n&lt;&lt;continue &quot;Course equivalency evaluations&quot;&gt;&gt;</div><div tiddler="When should I contact GEO" tags="sidebar living" modified="201403051449" created="201403051449" modifier="twee">&lt;&lt;sidebar &quot;When should I contact GEO?&quot;&gt;&gt;\nMost of the time, your most appropriate contact abroad will be your Resident Director, or if you are an exchange student, an advisor in your host university's international office. But there may also be times when it makes more sense to phone home to Vanderbilt and GEO. See the chart for things that GEO is well prepared to help you with!\n\n|box|k\n|!What GEO Can Help You With|\n|You are uncomfortable discussing an issue with your on-site staff|\n|Questions about specific Vanderbilt policies|\n|Questions about billing|\n|Questions about your transcript|\n|You want to remain abroad for another term|\n|You're just not sure who to talk to!|\n\n&lt;&lt;continue &quot;Balancing Contact&quot;&gt;&gt;</div><div tiddler="Nano Scroller" tags="stylesheet" modified="201403051449" created="201403051449" modifier="twee">/** initial setup **/\n.nano {\n  position : relative;\n  width    : 100%;\n  height   : 100%;\n  overflow : hidden;\n}\n.nano .content {\n  position      : absolute;\n  overflow      : scroll;\n  overflow-x    : hidden;\n  top           : 0;\n  right         : 0;\n  bottom        : 0;\n  left          : 0;\n}\n.nano .content:focus {\n  outline: thin dotted;\n}\n.nano .content::-webkit-scrollbar {\n  visibility: hidden;\n}\n.has-scrollbar .content::-webkit-scrollbar {\n  visibility: visible;\n}\n.nano &gt; .pane {\n  background : rgba(0,0,0,.25);\n  position   : absolute;\n  width      : 10px;\n  right      : 0;\n  top        : 0;\n  bottom     : 0;\n  visibility : hidden\s9; /* Target only IE7 and IE8 with this hack */\n  opacity    : .01; \n  -webkit-transition    : .2s;\n  -moz-transition       : .2s;\n  -o-transition         : .2s;\n  transition            : .2s;\n  -moz-border-radius    : 5px;\n  -webkit-border-radius : 5px;  \n  border-radius         : 5px;\n}\n.nano &gt; .pane &gt; .slider {\n  background: #444;\n  background: rgba(0,0,0,.5);\n  position              : relative;\n  margin                : 0 1px;\n  -moz-border-radius    : 3px;\n  -webkit-border-radius : 3px;  \n  border-radius         : 3px;\n}\n.nano:hover &gt; .pane, .pane.active, .pane.flashed {\n  visibility : visible\s9; /* Target only IE7 and IE8 with this hack */\n  opacity    : 0.99;\n}</div><div tiddler="/%%%%%%%%%%%" tags="" modified="201403051449" created="201403051449" modifier="twee">&lt;&lt;timedgoto &quot;About the Presentation&quot; 0 &gt;&gt;\nTo open a window without back and forward buttons (for launching the presentation):\nwindow.open(url,name,&quot;menubar=no,toolbar=no[, additional options]&quot;,true)\n\nAPI info\n\n$variable = state.active.variables.NAME\nprint name of active passage = state.active.title\n%%%%%%%%%%%/</div><div tiddler="Street safety" tags="safety sidebar" modified="201403051449" created="201403051449" modifier="twee">&lt;&lt;sidebar &quot;Street Safety&quot;&gt;&gt;\n\nStreet smarts/common scams, basics about pickpocketing/purse-snatching.\n\n&lt;&lt;continue &quot;LGBQTI issues&quot;&gt;&gt;</div><div tiddler="Play Sounds" tags="script" modified="201403051449" created="201403051449" modifier="twee">//based on http://www.glorioustrainwrecks.com/node/5061\n(function () {\n    macros.add([&quot;playSound&quot;, &quot;playSoundDelay&quot;, &quot;stopSound&quot;, &quot;pauseSound&quot;],  {\n        version: {\n            major: 1,\n            minor: 0,\n            revision: 0\n        },\n        soundtracks: {},\n        handler: function () {\n            try {\n                var soundName = this.args[0];\n                if (soundName) {\n                    soundName = soundName.toString(); //necessary?\n                    var sound = macros.get(&quot;playSound&quot;).soundtracks[soundName.slice(0, soundName.lastIndexOf(&quot;.&quot;))];\n                    if (sound) {\n                        if (this.name == &quot;playSoundDelay&quot;) {\n                            var delay = this.args[1];\n                            if (delay) {\n                                setTimeout(function() {\n                                    sound.play()\n                                }, delay);\n                            }\n                            else { sound.play() }\n                        }\n                        if (this.name == &quot;playSound&quot;) {\n                            sound.play();\n                        }\n                        if (this.name == &quot;playSoundDelay&quot; || this.name == &quot;playSound&quot;) {\n                            var passage = this.args.length &gt; 2 ? this.args[2] : undefined;\n                            if (passage) {\n                                $(sound).on(&quot;ended&quot;, function () {\n                                    state.display(passage)\n                                });\n                            }\n                        }\n                        if (this.name == &quot;pauseSound&quot;) {\n                            sound.pause();\n                        }\n                        if (this.name == &quot;stopSound&quot;) {\n                            sound.pause();\n                            sound.currentTime = 0;\n                        }\n                    }\n                }\n            } catch (e) {\n                return this.error(&quot;Error: &quot; + e.message);\n            }\n        }\n    });\n\n    var div = document.getElementById(&quot;store-area&quot;).firstChild;\n    var sourceTypes = [&quot;mp3&quot;, &quot;ogg&quot;];\n    while (div) {\n        var b = String.fromCharCode(92);\n        var q = '&quot;';\n        var re = &quot;['&quot; + q + &quot;]([^&quot; + q + &quot;']*?)&quot; + b + &quot;.audio['&quot; + q + &quot;]&quot;;\n        preloadSounds(new RegExp(re, &quot;gi&quot;));\n        div = div.nextSibling;\n    }\n\n    function preloadSounds(search, e) {\n        do {\n          var fileName = search.exec(div.innerHTML);\n          if (fileName) {\n            var sound = new Audio();\n            if (sound.canPlayType) {\n              for (var i = 0; i &lt; sourceTypes.length; i++) {\n                fileName[2] = sourceTypes[i];\n                if (sound.canPlayType(&quot;audio/&quot; + fileName[2])) break;\n              }\n              if (i &lt; sourceTypes.length) {\n                sound.setAttribute(&quot;src&quot;, fileName[1] + &quot;.&quot; + fileName[2]);\n                sound.interval = null;\n                macros.get(&quot;playSound&quot;).soundtracks[fileName[1]] = sound;\n              } else console.log(&quot;Browser can't play '&quot; + fileName[1] + &quot;'&quot;);\n            }\n          }\n        } while (fileName);\n    }\n\n}());</div><div tiddler="Conduct and law" tags="policies" modified="201403051449" created="201403051449" modifier="twee">!Conduct and law\n!!!!Be a good ambassador\nWhile you are abroad, be an ambassador for both Vanderbilt and your home country. You are part of a worldwide web of interactions, and the impression you make on the people of your host country reflects on where you came from!\n\nTake some time to learn about norms in the country you're visiting so that you can attempt to blend in socially. Beyond that, treat those you meet courteously and with sensitivity toward cultural differences. Remember, you are in their world!\n\nMoreover, you are ''subject to local laws'' while you are abroad. Foreign laws and legal systems may be quite different from those in your home country, and you need to know the differences. If you break local laws while abroad, neither Vanderbilt nor the U.S. Embassy can get you out of jail.\n&lt;&lt;if ($vanderbilt neq &quot;true&quot;) or ($facultyled neq &quot;true&quot;)&gt;&gt;\nWhether you are studying abroad at a university or on a smaller program with one of GEO's partners, you must also ''follow that institution's rules and policies''. These institutions may sanction or dismiss you if you violate their rules. //Dismissal from an abroad program will have the same consequences for your GPA and four-year plan as a dismissal from Vanderbilt!//&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;continue &quot;Vanderbilt conduct policies&quot;&gt;&gt;\s</div><div tiddler="Sexual harassment and sexual assault" tags="safety" modified="201403051449" created="201403051449" modifier="twee">!Sexual harassment and sexual assault\n!!!!Subhead goes here\n   * Cultural differences and challenges\n   * Resources\n\n&lt;&lt;sidebar-box&gt;&gt;\n   [[How can I avoid unwanted attention|Avoiding unwanted attention]]\n   [[What legal issues around sexual activity should I be aware of?|Sexual activity]]\n&lt;&lt;/sidebar-box&gt;&gt;\n\n\n&lt;&lt;continue &quot;Who to Contact&quot;&gt;&gt;</div><div tiddler="Credits" tags="finish" modified="201403051449" created="201403051449" modifier="twee">!Credits\n!!!!This is who made all of the pretty pictures!\n\n Thanks, folks!</div><div tiddler="Contacts and communications" tags="living" modified="201403051449" created="201403051449" modifier="twee">!Contacts and communications\n!!!!Who should I contact for help abroad?\nCommunications abroad can seem difficult at first! You need to learn who are your best resources, as well as figure out the most convenient methods of communication within your host country and back home.\n\nYour ''Resident Director'' will be your most reliable contact person: he or she is knowledgeable about the program, the host country, and the city--and he/she is //right there!// Whether you have a basic question, a scheduling conundrum, or you are in the midst of an emergency, your Resident Director and on-site staff should be the ''first people you contact.'' You will find out more about who your contact(s) should be in your program-specific predeparture orientation.\n\n''Remember this:'' Problems will be resolved faster if you work with someone who is on the ground with you, rather than contacting someone back home who is a few time zones and thousands of miles away.\n\n&lt;&lt;sidebar-box &quot;Hm...&quot;&gt;&gt;\n   [[When should I contact GEO?|When should I contact GEO]]\n&lt;&lt;/sidebar-box&gt;&gt;\n\n&lt;&lt;continue &quot;Special accommodations&quot;&gt;&gt;</div><div tiddler="Illness abroad" tags="health" modified="201403051449" created="201403051449" modifier="twee">!Illness abroad\n!!!!Subhead goes here\n   * Preexisting conditions\n   * Resources (program staff, HTH or other insurance, PCC, etc.)\n   * Be sure to keep any doctor's notes for your files, and keep program staff in the loop via email when you are ill.\n\n&lt;&lt;continue &quot;Avoid risky behaviors&quot;&gt;&gt;</div><div tiddler="What you will get out of study abroad" tags="intro" modified="201403051449" created="201403051449" modifier="twee">!What you'll get out of study abroad\n!!!!Academics, Cultural Competencies, Personal Growth\nCongratulations, you are getting closer to lift-off! Let us take a moment to remind you what you will get out of your study abroad experience.\s\n\n&lt;p&gt;&lt;&lt;$- &quot;Academic Training&quot;&gt;&gt; Without a doubt, you will be //studying// abroad. You will have the chance to take classes that are not available at Vanderbilt, broadening your horizons and expanding the breadth of perspectives available to you.&lt;/p&gt;\s\n&lt;p&gt;&lt;&lt;$- &quot;Experiential Learning&quot;&gt;&gt; As a study abroad student, you will learn in part by doing. In or out of the classroom, everything you do overseas will be a learning experience!&lt;/p&gt;\s\n&lt;p&gt;&lt;&lt;$- &quot;Cultural Competencies&quot;&gt;&gt; You will build [[cultural competencies|https://en.wikipedia.org/wiki/Cultural_competence]] by experiencing cultural differences, gaining a new perspective on your own culture, and acquiring skills that help you interact with a diverse set of people.&lt;/p&gt;\s\n&lt;p&gt;&lt;&lt;$- &quot;Personal Growth&quot;&gt;&gt; Regardless of where you go, facing the world outside the Vanderbubble will help shape you as a person and hone your life skills. You will become more self-reliant, confident, and self-aware. In fact, 97% of Vanderbilt study abroad alumni say that study abroad helped them develop self-confidence and independence.&lt;/p&gt;\s\n&lt;figure&gt;\s\n|box|k\n|&gt;|!According to Recent College Graduates Who Studied Abroad...|\n| ''84%''|Studying abroad helped me build valuable job skills, including language proficiency, cultural training, tolerance for ambiguity, adaptability, communication skills|\n| ''80%''|Studying abroad helped me develop confidence to deal with new skills required for my first job|\n|&gt;|&lt;hr /&gt;//Source: [[IES Recent Graduates Survey|http://www.iesabroad.org/system/files/recentgraduatessurvey.pdf]]//|\n&lt;/figure&gt;\n&lt;&lt;continue &quot;What we will cover in this presentation&quot;&gt;&gt;\s</div><div tiddler="Road safety" tags="safety sidebar" modified="201403051449" created="201403051449" modifier="twee">&lt;&lt;sidebar &quot;Road Safety Tips&quot;&gt;&gt;\n\nText here!\n\n&lt;&lt;continue &quot;LGBQTI issues&quot;&gt;&gt;</div><div tiddler="Before you leave" tags="health" modified="201403051449" created="201403051449" modifier="twee">!Before you leave\n!!!!Subhead goes here _(these should be added to our checklist too!)_\n   * Get a clean bill of health; get primary care and dental check-ups\n   * Get vaccinated for any travel you hope to do\n   * Learn the generic names and legal status of your meds\n   * Disclose any health conditions to program staff via medical forms\n\n&lt;&lt;sidebar-box&gt;&gt;\n   [[Do I need any vaccinations?|Vaccination]]\n   [[I need help identifying my medications!|Medications]]\n&lt;&lt;/sidebar-box&gt;&gt;\n\n&lt;&lt;continue &quot;Medical insurance&quot;&gt;&gt;</div><div tiddler="Custom UI styles" tags="stylesheet" modified="201403051449" created="201403051449" modifier="twee">header#custom {\n    position:fixed;\n    top:0;\n    margin:0 auto 0 20%;\n    height:44px;\n    width:60%;\n    background-color:#555;\n    border-bottom:1px solid #333;\n    -moz-box-shadow: 0 0 10px black;\n    -webkit-box-shadow: 0 0 10px black;\n    box-shadow: 0 0 10px black;\n    z-index:10;\n    display:none;\n}\n\n#custom h2 {\n    margin:2px 0 0 8px;\n    display:inline-block;\n    font-family: &quot;Open Sans&quot;, sans-serif;\n    color:#bbb;\n    font-size:16px;\n}\n\n#controls {\n    display:inline-block;\n    float:right;\n    margin-top:3px;\n    right:5px;\n}\n\n#story-rewind {\n    display: inline-block;\n    font-family: &quot;Open Sans&quot;, sans-serif;\n    font-size:13px;\n    float:right;\n    margin-top:3px;\n    margin-right: 10px;\n    color:#bbb;\n}\n\n#story-rewind div {\n    display: inline-block;\n}\n\n#story-rewind a#rewind-icon {\n    margin-left:7px;\n}\n\n#story-rewind a#rewind-icon:after {\n    content: &quot;\se602&quot;;\n    font-family: 'icomoon-sugarcube-extended';\n    font-size: 13px;\n    color: #222;\n    text-shadow: 0px 1px 1px #888;\n    font-weight:bold;\n    font-size:100%!important;\n    position:relative;\n    top:1px;\n}\n\n#story-rewind a#rewind-icon:hover:after {\n    color: #45cbe6;\n    text-decoration: none;\n}\n\n\n/* Popover menu */\n/* based on http://jsfiddle.net/LPbhS/ */\n#story-rewind div:hover ul {\n  visibility: visible;\n  opacity: 1;\n  padding: 4px 0 6px 0;\n}\n#story-rewind ul {\n  visibility: hidden;\n  padding:0;\n  opacity: 0;\n  position: absolute;\n  top: 100%;\n  list-style:none;\n  border: 1px solid;\n  border-color: #777 #6c6c6c #666;\n  border-radius: 5px;\n  -webkit-transition-property: opacity, padding, visibility;\n  -moz-transition-property: opacity, padding, visibility;\n  -ms-transition-property: opacity, padding, visibility;\n  -o-transition-property: opacity, padding, visibility;\n  transition-property: opacity, padding, visibility;\n  -webkit-transition: 0.2s ease-out;\n  -moz-transition: 0.2s ease-out;\n  -ms-transition: 0.2s ease-out;\n  -o-transition: 0.2s ease-out;\n  transition: 0.2s ease-out;\n  background-color: #d9e3fa;\n  background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #eef3fe), color-stop(100%, #d9e3fa));\n  background-image: -webkit-linear-gradient(top, #eef3fe, #d9e3fa);\n  background-image: -moz-linear-gradient(top, #eef3fe, #d9e3fa);\n  background-image: -ms-linear-gradient(top, #eef3fe, #d9e3fa);\n  background-image: -o-linear-gradient(top, #eef3fe, #d9e3fa);\n  background-image: linear-gradient(top, #eef3fe, #d9e3fa);\n  -webkit-box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.9), 0 1px 2px rgba(0, 0, 0, 0.1);\n  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.9), 0 1px 2px rgba(0, 0, 0, 0.1);\n}\n#story-rewind ul:before, #story-rewind ul:after, #story-rewind li:first-child:after {\n  display: block;\n  content: '';\n  width: 0;\n  height: 0;\n  position: absolute;\n  left: 5px;\n  border: 7px outset transparent;\n}\n#story-rewind ul:before {\n  border-bottom: 7px solid #555;\n  top: -14px;\n}\n#story-rewind li:first-child:after {\n  border-bottom: 7px solid #fff;\n  top: -13px;\n}\n#story-rewind ul:after {\n  border-bottom: 7px solid #EEF3FE;\n  top: -12px;\n}\n#story-rewind li {\n  padding: 0 12px;\n  font-size: 11px;\n  color: #838ca2;\n  text-shadow: 0 1px #fff;\n}\n#story-rewind li.sep {\n  border-bottom: 1px solid #b4bbce;\n  padding-bottom: 4px;\n  margin-bottom: 4px;\n}\n#story-rewind li a {\n  display: block;\n  position: relative;\n  margin: 0 -13px;\n  padding: 0 20px 0 12px;\n  color: #313a4f;\n  border: 1px solid transparent;\n}\n#story-rewind li a:hover {\n  color: #fff;\n  text-decoration: none;\n  text-shadow: 0 1px rgba(0, 0, 0, 0.3);\n  border-color: #5a70b0 #495d98 #42558a;\n  background-color: #5a70b0;\n  background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #7688bd), color-stop(100%, #4e64a3));\n  background-image: -webkit-linear-gradient(top, #7688bd, #4e64a3);\n  background-image: -moz-linear-gradient(top, #7688bd, #4e64a3);\n  background-image: -ms-linear-gradient(top, #7688bd, #4e64a3);\n  background-image: -o-linear-gradient(top, #7688bd, #4e64a3);\n  background-image: linear-gradient(top, #7688bd, #4e64a3);\n}\n#story-rewind li a:hover:after {\n  display: block;\n}\n#story-rewind li a:after {\n  display: none;\n  content: '';\n  width: 0;\n  height: 0;\n  position: absolute;\n  top: 50%;\n  right: 5px;\n  margin-top: -4px;\n  border: 4px solid transparent;\n  border-left-color: #9facd1;\n  border-left-color: rgba(255, 255, 255, 0.4);\n}\n#story-rewind li.disable {\n  color: #838ca2!important;\n}\n\n#progress {\n  clear:both;\n  display:block;\n}\n#progress-meter {\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  background-color: whiteSmoke;\n  box-shadow: 0 5px 5px -5px #222 inset;\n  width: 95%;\n  height: 6px;\n  display: inline-block;\n  box-shadow: 0 5px 5px -5px #888 inset;\n  background-color: #d8d8d8;\n  background-size: 100% 100%;\n  display: block;\n  text-indent: -9999px;\n  position:relative;\n  top:5px;\n  margin:auto;\n}\n#pb-complete {\n    position:absolute;\n    display:block;\n    top:2px;\n    bottom:2px;\n    background-color:#008EDB;/*#57C7DE;*/\n    right:100%;\n    left:0;\n}\n#pb-position {\n    position:absolute;\n    top:1px;\n    bottom:2px;\n    display:block;\n    left:0%;\n    width:4px;\n    height:4px;\n    background-color:#008EDB;/*#45cbe6;*/\n    border-radius:2px;\n}\nlabel.progress-meter {\n  color: #bbb;\n  font-size: 13px;\n  margin-right: 3px;\n  font-family: 'Open Sans', serif;\n}\n\n.hilight {\n    -webkit-animation-name: hilight;\n    -webkit-animation-duration: 1s;\n    -webkit-animation-iteration-count: 1;\n}\n\n@-webkit-keyframes hilight {\n    from { color:#bbb; text-shadow:none; }\n    20% { color: #ffffff; text-shadow:0px 0px 16px #ffffff; }\n    to { color:#bbb; text-shadow:none; }\n}\n\n\nlabel.autoplay-switch {\n    color: #bbb;\n    font-family: Arial, sans-serif;\n    font-size: 13px;\n    margin-right: 6px;\n    font-family: 'Open Sans', serif;\n}\n\n\nbutton:focus {outline:none;}\nbutton::-moz-focus-inner {border:0;}\n\nbutton#autoplay-switch {\n    display:inline-block;\n    width:19px;\n    height:19px;\n    margin:-1px 4px 0 0;\n    vertical-align:middle;\n    background:url(ui/check_radio_sheet.png) -38px top no-repeat;\n    cursor:pointer;\n    border:none;\n    -webkit-transition-duration: 0s;\n    -moz-transition-duration: 0s;\n    -o-transition-duration: 0s;\n    transition-duration: 0s;\n}\n\nbutton.switchedon {\n    background:url(ui/check_radio_sheet.png) -57px top no-repeat!important;\n    border:none;\n}</div><div tiddler="Phones and internet abroad" tags="sidebar living" modified="201403051449" created="201403051449" modifier="twee">&lt;&lt;sidebar &quot;Phones and internet abroad&quot;&gt;&gt;\n****Write Me****\nGEO cant tell you what cell phone company is the most reliable in your home away from home, but we can help you figure out who is your best person to ask!\n\n&lt;&lt;$- &quot;Dialing Telephones.&quot;&gt;&gt; The details of dialing internationally vary depending on which countries you're trying to connect. Bookmark [[How To Call Abroad|http://www.howtocallabroad.com/]] to share with family and friends.\n\n&lt;&lt;continue &quot;Special accommodations&quot;&gt;&gt;</div><div tiddler="URL Query String Utilities" tags="script" modified="201403051449" created="201403051449" modifier="twee">//from http://www.joezimjs.com/javascript/3-ways-to-parse-a-query-string-in-a-url/\nwindow.parseQueryString = function( queryString ) {\n    var params = {}, queries, temp, i, l;\n \n    // Split into key/value pairs\n    queries = queryString.split(&quot;&&quot;);\n \n    // Convert the array of strings into an object\n    for ( i = 0, l = queries.length; i &lt; l; i++ ) {\n        temp = queries[i].split('=');\n        params[temp[0]] = temp[1];\n    }\n \n    return params;\n};</div><div tiddler="Returnee resources" tags="home sidebar" modified="201403051449" created="201403051449" modifier="twee">&lt;&lt;sidebar &quot;More Ideas and Resources for Getting Involved After Returning Home&quot;&gt;&gt;\nWhether you're interested in publishing your experiences, submitting photos to the GEO photo contest, or getting involved with the international communities of Vanderbilt and Nashville, GEO has information for you! In fact, there's an [[entire section of our website|http://vanderbi.lt/rusg8]] dedicated to giving you ideas for post-study abroad involvement. Check it out!</div><div tiddler="Alcohol Policy" tags="sidebar policies" modified="201403051449" created="201403051449" modifier="twee">&lt;&lt;sidebar &quot;Vanderbilt policy on alcohol abroad&quot;&gt;&gt;\nVanderbilt does not really treat alcohol use abroad any differently than it does on campus. However, in all of the countries where Vanderbilt has approved study abroad programs, the drinking age is lower than it is here in Nashville. You need to abide by the legal drinking age of the country you're in. Remember that violations of law overseas may also become grounds for disciplinary action both at Vanderbilt and under the rules of your abroad program.\n\nAt the same time that you are considering the legal implications of drinking, be mindful of cultural norms surrounding alcohol use in your host country. In many countries, for example, American-style &quot;binge drinking&quot; may appear pathological or merely pathetic. Take the opportunity to see cultural practices in a new light. \n\n|box|k\n|The Student Handbook says:|h\n|Students are required to abide by the laws of the respective countries in which they reside, study, or travel, with respect to the age at which alcoholic beverages may be consumed. Otherwise, the policies with respect to [[alcoholic beverages and controlled substances|http://www.vanderbilt.edu/student_handbook/alcohol/]] included in the Vanderbilt //Student Handbook// apply. Students are subject to student-accountability sanctions, including expulsion, and referral for prosecution for violation of these policies.|\n|&lt;hr&gt;//From// http://www.vanderbilt.edu/student_handbook/university-policies-regulations/#study-abroad|</div><div tiddler="Table of Contents" tags="" modified="201403051449" created="201403051449" modifier="twee">/% \n	Each passage can be part of only one section,\n	sections cannot overlap. Sections must be listed\n	*in order* of their appearance in the presentation.\n%/\n\n/% Where should we begin? Give first passage's name here. %/\n&lt;&lt;set $first to &quot;What you will get out of study abroad&quot;&gt;&gt;\n\n&lt;&lt;contents&gt;&gt;\n    &lt;&lt;section &quot;Global Education Office&quot; &quot;nosave&quot; &quot;images/Wheelock_Elizabeth_Rose_Tulips_at_Keukenhof_Gardens_outside_Amsterdam.jpg&quot;&gt;&gt;\n    &lt;&lt;section &quot;Introduction&quot; &quot;intro&quot; &quot;images/Weinstein_Lori_Ann_Sunrise_at_Byron_Bay_Australia.jpg&quot;&gt;&gt;\n    &lt;&lt;section &quot;Basic Policy Information&quot; &quot;policies&quot; &quot;images/Boppana_Sushma_Hillside_Door_Budapest_Hungary.jpg&quot;&gt;&gt;\n    &lt;&lt;section &quot;Academic Policies&quot; &quot;academics&quot; &quot;images/Grubb_Joshua_LouAllen_Checkered_Lawn_Buenos_Aires.jpg&quot;&gt;&gt;\n    &lt;&lt;section &quot;Travel&quot; &quot;travel&quot; &quot;images/Morrison_Danielle_Antoinette_Rooftop_View_Segovia_Spain.jpg&quot;&gt;&gt;\n    &lt;&lt;section &quot;Living and Learning Abroad&quot; &quot;living&quot; &quot;images/Pribish_Abby_Marie_Lake_Geneva_Through_the_Foliage_Switzerland.jpg&quot;&gt;&gt;\n    &lt;&lt;section &quot;Health and Wellness&quot; &quot;health&quot; &quot;images/Sims-Jones_John_Fields_and_mountains_of_Moray.jpg&quot;&gt;&gt;\n    &lt;&lt;section &quot;Safety and Security&quot; &quot;safety&quot; &quot;images/Tollefsen_Stefanie_Violet_tree_Rome_Italy.jpg&quot;&gt;&gt;\n    &lt;&lt;section &quot;Returning Home&quot; &quot;home&quot; &quot;images/Williams_Jon_Beaches_of_Tarifa_Spain.jpg&quot;&gt;&gt;\n    &lt;&lt;section &quot;Finishing Up&quot; &quot;finish&quot; &quot;images/Babbitt_Martha_Ann_Lake_Como_Italy.jpg&quot;&gt;&gt;\n&lt;&lt;create-index&gt;&gt;</div><div tiddler="Reset index" tags="widget" modified="201403051449" created="201403051449" modifier="twee">&lt;&lt;widget &quot;contents&quot;&gt;&gt;\s\n	&lt;&lt;set $index to {}&gt;&gt;\n	&lt;&lt;set $backgrounds to {}&gt;&gt;\n    &lt;&lt;set $tags to []&gt;&gt;\n    &lt;&lt;set $bookmarks to {}&gt;&gt;\n    &lt;&lt;set $fullindex to []&gt;&gt;\n    &lt;&lt;set $totalPassages to 0&gt;&gt;\n&lt;&lt;/widget&gt;&gt;</div>
</div></html>
